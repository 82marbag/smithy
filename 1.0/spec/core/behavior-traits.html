
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>8. Behavior traits &#8212; Smithy 1.0 documentation</title><link rel="stylesheet" href="../../../_static/bootstrap-reboot.css" type="text/css" />
    
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/default.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" href="../../../_static/custom-tabs.css" type="text/css" />

    
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/tabs.js"></script>
    <script type="text/javascript" src="../../../_static/smithy.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="9. Resource traits" href="resource-traits.html" />
    <link rel="prev" title="7. Authentication traits" href="auth-traits.html" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="smithy-version" content="1.0">

  </head><body>
    <header>
        <div class="header-flex width-wrapper">
            <div class="site-logo">
                <a href="../../../index.html">
                    <span class="logo-icon">üî®Ô∏è</span><span class="logo-text">Smithy</span>
                </a>
                <span class="version-text">1.0</span>
            </div>
            <ul id="page-navigation">
                <li class="site-page first"><a href="../../../quickstart.html">Quick Start</a></li>
                <li class="site-page"><a href="../index.html">Specifications</a></li>
                <li class="site-page"><a href="../../guides/index.html">Guides</a></li>
                <li class="site-page"><a href="https://github.com/awslabs/smithy">Code</a></li>
                <li class="site-search hidden-sm">
                    <form action="../../../search.html" method="get">
                        <input type="hidden" name="check_keywords" value="yes" />
                        <input type="hidden" name="area" value="default" />
                        <input class="search-input" autocomplete="off" type="search" name="q" placeholder="Search" />
                    </form>
                </li>
            </ul>
        </div>
    </header>
    
        
        
        <section id="page-container">
            <div class="width-wrapper flex">
                <article class="document-body">
                    
                    <ul class="rel-parents">
                    <li><a href="../index.html" >Specifications</a></li>
                    <li><a href="index.html" accesskey="U">Smithy specification</a></li>
                    </ul>
                    
                    
  <div class="section" id="behavior-traits">
<h1><a href="#behavior-traits"><span class="section-number">8. </span>Behavior traits</a></h1>
<p>Behavior traits are used to alter the behavior of operations.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#idempotencytoken-trait" id="id9"><code class="docutils literal notranslate"><span class="pre">idempotencyToken</span></code> trait</a></li>
<li><a class="reference internal" href="#idempotent-trait" id="id10"><code class="docutils literal notranslate"><span class="pre">idempotent</span></code> trait</a></li>
<li><a class="reference internal" href="#readonly-trait" id="id11"><code class="docutils literal notranslate"><span class="pre">readonly</span></code> trait</a></li>
<li><a class="reference internal" href="#retryable-trait" id="id12"><code class="docutils literal notranslate"><span class="pre">retryable</span></code> trait</a></li>
<li><a class="reference internal" href="#paginated-trait" id="id13"><code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait</a></li>
<li><a class="reference internal" href="#httpchecksumrequired-trait" id="id14"><code class="docutils literal notranslate"><span class="pre">httpChecksumRequired</span></code> trait</a></li>
<li><a class="reference internal" href="#httpchecksum-trait" id="id15"><code class="docutils literal notranslate"><span class="pre">httpChecksum</span></code> trait</a></li>
</ul>
</div>
<div class="section" id="idempotencytoken-trait">
<span id="smithy-api-idempotencytoken-trait"></span><span id="id1"></span><h2><a href="#idempotencytoken-trait"><span class="section-number">8.1. </span><code class="docutils literal notranslate"><span class="pre">idempotencyToken</span></code> trait</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Defines the input member of an operation that is used by the server to
identify and discard replayed requests.</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">structure</span> <span class="pre">&gt;</span> <span class="pre">:test(member</span> <span class="pre">&gt;</span> <span class="pre">string)</span></code></p>
<p><em>Any structure member that targets a string</em></p>
</dd>
<dt>Value type</dt><dd>Annotation trait</dd>
</dl>
<p>Only a single member of the input of an operation can be targeted by the
<code class="docutils literal notranslate"><span class="pre">idempotencyToken</span></code> trait; only top-level structure members of the input of an
operation are considered.</p>
<p>A unique identifier (typically a <a class="reference external" href="https://tools.ietf.org/html/rfc4122">UUID</a>) SHOULD be used by the client when
providing the value for the request token member. When the request token is
present, the service MUST ensure that the request is not replayed within a
service-defined period of time. This allows the client to safely retry
operation invocations, including operations that are not read-only, that fail
due to networking issues or internal server errors. The service uses the
provided request token to identify and discard duplicate requests.</p>
<p>Client implementations MAY automatically provide a value for a request token
member if and only if the member is not explicitly provided.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button></div><div aria-labelledby="tab-0-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">operation</span><span class="nc"> AllocateWidget</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">AllocateWidgetInput</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">structure</span><span class="nc"> AllocateWidgetInput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@idempotencyToken</span><span class="w"></span>
<span class="w">    </span><span class="nl">clientToken:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="idempotent-trait">
<span id="smithy-api-idempotent-trait"></span><span id="id2"></span><h2><a href="#idempotent-trait"><span class="section-number">8.2. </span><code class="docutils literal notranslate"><span class="pre">idempotent</span></code> trait</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Indicates that the intended effect on the server of multiple identical
requests with an operation is the same as the effect for a single such
request.</dd>
<dt>Trait selector</dt><dd><code class="docutils literal notranslate"><span class="pre">operation</span></code></dd>
<dt>Value type</dt><dd>Annotation trait</dd>
<dt>Conflicts with</dt><dd><a class="reference internal" href="#readonly-trait"><span class="std std-ref">readonly trait</span></a></dd>
</dl>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button></div><div aria-labelledby="tab-1-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-1-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@idempotent</span><span class="w"></span>
<span class="kd">operation</span><span class="nc"> DeleteSomething</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">DeleteSomethingInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">DeleteSomethingOutput</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All operations that are marked as <a class="reference internal" href="#readonly-trait"><span class="std std-ref">readonly trait</span></a> are inherently
idempotent.</p>
</div>
</div>
<div class="section" id="readonly-trait">
<span id="smithy-api-readonly-trait"></span><span id="id3"></span><h2><a href="#readonly-trait"><span class="section-number">8.3. </span><code class="docutils literal notranslate"><span class="pre">readonly</span></code> trait</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Indicates that an operation is effectively read-only.</dd>
<dt>Trait selector</dt><dd><code class="docutils literal notranslate"><span class="pre">operation</span></code></dd>
<dt>Value type</dt><dd>Annotation trait</dd>
<dt>Conflicts with</dt><dd><a class="reference internal" href="#idempotent-trait"><span class="std std-ref">idempotent trait</span></a></dd>
</dl>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button></div><div aria-labelledby="tab-2-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-2-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@readonly</span><span class="w"></span>
<span class="kd">operation</span><span class="nc"> GetSomething</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">GetSomethingInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">GetSomethingOutput</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="retryable-trait">
<span id="smithy-api-retryable-trait"></span><span id="id4"></span><h2><a href="#retryable-trait"><span class="section-number">8.4. </span><code class="docutils literal notranslate"><span class="pre">retryable</span></code> trait</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Indicates that an error MAY be retried by the client.</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">structure[trait|error]</span></code></p>
<p><em>A structure shape with the error trait</em></p>
</dd>
<dt>Value type</dt><dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>The retryable trait is a structure that contains the following members:</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>throttling</td>
<td><code class="docutils literal notranslate"><span class="pre">boolean</span></code></td>
<td>Indicates that the error is a retryable throttling error.</td>
</tr>
</tbody>
</table>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-3-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button></div><div aria-labelledby="tab-3-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-3-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@error</span>(<span class="s2">&quot;server&quot;</span>)<span class="w"></span>
<span class="nd">@retryable</span><span class="w"></span>
<span class="nd">@httpError</span>(<span class="m">503</span>)<span class="w"></span>
<span class="kd">structure</span><span class="nc"> ServiceUnavailableError</span><span class="w"> </span>{}<span class="w"></span>

<span class="nd">@error</span>(<span class="s2">&quot;client&quot;</span>)<span class="w"></span>
<span class="nd">@retryable</span>(<span class="nl">throttling:</span><span class="w"> </span><span class="kc">true</span>)<span class="w"></span>
<span class="nd">@httpError</span>(<span class="m">429</span>)<span class="w"></span>
<span class="kd">structure</span><span class="nc"> ThrottlingError</span><span class="w"> </span>{}<span class="w"></span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="paginated-trait">
<span id="smithy-api-paginated-trait"></span><span id="pagination"></span><span id="id5"></span><h2><a href="#paginated-trait"><span class="section-number">8.5. </span><code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>The <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait indicates that an operation intentionally limits
the number of results returned in a single response and that multiple
invocations might be necessary to retrieve all results.</dd>
<dt>Trait selector</dt><dd><p><code class="docutils literal notranslate"><span class="pre">:is(operation,</span> <span class="pre">service)</span></code></p>
<p><em>An operation or service</em></p>
</dd>
<dt>Value type</dt><dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>Pagination is the process of dividing large result sets into discrete
pages. Smithy provides a built-in pagination mechanism that utilizes a
cursor.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait is a structure that contains the following members:</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>inputToken</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">The name of the operation input member that contains a continuation
token. When this value is provided as input, the service returns
results from where the previous response left off. This input member
MUST NOT be marked as <code class="docutils literal notranslate"><span class="pre">required</span></code> and SHOULD target a string shape.
It can, but SHOULD NOT target a map shape.</p>
<p class="last">When contained within a service, a paginated operation MUST either
configure <code class="docutils literal notranslate"><span class="pre">inputToken</span></code> on the operation itself or inherit it from
the service that contains the operation.</p>
</td>
</tr>
<tr class="row-odd"><td>outputToken</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">The path to the operation output member that contains an optional
continuation token. When this value is present in operation output,
it indicates that there are more results to retrieve. To get the next
page of results, the client passes the received output continuation
token to the input continuation token of the next request. This
output member MUST NOT be marked as <code class="docutils literal notranslate"><span class="pre">required</span></code> and SHOULD target a
string shape. It can, but SHOULD NOT target a map shape.</p>
<p class="last">When contained within a service, a paginated operation MUST either
configure <code class="docutils literal notranslate"><span class="pre">outputToken</span></code> on the operation itself or inherit it from
the service that contains the operation.</p>
</td>
</tr>
<tr class="row-even"><td>items</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>The path to an output member of the operation that contains
the data that is being paginated across many responses. The named
output member, if specified, MUST target a list or map.</td>
</tr>
<tr class="row-odd"><td>pageSize</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">The name of an operation input member that limits the maximum number
of results to include in the operation output. This input member
SHOULD NOT be required and MUST target an integer shape.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not attempt to fill response pages to meet the value provided
for the <code class="docutils literal notranslate"><span class="pre">pageSize</span></code> member of a paginated operation. Attempting to
match a target number of elements results in an unbounded API with
an unpredictable latency.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p>The following example defines a paginated operation that sets each value
explicitly on the operation.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-4-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-4-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-4-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-4-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-4-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="nd">@readonly</span><span class="w"></span>
<span class="nd">@paginated</span>(<span class="nl">inputToken:</span><span class="w"> </span><span class="s2">&quot;nextToken&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">outputToken:</span><span class="w"> </span><span class="s2">&quot;nextToken&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">           </span><span class="nl">pageSize:</span><span class="w"> </span><span class="s2">&quot;maxResults&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">items:</span><span class="w"> </span><span class="s2">&quot;foos&quot;</span>)<span class="w"></span>
<span class="kd">operation</span><span class="nc"> GetFoos</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">GetFoosInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">GetFoosOutput</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">structure</span><span class="nc"> GetFoosInput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">maxResults:</span><span class="w"> </span><span class="vc">Integer</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">nextToken:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">structure</span><span class="nc"> GetFoosOutput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">nextToken:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">foos:</span><span class="w"> </span><span class="vc">StringList</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">list</span><span class="nc"> StringList</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">member:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-4-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#GetFoos&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetFoosInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetFoosOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="nt">&quot;smithy.api#paginated&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;inputToken&quot;</span><span class="p">:</span> <span class="s2">&quot;nextToken&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;outputToken&quot;</span><span class="p">:</span> <span class="s2">&quot;nextToken&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;pageSize&quot;</span><span class="p">:</span> <span class="s2">&quot;maxResults&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;items&quot;</span><span class="p">:</span> <span class="s2">&quot;foos&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetFoosInput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;maxResults&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Integer&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;nextToken&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetFoosOutput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;nextToken&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;foos&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#StringList&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="p">{}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#StringList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>Attaching the <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait to a service provides default pagination
configuration settings to all operations bound within the closure of the
service. Pagination settings configured on an operation override any inherited
service setting.</p>
<p>The following example defines a paginated operation that inherits some
settings from a service.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-5-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-5-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-5-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-5-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-5-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="nd">@paginated</span>(<span class="nl">inputToken:</span><span class="w"> </span><span class="s2">&quot;nextToken&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">outputToken:</span><span class="w"> </span><span class="s2">&quot;nextToken&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">           </span><span class="nl">pageSize:</span><span class="w"> </span><span class="s2">&quot;maxResults&quot;</span>)<span class="w"></span>
<span class="kd">service</span><span class="nc"> Example</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">version:</span><span class="w"> </span><span class="s2">&quot;2019-06-27&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">operations:</span><span class="w"> </span>[<span class="vc">GetFoos</span>]<span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="nd">@readonly</span><span class="w"> </span><span class="nd">@paginated</span>(<span class="nl">items:</span><span class="w"> </span><span class="s2">&quot;foos&quot;</span>)<span class="w"></span>
<span class="kd">operation</span><span class="nc"> GetFoos</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">GetFoosInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">GetFoosOutput</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-5-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Example&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-06-27&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#paginated&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;inputToken&quot;</span><span class="p">:</span> <span class="s2">&quot;nextToken&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;outputToken&quot;</span><span class="p">:</span> <span class="s2">&quot;nextToken&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;pageSize&quot;</span><span class="p">:</span> <span class="s2">&quot;maxResults&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetFoos&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetFoosInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetFoosOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="nt">&quot;smithy.api#paginated&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;items&quot;</span><span class="p">:</span> <span class="s2">&quot;foos&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>The values for <code class="docutils literal notranslate"><span class="pre">outputToken</span></code> and <code class="docutils literal notranslate"><span class="pre">items</span></code> are paths. <em class="dfn">Paths</em> are a series of
identifiers separated by dots (<code class="docutils literal notranslate"><span class="pre">.</span></code>) where each identifier represents a
member name in a structure. The first member name MUST correspond to a member
of the output structure and each subsequent member name MUST correspond to a
member in the previously referenced structure. Paths MUST adhere to the
following ABNF.</p>
<pre class="productionlist">
<strong id="grammar-token-smithy-path"><span id="grammar-token-path"></span>path</strong> =
    <a class="reference internal" href="model.html#grammar-token-smithy-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> *(&quot;.&quot; <a class="reference internal" href="model.html#grammar-token-smithy-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a>)
</pre>
<p>The following example defines a paginated operation which uses a result
wrapper where the output token and items are referenced by paths.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-6-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-6-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-6-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-6-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-6-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="nd">@readonly</span><span class="w"></span>
<span class="nd">@paginated</span>(<span class="nl">inputToken:</span><span class="w"> </span><span class="s2">&quot;nextToken&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">outputToken:</span><span class="w"> </span><span class="s2">&quot;result.nextToken&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">           </span><span class="nl">pageSize:</span><span class="w"> </span><span class="s2">&quot;maxResults&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">items:</span><span class="w"> </span><span class="s2">&quot;result.foos&quot;</span>)<span class="w"></span>
<span class="kd">operation</span><span class="nc"> GetFoos</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">GetFoosInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">GetFoosOutput</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">structure</span><span class="nc"> GetFoosInput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">maxResults:</span><span class="w"> </span><span class="vc">Integer</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">nextToken:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">structure</span><span class="nc"> GetFoosOutput</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">result:</span><span class="w"> </span><span class="vc">ResultWrapper</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">structure</span><span class="nc"> ResultWrapper</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">nextToken:</span><span class="w"> </span><span class="vc">String</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="nd">@required</span><span class="w"></span>
<span class="w">    </span><span class="nl">foos:</span><span class="w"> </span><span class="vc">StringList</span><span class="p">,</span><span class="w"></span>
}<span class="w"></span>

<span class="kd">list</span><span class="nc"> StringList</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">member:</span><span class="w"> </span><span class="vc">String</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-6-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#GetFoos&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetFoosInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetFoosOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="nt">&quot;smithy.api#paginated&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;inputToken&quot;</span><span class="p">:</span> <span class="s2">&quot;nextToken&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;outputToken&quot;</span><span class="p">:</span> <span class="s2">&quot;result.nextToken&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;pageSize&quot;</span><span class="p">:</span> <span class="s2">&quot;maxResults&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;items&quot;</span><span class="p">:</span> <span class="s2">&quot;result.foos&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetFoosInput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;maxResults&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Integer&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;nextToken&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetFoosOutput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ResultWrapper&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="p">{}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#ResultWrapper&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;nextToken&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;foos&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#StringList&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="p">{}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#StringList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<div class="section" id="pagination-behavior">
<h3><a href="#pagination-behavior"><span class="section-number">8.5.1. </span>Pagination Behavior</a></h3>
<ol class="arabic simple">
<li>If an operation returns a naturally size-limited subset of data
(e.g., a top-ten list of users sorted by rank), then the operation
SHOULD NOT be paginated.</li>
<li>Only one list or map per operation can be paginated.</li>
<li>Paginated responses MUST NOT return the same item of a paginated result
set more than once (i.e., a paginated result set is a disjoint union of the
subsets partitioned by the referenced <code class="docutils literal notranslate"><span class="pre">pageSize</span></code> input member and the SLA
defined by the service).</li>
<li>If a paginated request returns data in a sorted order that is not an
immutable strict total ordering of items, then the paginated request MUST
provide a temporally static view of the underlying data that does not
modify the order topology during pagination. For example, a game‚Äôs
leaderboard of top-scoring players cannot have players move from position
#10 to position #12 during pagination, the last player on page N has to
have a higher score than the first player on page N+1, no players that
exist when pagination begins are to be skipped, and players MUST NOT be
repeated due to moves in the underlying data.</li>
<li>If pagination is ordered and newly created resources are returned, then
newly created resources MUST appear in order on the appropriate page.</li>
</ol>
</div>
<div class="section" id="client-behavior">
<h3><a href="#client-behavior"><span class="section-number">8.5.2. </span>Client behavior</a></h3>
<p>Smithy clients SHOULD provide abstractions that can be used to automatically
iterate over paginated responses. The following steps describe the process a
client MUST follow when iterating over paginated API calls:</p>
<ol class="arabic simple">
<li>Send the initial request to a paginated operation.</li>
<li>If the received response does not contain a continuation token in the
referenced <code class="docutils literal notranslate"><span class="pre">outputToken</span></code> member, then there are no more results to
retrieve and the process is complete.</li>
<li>If there is a continuation token in the referenced <code class="docutils literal notranslate"><span class="pre">outputToken</span></code> member
of the response, then the client sends a subsequent request using the same
input parameters as the original call, but including the last received
continuation token. Clients are free to change the designated <code class="docutils literal notranslate"><span class="pre">pageSize</span></code>
input parameter at this step as needed.</li>
<li>If a client receives an identical continuation token from a service in back
to back calls, then the client MAY choose to stop sending requests. This
scenario implies a &quot;tail&quot; style API operation where clients are running in
an infinite loop to send requests to a service in order to retrieve results
as they are available.</li>
<li>Return to step 2.</li>
</ol>
</div>
<div class="section" id="continuation-tokens">
<h3><a href="#continuation-tokens"><span class="section-number">8.5.3. </span>Continuation tokens</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait indicates that an operation utilizes cursor-based
pagination. When a paginated operation truncates its output, it MUST return a
continuation token in the operation output that can be used to get the next
page of results. This token can then be provided along with the original input
to request additional results from the operation.</p>
<ol class="arabic">
<li><p class="first"><strong>Continuation tokens SHOULD be opaque.</strong></p>
<p>Plain text continuation tokens inappropriately expose implementation details
to the client, resulting in consumers building systems that manually
construct continuation tokens. Making backwards compatible changes to a
plain text continuation token format is extremely hard to manage.</p>
</li>
<li><p class="first"><strong>Continuation tokens SHOULD be versioned.</strong></p>
<p>The parameters and context needed to paginate an API call can evolve over
time. To future-proof these APIs, services SHOULD include some kind of
version identifier in their continuation tokens. Once the version identifier
of a token is recognized, a service will then know the appropriate operation
for decoding and returning the next response for a paginated request.</p>
</li>
<li><p class="first"><strong>Continuation tokens SHOULD expire after a period of time.</strong></p>
<p>Continuation tokens SHOULD expire after a short period of time (e.g., 24
hours is a reasonable default for many services). This allows services
to quickly phase out deprecated continuation token formats, and helps to set
the expectation that continuation tokens are ephemeral and MUST NOT be used
after extended periods of time. Services MUST reject a request with a client
error when a client uses an expired continuation token.</p>
</li>
<li><p class="first"><strong>Continuation tokens MUST be bound to a fixed set of filtering parameters.</strong></p>
<p>Services MUST reject a request that changes filtering input parameters while
paging through responses. Services MUST require clients to send the same
filtering request parameters used in the initial pagination request to all
subsequent pagination requests.</p>
<p><em class="dfn">Filtering parameters</em> are defined as parameters that remove certain
elements from appearing in the result set of a paginated API call. Filtering
parameters do not influence the presentation of results (e.g., the
designated <code class="docutils literal notranslate"><span class="pre">pageSize</span></code> input parameter partitions a result set into smaller
subsets but does not change the sum of the parts). Services MUST allow
clients to change presentation based parameters while paginating through a
result set.</p>
</li>
<li><p class="first"><strong>Continuation tokens MUST NOT influence authorization.</strong></p>
<p>A service MUST NOT evaluate authorization differently depending on the
presence, absence, or contents of a continuation token.</p>
</li>
</ol>
</div>
<div class="section" id="backward-compatibility">
<h3><a href="#backward-compatibility"><span class="section-number">8.5.4. </span>Backward compatibility</a></h3>
<p>Many tools use the <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait to expose additional functionality to
things like generated code. To support these use cases, the following changes
to the <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait are considered backward incompatible:</p>
<ol class="arabic simple">
<li>Removing the <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait.</li>
<li>Adding, removing, or changing the <code class="docutils literal notranslate"><span class="pre">inputToken</span></code>, <code class="docutils literal notranslate"><span class="pre">outputToken</span></code>, or
<code class="docutils literal notranslate"><span class="pre">items</span></code> members.</li>
<li>Removing or changing the <code class="docutils literal notranslate"><span class="pre">pageSize</span></code> member.</li>
</ol>
<p>The following changes are considered backward compatible:</p>
<ol class="arabic simple">
<li>Adding the <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait to an existing operation.</li>
<li>Adding the <code class="docutils literal notranslate"><span class="pre">pageSize</span></code> member to an existing <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait.</li>
</ol>
</div>
</div>
<div class="section" id="httpchecksumrequired-trait">
<span id="smithy-api-httpchecksumrequired-trait"></span><span id="id6"></span><h2><a href="#httpchecksumrequired-trait"><span class="section-number">8.6. </span><code class="docutils literal notranslate"><span class="pre">httpChecksumRequired</span></code> trait</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Indicates that an operation requires a checksum in its HTTP request. By
default, the checksum used for a service is a MD5 checksum passed in the
Content-MD5 header.</dd>
<dt>Trait selector</dt><dd><code class="docutils literal notranslate"><span class="pre">operation</span></code></dd>
<dt>Value type</dt><dd>Annotation trait.</dd>
<dt>See</dt><dd><span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc1864.html"><strong>RFC 1864</strong></a></dd>
</dl>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-7-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-7-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button></div><div aria-labelledby="tab-7-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-7-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@httpChecksumRequired</span><span class="w"></span>
<span class="kd">operation</span><span class="nc"> PutSomething</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">PutSomethingInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">PutSomethingOutput</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="httpchecksum-trait">
<span id="smithy-api-httpchecksum-trait"></span><span id="id7"></span><h2><a href="#httpchecksum-trait"><span class="section-number">8.7. </span><code class="docutils literal notranslate"><span class="pre">httpChecksum</span></code> trait</a></h2>
<dl class="docutils">
<dt>Summary</dt><dd>Indicates that an operation's HTTP request or response supports checksum
validation. At least one of request or response checksum properties MUST
be specified within the trait.</dd>
<dt>Trait selector</dt><dd><code class="docutils literal notranslate"><span class="pre">operation</span></code></dd>
<dt>Value type</dt><dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">httpChecksum</span></code> trait is a structure that contains the following members:</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>request</td>
<td><code class="docutils literal notranslate"><span class="pre">[</span></code> <a class="reference internal" href="#checksum-property"><span class="std std-ref">HttpChecksumProperty structure</span></a> <code class="docutils literal notranslate"><span class="pre">]</span></code></td>
<td>The <code class="docutils literal notranslate"><span class="pre">request</span></code> property defines a list of checksum validation
behavior for HTTP requests.</td>
</tr>
<tr class="row-odd"><td>response</td>
<td><code class="docutils literal notranslate"><span class="pre">[</span></code> <a class="reference internal" href="#checksum-property"><span class="std std-ref">HttpChecksumProperty structure</span></a> <code class="docutils literal notranslate"><span class="pre">]</span></code></td>
<td>The <code class="docutils literal notranslate"><span class="pre">response</span></code> property defines a list of checksum validation
behavior for HTTP responses.</td>
</tr>
</tbody>
</table>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-8-U21pdGh5" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-8-U21pdGh5" name="U21pdGh5" role="tab" tabindex="0">Smithy</button><button aria-controls="panel-8-SlNPTg==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-8-SlNPTg==" name="SlNPTg==" role="tab" tabindex="-1">JSON</button></div><div aria-labelledby="tab-8-U21pdGh5" class="sphinx-tabs-panel code-tab group-tab" id="panel-8-U21pdGh5" name="U21pdGh5" role="tabpanel" tabindex="0"><div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@httpChecksum</span>(<span class="w"></span>
<span class="w">    </span><span class="nl">request:</span><span class="w"> </span>[<span class="w"></span>
<span class="w">        </span>{<span class="w"> </span><span class="nl">algorithm:</span><span class="w"> </span><span class="s2">&quot;sha256&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">in:</span><span class="w"> </span><span class="s2">&quot;header&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">name:</span><span class="w"> </span><span class="s2">&quot;x-checksum-sha256&quot;</span>}<span class="p">,</span><span class="w"></span>
<span class="w">        </span>{<span class="w"> </span><span class="nl">algorithm:</span><span class="w"> </span><span class="s2">&quot;crc32&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">in:</span><span class="w"> </span><span class="s2">&quot;header&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">name:</span><span class="w"> </span><span class="s2">&quot;x-checksum-crc32&quot;</span>}<span class="w"></span>
<span class="w">    </span>]<span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">response:</span><span class="w"> </span>[<span class="w"></span>
<span class="w">        </span>{<span class="w"> </span><span class="nl">algorithm:</span><span class="w"> </span><span class="s2">&quot;sha256&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">in:</span><span class="w"> </span><span class="s2">&quot;header&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">name:</span><span class="w"> </span><span class="s2">&quot;x-checksum-sha256&quot;</span>}<span class="p">,</span><span class="w"></span>
<span class="w">        </span>{<span class="w"> </span><span class="nl">algorithm:</span><span class="w"> </span><span class="s2">&quot;crc32&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">in:</span><span class="w"> </span><span class="s2">&quot;header&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">name:</span><span class="w"> </span><span class="s2">&quot;x-checksum-crc32&quot;</span>}<span class="w"></span>
<span class="w">    </span>]<span class="w"></span>
)<span class="w"></span>
<span class="kd">operation</span><span class="nc"> PutSomething</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">input:</span><span class="w"> </span><span class="vc">PutSomethingInput</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">output:</span><span class="w"> </span><span class="vc">PutSomethingOutput</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-8-SlNPTg==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-8-SlNPTg==" name="SlNPTg==" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Example&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-06-27&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#PutSomething&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#PutSomethingInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#PutSomethingOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#httpChecksum&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;request&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span> <span class="nt">&quot;algorithm&quot;</span><span class="p">:</span> <span class="s2">&quot;sha256&quot;</span><span class="p">,</span> <span class="nt">&quot;in&quot;</span><span class="p">:</span> <span class="s2">&quot;header&quot;</span><span class="p">,</span> <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;x-checksum-sha256&quot;</span><span class="p">},</span>
                        <span class="p">{</span> <span class="nt">&quot;algorithm&quot;</span><span class="p">:</span> <span class="s2">&quot;crc32&quot;</span><span class="p">,</span> <span class="nt">&quot;in&quot;</span><span class="p">:</span> <span class="s2">&quot;header&quot;</span><span class="p">,</span> <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;x-checksum-crc32&quot;</span><span class="p">}</span>
                    <span class="p">],</span>
                    <span class="nt">&quot;response&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span> <span class="nt">&quot;algorithm&quot;</span><span class="p">:</span> <span class="s2">&quot;sha256&quot;</span><span class="p">,</span> <span class="nt">&quot;in&quot;</span><span class="p">:</span> <span class="s2">&quot;header&quot;</span><span class="p">,</span> <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;x-checksum-sha256&quot;</span><span class="p">},</span>
                        <span class="p">{</span> <span class="nt">&quot;algorithm&quot;</span><span class="p">:</span> <span class="s2">&quot;crc32&quot;</span><span class="p">,</span> <span class="nt">&quot;in&quot;</span><span class="p">:</span> <span class="s2">&quot;header&quot;</span><span class="p">,</span> <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;x-checksum-crc32&quot;</span><span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<div class="section" id="httpchecksumproperty-structure">
<span id="checksum-property"></span><h3><a href="#httpchecksumproperty-structure"><span class="section-number">8.7.1. </span>HttpChecksumProperty structure</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">HttpChecksumProperty</span></code> defines checksum validation behavior using the
following members:</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>algorithm</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first"><strong>Required</strong>. The algorithm string represents a checksum algorithm
supported for the HTTP request or response. A valid algorithm
should follow ABNF:</p>
<div class="highlight-abnf notranslate"><div class="highlight"><pre><span></span><span class="nc">algorithms</span> <span class="o">=</span> <span class="o">1*</span><span class="p">(</span><span class="nc">lower-alpha</span> <span class="o">/</span> <span class="k">DIGIT</span><span class="p">)</span>
<span class="nc">lower-alpha</span> <span class="o">=</span> <span class="l">%x61-7A</span>
</pre></div>
</div>
<p class="last">That is, it should be comprised only of digits and lowercase letters.</p>
</td>
</tr>
<tr class="row-odd"><td>in</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first"><strong>Required</strong>. The location where checksum can be supplied. Valid values
are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">header</span></code> - Indicates the checksum is placed in an HTTP header.</li>
<li><code class="docutils literal notranslate"><span class="pre">trailer</span></code> - Indicates the checksum is placed in the <a class="reference external" href="https://tools.ietf.org/html/rfc7230#section-4.1.2">chunked trailer part</a>
of the body.</li>
</ul>
<p>An algorithm MAY be supported at multiple locations. The first
supported <code class="docutils literal notranslate"><span class="pre">in</span></code> member value within the list of HttpChecksum property
takes precedence and SHOULD be used.</p>
<div class="last admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See <a class="reference internal" href="#httpchecksum-trait-behavior"><span class="std std-ref">HttpChecksum Behavior</span></a> for more details.</p>
</div>
</td>
</tr>
<tr class="row-even"><td>name</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first"><strong>Required</strong>. The name used as a header or trailer name for a checksum
type. Recommended ABNF for name is as follows:</p>
<div class="highlight-abnf notranslate"><div class="highlight"><pre><span></span><span class="nc">name</span> <span class="o">=</span> <span class="nc">lower-alpha</span> <span class="o">*</span><span class="p">([</span><span class="l">&quot;-&quot;</span><span class="p">](</span><span class="nc">lower-alpha</span> <span class="o">/</span> <span class="k">DIGIT</span><span class="p">))</span>
<span class="nc">lower-alpha</span> <span class="o">=</span> <span class="l">%x61-7A</span>
</pre></div>
</div>
<p>That is, it should start with a lowercase letter followed by any
number of lowercase letters, digits, or non-sequential hyphens.</p>
<p>A member with the <a class="reference internal" href="http-traits.html#httpheader-trait"><span class="std std-ref">httpHeader trait</span></a> or <a class="reference internal" href="http-traits.html#httpprefixheaders-trait"><span class="std std-ref">httpPrefixHeaders trait</span></a>
MAY conflict with a <code class="docutils literal notranslate"><span class="pre">httpChecksum</span></code> header name, allowing a checksum
to be supplied directly.</p>
<div class="last admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See <a class="reference internal" href="#httpchecksum-trait-header-conflict-behavior"><span class="std std-ref">client behavior</span></a>
for more details.</p>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="httpchecksum-behavior">
<span id="httpchecksum-trait-behavior"></span><h3><a href="#httpchecksum-behavior"><span class="section-number">8.7.2. </span>HttpChecksum Behavior</a></h3>
<p class="rubric">Client Behavior</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">httpChecksum</span></code> trait has a modeled <code class="docutils literal notranslate"><span class="pre">request</span></code> section for the HTTP
request, the client SHOULD compute the request payload checksum, using an
algorithm defined within the request section. The computed checksum SHOULD
be supplied at the first supported checksum location as per the order of
<a class="reference internal" href="#checksum-property"><span class="std std-ref">checksum properties</span></a> defined within the request
section.</p>
<p>If the location is <code class="docutils literal notranslate"><span class="pre">header</span></code>, the client MUST put the checksum into the
HTTP request headers. If the resolved location is <code class="docutils literal notranslate"><span class="pre">trailer</span></code>, the client MUST
put the checksum into the <a class="reference external" href="https://tools.ietf.org/html/rfc7230#section-4.1.2">chunked trailer part</a> of the body. The header or
trailer name to use with an algorithm location is defined by the <code class="docutils literal notranslate"><span class="pre">name</span></code>
member of the <a class="reference internal" href="#checksum-property"><span class="std std-ref">checksum property</span></a>.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">httpChecksum</span></code> trait has a modeled <code class="docutils literal notranslate"><span class="pre">response</span></code> section for the HTTP
response, the client MUST look for a supported checksum at all supported
locations as per the defined checksum properties. If a checksum is found, the
client MUST validate the received checksum value by computing the corresponding
checksum of the received payload.</p>
<p id="httpchecksum-trait-header-conflict-behavior">If the HTTP header corresponding to a checksum is set explicitly, the
implementation MUST use the explicitly set header and skip computing the
payload checksum.</p>
<p class="rubric">Service Behavior</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">httpChecksum</span></code> trait has a modeled <code class="docutils literal notranslate"><span class="pre">request</span></code> section for the HTTP
request, the service MUST validate the received checksum by computing
corresponding checksum of the request payload to ensure data integrity.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">httpChecksum</span></code> trait models a <code class="docutils literal notranslate"><span class="pre">response</span></code> section for the HTTP
response, the service MUST send at least one supported payload checksum at the
first supported location for the checksum algorithm.</p>
<div class="section" id="behavior-with-httpchecksumrequired">
<span id="checksum-trait-with-checksum-required"></span><h4><a href="#behavior-with-httpchecksumrequired"><span class="section-number">8.7.2.1. </span>Behavior with HttpChecksumRequired</a></h4>
<p>When both the <code class="docutils literal notranslate"><span class="pre">httpChecksum</span></code> trait with a modeled <code class="docutils literal notranslate"><span class="pre">request</span></code> section, and
the <a class="reference internal" href="#httpchecksumrequired-trait"><span class="std std-ref">httpChecksumRequired</span></a> trait are applied
on an operation, the client MUST prefer using a checksum algorithm modeled for
request in the <code class="docutils literal notranslate"><span class="pre">httpChecksum</span></code> trait over an MD5 digest, and place checksum
as per the client behavior defined in the
<a class="reference internal" href="#httpchecksum-trait-behavior"><span class="std std-ref">httpChecksum trait behavior</span></a> section.</p>
<p>The service MUST accept a checksum value defined in the <code class="docutils literal notranslate"><span class="pre">httpChecksum</span></code>
trait's request property to satisfy checksum validation requirements for
the operation's HTTP Request.</p>
</div>
</div>
</div>
</div>


                    
                    <section class="relations">
                        
                        <a href="auth-traits.html" title="previous chapter" class="previous-page clearfix hidden-xs">‚Üê <span class="section-number">7. </span>Authentication traits</a>
                        
                        <a href="resource-traits.html" title="next chapter" class="next-page clearfix"><span class="section-number">9. </span>Resource traits ‚Üí</a>
                    </section>
                    
                </article><aside id="right-column" class="side-column hidden-sm">
                    <div class="column-body">
                        <section class="sidebar">
                            
                            <section class="next-previous">
                                
                                <a href="auth-traits.html" title="previous chapter" class="previous-page clearfix hidden-xs">‚Üê Prev</a>
                                
                                <a href="resource-traits.html" title="next chapter" class="next-page clearfix">Next ‚Üí</a>
                            </section>
                            
                            <ul>
<li><a class="reference internal" href="#">8. Behavior traits</a><ul>
<li><a class="reference internal" href="#idempotencytoken-trait">8.1. <code class="docutils literal notranslate"><span class="pre">idempotencyToken</span></code> trait</a></li>
<li><a class="reference internal" href="#idempotent-trait">8.2. <code class="docutils literal notranslate"><span class="pre">idempotent</span></code> trait</a></li>
<li><a class="reference internal" href="#readonly-trait">8.3. <code class="docutils literal notranslate"><span class="pre">readonly</span></code> trait</a></li>
<li><a class="reference internal" href="#retryable-trait">8.4. <code class="docutils literal notranslate"><span class="pre">retryable</span></code> trait</a></li>
<li><a class="reference internal" href="#paginated-trait">8.5. <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait</a><ul>
<li><a class="reference internal" href="#pagination-behavior">8.5.1. Pagination Behavior</a></li>
<li><a class="reference internal" href="#client-behavior">8.5.2. Client behavior</a></li>
<li><a class="reference internal" href="#continuation-tokens">8.5.3. Continuation tokens</a></li>
<li><a class="reference internal" href="#backward-compatibility">8.5.4. Backward compatibility</a></li>
</ul>
</li>
<li><a class="reference internal" href="#httpchecksumrequired-trait">8.6. <code class="docutils literal notranslate"><span class="pre">httpChecksumRequired</span></code> trait</a></li>
<li><a class="reference internal" href="#httpchecksum-trait">8.7. <code class="docutils literal notranslate"><span class="pre">httpChecksum</span></code> trait</a><ul>
<li><a class="reference internal" href="#httpchecksumproperty-structure">8.7.1. HttpChecksumProperty structure</a></li>
<li><a class="reference internal" href="#httpchecksum-behavior">8.7.2. HttpChecksum Behavior</a><ul>
<li><a class="reference internal" href="#behavior-with-httpchecksumrequired">8.7.2.1. Behavior with HttpChecksumRequired</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

                        </section>
                    </div>
                </aside></div>
        </section>
        
    
<footer id="footer">
    <div class="width-wrapper">
        <div class="copyright">
            <p>¬©2021, Amazon Web Services, Inc or its affiliates. All rights reserved.</p>
        </div>
    </div>
</footer>
  </body>
</html>