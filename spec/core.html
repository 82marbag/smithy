
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="noindex">
    <title>Smithy core specification &#8212; Smithy 0.5.0 documentation</title><link rel="stylesheet" href="../_static/bootstrap-reboot.css" type="text/css" />

    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.2.10/segment.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.2.10/menu.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.2.10/tab.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom-tabs.css" type="text/css" />


    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sphinx_tabs/tabs.js"></script>
    <script type="text/javascript" src="../_static/sphinx_tabs/semantic-ui-2.2.10/tab.min.js"></script>
    <script type="text/javascript">
        function _scroll(subjectId) {
            var subjectElement = $(subjectId);
            var actualSubjectHeight = subjectElement.height();
            var startingPosition = subjectElement[0].getBoundingClientRect().top;
            return function() {
                var availableHeight = $(window).height() - startingPosition;
                // Subtract the scroll position to account for sticky movement.
                availableHeight += Math.min($(window).scrollTop(), 40);
                var cappedHeight = Math.min(actualSubjectHeight, availableHeight);
                if (subjectElement.css("height") !== cappedHeight) {
                    subjectElement.css("height", cappedHeight);
                }
            };
        }

        // Scroll and resize the the columns when scrolled.
        $(function() {
            var rightScroll = _scroll("#right-column > .column-body");
            var scrollFn = function() {
                rightScroll.call(this, arguments);
            };
            scrollFn();
            $(window).scroll(scrollFn);
            $(window).resize(scrollFn);
        });

        // Scroll spy to change highlighted navigation element.
        $(function() {
            var section = document.querySelectorAll(".section");
            var sections = {};
            var i = 0;
            Array.prototype.forEach.call(section, function(e) {
                sections[e.id] = e.offsetTop;
            });
            var scrollSpy = function() {
                var scrollPosition = document.documentElement.scrollTop || document.body.scrollTop;
                for (i in sections) {
                    if (sections[i] <= scrollPosition) {
                        $('#right-column .current').removeClass('current');
                        $("#right-column a[href='#" + i + "']").addClass('current');
                    }
                }
            };
            $(window).scroll(scrollSpy);
            scrollSpy();
        });
    </script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Smithy Language Specification" href="language-specification.html" />
    <link rel="prev" title="Specifications" href="index.html" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  </head><body>
    <header>
        <div class="header-flex width-wrapper">
            <div class="site-logo">
                <a href="../index.html">
                    <span class="logo-icon">⚒️</span><span class="logo-text">Smithy</span><span class="beta-text">beta</span>
                </a>
            </div>
            <ul id="page-navigation">
                <li class="site-page first"><a href="../quickstart.html">Quick Start</a></li>
                <li class="site-page"><a href="index.html">Specifications</a></li>
                <li class="site-page"><a href="../guides/index.html">Guides</a></li>
                <li class="site-page"><a href="https://github.com/awslabs/smithy">Code</a></li>
                <li class="site-search hidden-sm">
                    <form action="../search.html" method="get">
                        <input type="hidden" name="check_keywords" value="yes" />
                        <input type="hidden" name="area" value="default" />
                        <input class="search-input" autocomplete="off" type="search" name="q" placeholder="Search" />
                    </form>
                </li>
            </ul>
        </div>
    </header>

    <div style="margin: 1em; padding: 1em; background: #f8d7da; text-align: center;">
        You are viewing an old version of the documentation.
    </div>



        <section id="page-container">
            <div class="width-wrapper flex">
                <article id="document-body">

  <div class="section" id="smithy-core-specification">
<h1>Smithy core specification<a class="headerlink" href="#smithy-core-specification" title="Permalink to this headline">¶</a></h1>
<p><em>Smithy</em> is an interface definition language and set of tools that allows
developers to build RPC clients and servers in multiple languages. Smithy
models define a service as a collection of resources, operations, and shapes.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#status-of-this-specification" id="id79">Status of this specification</a></li>
<li><a class="reference internal" href="#requirements-notation" id="id80">Requirements notation</a></li>
<li><a class="reference internal" href="#smithy-models" id="id81">Smithy models</a><ul>
<li><a class="reference internal" href="#model-syntax" id="id82">Model syntax</a></li>
<li><a class="reference internal" href="#model-version" id="id83">Model version</a></li>
<li><a class="reference internal" href="#model-metadata" id="id84">Model metadata</a></li>
<li><a class="reference internal" href="#namespaces" id="id85">Namespaces</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shapes" id="id86">Shapes</a><ul>
<li><a class="reference internal" href="#simple-types" id="id87">Simple types</a></li>
<li><a class="reference internal" href="#aggregate-types" id="id88">Aggregate types</a></li>
<li><a class="reference internal" href="#service-types" id="id89">Service types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shape-id" id="id90">Shape ID</a><ul>
<li><a class="reference internal" href="#relative-shape-id-resolution" id="id91">Relative shape ID resolution</a></li>
<li><a class="reference internal" href="#shape-id-member-names" id="id92">Shape ID member names</a></li>
<li><a class="reference internal" href="#shape-names" id="id93">Shape names</a></li>
<li><a class="reference internal" href="#shape-id-conflicts" id="id94">Shape ID conflicts</a></li>
<li><a class="reference internal" href="#syntactic-shape-ids-in-the-idl" id="id95">Syntactic shape IDs in the IDL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#prelude-model" id="id96">Prelude model</a></li>
<li><a class="reference internal" href="#traits" id="id97">Traits</a><ul>
<li><a class="reference internal" href="#applying-traits-to-shapes" id="id98">Applying traits to shapes</a></li>
<li><a class="reference internal" href="#trait-values" id="id99">Trait values</a></li>
<li><a class="reference internal" href="#trait-conflict-resolution" id="id100">Trait conflict resolution</a></li>
<li><a class="reference internal" href="#trait-definitions" id="id101">Trait definitions</a></li>
<li><a class="reference internal" href="#scope-of-member-traits" id="id102">Scope of member traits</a></li>
<li><a class="reference internal" href="#type-refinement-traits" id="id103">Type refinement traits</a></li>
<li><a class="reference internal" href="#constraint-traits" id="id104">Constraint traits</a></li>
<li><a class="reference internal" href="#behavior-traits" id="id105">Behavior traits</a></li>
<li><a class="reference internal" href="#resource-traits" id="id106">Resource traits</a></li>
<li><a class="reference internal" href="#protocol-traits" id="id107">Protocol traits</a></li>
<li><a class="reference internal" href="#documentation-traits" id="id108">Documentation traits</a></li>
<li><a class="reference internal" href="#endpoint-traits" id="id109">Endpoint Traits</a></li>
</ul>
</li>
<li><a class="reference internal" href="#merging-models" id="id110">Merging models</a><ul>
<li><a class="reference internal" href="#merging-metadata" id="id111">Merging metadata</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="status-of-this-specification">
<h2>Status of this specification<a class="headerlink" href="#status-of-this-specification" title="Permalink to this headline">¶</a></h2>
<p>This specification is currently at version 0.5.0 and is subject to change.</p>
</div>
<div class="section" id="requirements-notation">
<h2>Requirements notation<a class="headerlink" href="#requirements-notation" title="Permalink to this headline">¶</a></h2>
<p>The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
&quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this
document are to be interpreted as described in [<span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2119.html"><strong>RFC 2119</strong></a>].</p>
<p>This specification makes use of the Augmented Backus-Naur Form (ABNF)
[<span class="target" id="index-1"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc5234.html"><strong>RFC 5234</strong></a>] notation, including the <em>core rules</em> defined in Appendix B
of that document.</p>
</div>
<div class="section" id="smithy-models">
<h2>Smithy models<a class="headerlink" href="#smithy-models" title="Permalink to this headline">¶</a></h2>
<p>A Smithy model is made up of shapes, traits, and metadata that define the
services, resources, operations, and data structures used in an API. Smithy
models can be used to drive code generation for client and server frameworks,
documentation generation, and various other forms of static analysis.</p>
<div class="section" id="model-syntax">
<h3>Model syntax<a class="headerlink" href="#model-syntax" title="Permalink to this headline">¶</a></h3>
<p>Smithy models are defined using either the <a class="reference internal" href="language-specification.html#smithy-language-specification"><span class="std std-ref">Smithy IDL</span></a>
or <a class="reference internal" href="language-specification.html#json-ast"><span class="std std-ref">JSON</span></a>. The Smithy IDL is the preferred format for
authoring and reading models, while the JSON format is preferred for
tooling and integrations. Unless declared otherwise, specification examples
are written using the IDL syntax. Complementary JSON examples are provided
alongside Smithy IDL examples where appropriate.</p>
</div>
<div class="section" id="model-version">
<span id="smithy-version"></span><h3>Model version<a class="headerlink" href="#model-version" title="Permalink to this headline">¶</a></h3>
<p>The Smithy specification is versioned using a <a class="reference external" href="https://semver.org/">semver</a>
<code class="docutils literal notranslate"><span class="pre">major</span></code> . <code class="docutils literal notranslate"><span class="pre">minor</span></code> . <code class="docutils literal notranslate"><span class="pre">patch</span></code> version string. The version string does not
support semver extensions. The version of a Smithy model is defined using a
<a class="reference internal" href="language-specification.html#version-statement"><span class="std std-ref">version statement</span></a> in the Smithy IDL. The following
example sets the version to &quot;0.5.0&quot;:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="nc"> &quot;0.5.0&quot;</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>When no version number is specified in the IDL, an implementation will assume
that the model is compatible. Because this can lead to unexpected parsing
errors, models SHOULD always include a version. The JSON AST model requires that
a version is specified in a top-level &quot;smithy&quot; key-value pair.</p>
<div class="section" id="version-compatibility">
<h4>Version compatibility<a class="headerlink" href="#version-compatibility" title="Permalink to this headline">¶</a></h4>
<p>A single version statement can appear in a model file. Different versions MAY
be encountered when merging multiple model files together. Multiple versions
are supported if and only if all of the version statements are supported by
the tool loading the models.</p>
</div>
</div>
<div class="section" id="model-metadata">
<span id="metadata"></span><h3>Model metadata<a class="headerlink" href="#model-metadata" title="Permalink to this headline">¶</a></h3>
<p><em class="dfn">Metadata</em> is a schema-less extensibility mechanism that can be applied
to a model using a <a class="reference internal" href="language-specification.html#metadata-statement"><span class="std std-ref">metadata statement</span></a>. Metadata
statements start with <code class="docutils literal notranslate"><span class="pre">metadata</span></code>, followed by the key to set, followed by
<code class="docutils literal notranslate"><span class="pre">=</span></code>, followed by the JSON-like <a class="reference internal" href="language-specification.html#node-values"><span class="std std-ref">node value</span></a> to assign.
Metadata statements MUST appear before any namespace statements or shapes
are defined.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> foo </span><span class="nd">=</span> <span class="s2">&quot;baz&quot;</span>
<span class="kd">metadata</span><span class="nc"> hello </span><span class="nd">=</span> <span class="s2">&quot;bar&quot;</span>
<span class="kd">metadata</span><span class="nc"> &quot;lorem&quot; </span><span class="nd">=</span> {
    <span class="nl">ipsum:</span> [<span class="s2">&quot;dolor&quot;</span>]
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span>
        <span class="nt">&quot;hello&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
        <span class="nt">&quot;lorem&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;ipsum&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;dolor&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Top-level metadata key-value pair conflicts are resolved by
<a class="reference internal" href="#merging-metadata"><span class="std std-ref">merging metadata</span></a></p>
</div>
<div class="section" id="namespaces">
<span id="id1"></span><h3>Namespaces<a class="headerlink" href="#namespaces" title="Permalink to this headline">¶</a></h3>
<p>Shapes are defined inside a <em class="dfn">namespace</em>. A namespace is mechanism for
logically grouping shapes in a way that makes them reusable alongside other
models without naming conflicts.</p>
<p>A <a class="reference internal" href="language-specification.html#namespace-statement"><span class="std std-ref">namespace statement</span></a> is used to change the
<em>current namespace</em>. A namespace MUST be defined before a shape can be
defined. Only a single namespace can appear in an IDL model file, but any
number of namespaces can appear in a JSON AST model file.</p>
<p>The following example defines a string shape named <code class="docutils literal notranslate"><span class="pre">MyString</span></code> in the
<code class="docutils literal notranslate"><span class="pre">smithy.example</span></code> namespace:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="kd">string</span><span class="nc"> MyString</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="shapes">
<span id="id2"></span><h2>Shapes<a class="headerlink" href="#shapes" title="Permalink to this headline">¶</a></h2>
<p><em>Shapes</em> are instances of <em>types</em> that describe the structure of an API.
<a class="reference internal" href="#traits"><span class="std std-ref">Traits</span></a> can be applied to shapes to describe custom facets
of the shape. Shape definitions in the IDL always start with the type name
of the shape followed by the name of the shape.</p>
<div class="section" id="simple-types">
<span id="id3"></span><h3>Simple types<a class="headerlink" href="#simple-types" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#simple-types"><span class="std std-ref">Simple types</span></a> are types that do not contain nested types
or shape references.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>blob</td>
<td>Uninterpreted binary data</td>
</tr>
<tr class="row-odd"><td>boolean</td>
<td>Boolean value type</td>
</tr>
<tr class="row-even"><td>string</td>
<td>UTF-8 encoded string</td>
</tr>
<tr class="row-odd"><td>byte</td>
<td>8-bit signed integer ranging from -128 to 127 (inclusive)</td>
</tr>
<tr class="row-even"><td>short</td>
<td>16-bit signed integer ranging from -32,768 to 32,767 (inclusive)</td>
</tr>
<tr class="row-odd"><td>integer</td>
<td>32-bit signed integer ranging from -2^31 to (2^31)-1 (inclusive)</td>
</tr>
<tr class="row-even"><td>long</td>
<td>64-bit signed integer ranging from -2^63 to (2^63)-1 (inclusive)</td>
</tr>
<tr class="row-odd"><td>float</td>
<td>Single precision IEEE-754 floating point number</td>
</tr>
<tr class="row-even"><td>double</td>
<td>Double precision IEEE-754 floating point number</td>
</tr>
<tr class="row-odd"><td>bigInteger</td>
<td>Arbitrarily large signed integer</td>
</tr>
<tr class="row-even"><td>bigDecimal</td>
<td>Arbitrary precision signed decimal number</td>
</tr>
<tr class="row-odd"><td>timestamp</td>
<td>Represents an instant in time with no UTC offset or timezone. The
serialization of a timestamp is determined by a
<a class="reference internal" href="#protocols-trait"><span class="std std-ref">protocol</span></a>.</td>
</tr>
<tr class="row-even"><td>document</td>
<td><strong>Unstable</strong> Represents an untyped JSON-like value that can take on
one of the following types: null, boolean, string, byte, short,
integer, long, float, double, an array of these types, or a map of
these types where the key is string.</td>
</tr>
</tbody>
</table>
<p>The <a class="reference internal" href="language-specification.html#grammar-token-simple_shape"><code class="xref std std-token docutils literal notranslate"><span class="pre">simple_shape</span></code></a> statement is used to define a simple shape. Simple
shapes are defined by a type, followed by a shape name, followed by a
new line.</p>
<p>The following example defines a shape for each simple type in the
<code class="docutils literal notranslate"><span class="pre">smithy.example</span></code> namespace:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="kd">blob</span><span class="nc"> Blob</span>
<span class="kd">boolean</span><span class="nc"> Boolean</span>
<span class="kd">string</span><span class="nc"> String</span>
<span class="kd">byte</span><span class="nc"> Byte</span>
<span class="kd">short</span><span class="nc"> Short</span>
<span class="kd">integer</span><span class="nc"> Integer</span>
<span class="kd">long</span><span class="nc"> Long</span>
<span class="kd">float</span><span class="nc"> Float</span>
<span class="kd">double</span><span class="nc"> Double</span>
<span class="kd">bigInteger</span><span class="nc"> BigInteger</span>
<span class="kd">bigDecimal</span><span class="nc"> BigDecimal</span>
<span class="kd">timestamp</span><span class="nc"> Timestamp</span>
<span class="kd">document</span><span class="nc"> Document</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Blob&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;blob&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Boolean&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#String&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Byte&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;byte&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Short&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Integer&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Long&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Float&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;float&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Double&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#BigInteger&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bigInteger&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#BigDecimal&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bigDecimal&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Timestamp&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;timestamp&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Document&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The <a class="reference internal" href="#prelude"><span class="std std-ref">prelude model</span></a> contains shapes for every simple type.
These shapes can be referenced using a relative shape ID
(for example, <code class="docutils literal notranslate"><span class="pre">String</span></code>) or using an absolute shape ID
(for example, <code class="docutils literal notranslate"><span class="pre">smithy.api#String</span></code>).</p>
</div>
<div class="section" id="timestamp-serialization-format">
<span id="id4"></span><h4>Timestamp serialization format<a class="headerlink" href="#timestamp-serialization-format" title="Permalink to this headline">¶</a></h4>
<p>By default, the serialization format of a timestamp is implicitly determined by
the <a class="reference internal" href="#protocols-trait"><span class="std std-ref">protocol</span></a> of a service; however, the serialization
format can be explicitly configured to override the default format used by the
protocol by applying the <a class="reference internal" href="#timestampformat-trait"><span class="std std-ref">timestampFormat trait</span></a> to a timestamp
shape or a member that targets a timestamp.</p>
<p>The following steps are taken to determine the serialization format of a
timestamp:</p>
<ol class="arabic simple">
<li>Use the <code class="docutils literal notranslate"><span class="pre">timestampFormat</span></code> trait of the <a class="reference internal" href="#member"><span class="std std-ref">member</span></a> reference if
present.</li>
<li>Use the <code class="docutils literal notranslate"><span class="pre">timestampFormat</span></code> trait of the shape if present.</li>
<li>Use the format required by the protocol.</li>
</ol>
<p>The timestamp shape is an abstraction of time; the serialization format of a
timestamp as it is sent over the wire, whether determined by the protocol or by
the <code class="docutils literal notranslate"><span class="pre">timestampFormat</span></code> trait, SHOULD NOT have any effect on the types exposed
by tooling to represent a timestamp.</p>
</div>
<div class="section" id="document-types">
<span id="document-type"></span><h4>Document types<a class="headerlink" href="#document-types" title="Permalink to this headline">¶</a></h4>
<p>A document type represents an untyped JSON-like value that can take on one of
the following types: null, boolean, string, byte, short, integer, long, float,
double, an array of these types, or a map of these types where the key is a
string.</p>
<p>Not all protocols support document types, and the serialization format of a
document type is protocol-specific. All JSON protocols SHOULD support document
types and they SHOULD serialize document types inline as normal JSON values.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Document types are currently considered unstable. They are not generally
supported by all protocols or tooling, and their design MAY change and
evolve before a stable release of Smithy.</p>
</div>
</div>
</div>
<div class="section" id="aggregate-types">
<span id="id5"></span><h3>Aggregate types<a class="headerlink" href="#aggregate-types" title="Permalink to this headline">¶</a></h3>
<p>Aggregate types are types that are composed of other types. Aggregate shapes
reference other shapes using <a class="reference internal" href="#member"><span class="std std-ref">members</span></a>.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#list"><span class="std std-ref">list</span></a></td>
<td>homogeneous collection of values</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#set"><span class="std std-ref">set</span></a></td>
<td>Unordered collection of unique homogeneous values</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#map"><span class="std std-ref">map</span></a></td>
<td>Map data structure that maps string keys to homogeneous values</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#structure"><span class="std std-ref">structure</span></a></td>
<td>Fixed set of named heterogeneous members</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#union"><span class="std std-ref">union</span></a></td>
<td>Tagged union data structure that can take on one of several
different, but fixed, types</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#member"><span class="std std-ref">member</span></a></td>
<td>Defined in aggregate shapes to reference other shapes</td>
</tr>
</tbody>
</table>
<div class="section" id="list">
<span id="id6"></span><h4>list<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h4>
<p>The <em class="dfn">list</em> type represents a homogeneous collection of values. A list is
defined using a <a class="reference internal" href="language-specification.html#grammar-token-list_statement"><code class="xref std std-token docutils literal notranslate"><span class="pre">list_statement</span></code></a>. A list statement consists of the
shape named followed by an object with a single key-value pair of &quot;member&quot;
that defines the <a class="reference internal" href="#member"><span class="std std-ref">member</span></a> of the list.</p>
<p>The following example defines a list with a string member from the
<a class="reference internal" href="#prelude"><span class="std std-ref">prelude</span></a>:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">list</span><span class="nc"> MyList</span> {
    <span class="nl">member:</span> <span class="vc">String</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Traits can be applied to the list shape and its member:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@length</span>(<span class="nl">min:</span> <span class="m">3</span>, <span class="nl">max:</span> <span class="m">10</span>)
<span class="kd">list</span><span class="nc"> MyList</span> {
    <span class="nd">@length</span>(<span class="nl">min:</span> <span class="m">1</span>, <span class="nl">max:</span> <span class="m">100</span>)
    <span class="nl">member:</span> <span class="vc">String</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;smithy.api#length&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mi">100</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#length&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                    <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mi">10</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Traits can be applied to shapes and members outside of their
definition using an <code class="docutils literal notranslate"><span class="pre">apply</span></code> statement:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">apply</span><span class="nc"> MyList</span> <span class="nd">@documentation</span>(<span class="s2">&quot;Long documentation string...&quot;</span>)
<span class="kd">apply</span><span class="nc"> MyList$member</span> <span class="nd">@documentation</span>(<span class="s2">&quot;Long documentation string...&quot;</span>)
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Long documentation string...&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyList$member&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Long documentation string...&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="set">
<span id="id7"></span><h4>set<a class="headerlink" href="#set" title="Permalink to this headline">¶</a></h4>
<p>The <em class="dfn">set</em> type represents an unordered collection of unique homogeneous
values. A set is defined using a <a class="reference internal" href="language-specification.html#grammar-token-set_statement"><code class="xref std std-token docutils literal notranslate"><span class="pre">set_statement</span></code></a> that consists of the
shape named followed by an object with a single key-value pair of &quot;member&quot;
that defines the <a class="reference internal" href="#member"><span class="std std-ref">member</span></a> of the set.</p>
<p>The following example defines a set of strings:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">set</span><span class="nc"> StringSet</span> {
    <span class="nl">member:</span> <span class="vc">String</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#StringSet&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Traits can be applied to the set shape and its members:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@deprecated</span>
<span class="kd">set</span><span class="nc"> StringSet</span> {
    <span class="nd">@sensitive</span>
    <span class="nl">member:</span> <span class="vc">String</span>
}

<span class="c">// Apply additional traits to the set member.</span>
<span class="kd">apply</span><span class="nc"> StringSet$member</span> <span class="nd">@documentation</span>(<span class="s2">&quot;text&quot;</span>)
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#StringSet&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#deprecated&quot;</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#StringSet$member&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Not all languages support set data structures with non-scalar values.
Such languages SHOULD represent sets as a custom set data structure that
can interpret value hash codes and equality. Alternatively, clients MAY
store the values of a set data structure in a list and rely on the service
to ensure uniqueness.</p>
</div>
</div>
<div class="section" id="map">
<span id="id8"></span><h4>map<a class="headerlink" href="#map" title="Permalink to this headline">¶</a></h4>
<p>The <em class="dfn">map</em> type represents a map data structure that maps string keys to
homogeneous values. A map cannot contain duplicate keys. A map is defined using
a <a class="reference internal" href="language-specification.html#grammar-token-map_statement"><code class="xref std std-token docutils literal notranslate"><span class="pre">map_statement</span></code></a>. The <code class="docutils literal notranslate"><span class="pre">key</span></code> member of a map MUST target a <code class="docutils literal notranslate"><span class="pre">string</span></code>
shape.</p>
<p>The following example defines a map of strings to integers:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">map</span><span class="nc"> IntegerMap</span> {
    <span class="nl">key:</span> <span class="vc">String</span>,
    <span class="nl">value:</span> <span class="vc">Integer</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#IntegerMap&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Traits can be applied to the map shape and its members:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@length</span>(<span class="nl">min:</span> <span class="m">0</span>, <span class="nl">max:</span> <span class="m">100</span>)
<span class="kd">map</span><span class="nc"> IntegerMap</span> {
    <span class="nd">@length</span>(<span class="nl">min:</span> <span class="m">1</span>, <span class="nl">max:</span> <span class="m">10</span>)
    <span class="nl">key:</span> <span class="vc">String</span>,

    <span class="nd">@sensitive</span>
    <span class="nl">value:</span> <span class="vc">Integer</span>
}

<span class="c">// Apply more traits to the key and value members.</span>
<span class="kd">apply</span><span class="nc"> IntegerMap$key</span> <span class="nd">@documentation</span>(<span class="s2">&quot;Key documentation&quot;</span>)
<span class="kd">apply</span><span class="nc"> IntegerMap$value</span> <span class="nd">@documentation</span>(<span class="s2">&quot;Value documentation&quot;</span>)
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#IntegerMap&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;smithy.api#length&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mi">10</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;smithy.api#sensitive&quot;</span><span class="p">:</span> <span class="kc">true</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#length&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mi">100</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#IntegerMap$key&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Key documentation&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#IntegerMap$value&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Value documentation&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="structure">
<span id="id9"></span><h4>structure<a class="headerlink" href="#structure" title="Permalink to this headline">¶</a></h4>
<p>The <em class="dfn">structure</em> type represents a fixed set of named heterogeneous members.
A member name maps to exactly one structure <a class="reference internal" href="#member"><span class="std std-ref">member</span></a> definition.</p>
<p>A structure is defined using a <a class="reference internal" href="language-specification.html#grammar-token-structure_statement"><code class="xref std std-token docutils literal notranslate"><span class="pre">structure_statement</span></code></a>. A structure
statement is a map of structure <a class="reference internal" href="#member"><span class="std std-ref">member</span></a> names to the shape targeted by
the member. Any number of inline traits can precede each member.</p>
<p>The following example defines a structure with two members:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">structure</span><span class="nc"> MyStructure</span> {
    <span class="nl">foo:</span> <span class="vc">String</span>,
    <span class="nl">baz:</span> <span class="vc">Integer</span>,
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyStructure&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;baz&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Integer&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Traits can be applied to members inside of the structure or externally
using the <code class="docutils literal notranslate"><span class="pre">apply</span></code> statement:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">structure</span><span class="nc"> MyStructure</span> {
    <span class="nd">@required</span>
    <span class="nl">foo:</span> <span class="vc">String</span>,

    <span class="nd">@deprecated</span>
    <span class="nl">baz:</span> <span class="vc">Integer</span>,
}

<span class="kd">apply</span><span class="nc"> MyStructure$foo</span> <span class="nd">@documentation</span>(<span class="s2">&quot;Documentation content...&quot;</span>)
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyStructure&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="nt">&quot;baz&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Integer&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#deprecated&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyStructure$foo&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Documentation content...&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="union">
<span id="id10"></span><h4>union<a class="headerlink" href="#union" title="Permalink to this headline">¶</a></h4>
<p>The union type represents a <a class="reference external" href="https://en.wikipedia.org/wiki/Tagged_union">tagged union data structure</a> that can take
on several different, but fixed, types. Only one type can be used at any
one time.</p>
<p>A union is defined using a <a class="reference internal" href="language-specification.html#grammar-token-union_statement"><code class="xref std std-token docutils literal notranslate"><span class="pre">union_statement</span></code></a>. Union shapes take the
same form as structure shapes.</p>
<p>The following example defines a union shape with several members:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">union</span><span class="nc"> MyUnion</span> {
    <span class="nl">i32:</span> <span class="vc">Integer</span>,
    <span class="nl">stringA:</span> <span class="vc">String</span>,
    <span class="nd">@sensitive</span> <span class="nl">stringB:</span> <span class="vc">String</span>,
}

<span class="c">// Apply additional traits to the member named &quot;i32&quot;.</span>
<span class="kd">apply</span><span class="nc"> MyUnion$i32</span> <span class="nd">@documentation</span>(<span class="s2">&quot;text&quot;</span>)
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyUnion&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;i32&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Integer&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;stringA&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;stringB&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#sensitive&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyUnion$i32&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="member">
<span id="id11"></span><h4>member<a class="headerlink" href="#member" title="Permalink to this headline">¶</a></h4>
<p><em class="dfn">Members</em> are defined in <a class="reference internal" href="#aggregate-types"><span class="std std-ref">aggregate types</span></a> to
reference other shapes using a <a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a>. A member MUST NOT
target an <code class="docutils literal notranslate"><span class="pre">operation</span></code>, <code class="docutils literal notranslate"><span class="pre">resource</span></code>, <code class="docutils literal notranslate"><span class="pre">service</span></code>, <code class="docutils literal notranslate"><span class="pre">member</span></code>, or
<a class="reference internal" href="#trait-definition"><span class="std std-ref">trait definition</span></a>.</p>
<p>The following example defines a list shape. The member of the list is a
member shape with a shape ID of <code class="docutils literal notranslate"><span class="pre">smithy.example#MyList$member</span></code>. The member
targets the <code class="docutils literal notranslate"><span class="pre">MyString</span></code> shape in the same namespace.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="kd">list</span><span class="nc"> MyList</span> {
    <span class="nl">member:</span> <span class="vc">MyString</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#MyString&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Traits can be attached to members before the member definition:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">list</span><span class="nc"> MyList</span> {
    <span class="nd">@sensitive</span>
    <span class="nl">member:</span> <span class="vc">MyString</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#MyString&quot;</span><span class="p">,</span>
                <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;smithy.api#sensitive&quot;</span><span class="p">:</span> <span class="kc">true</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Traits can be applied to member definitions using the <code class="docutils literal notranslate"><span class="pre">apply</span></code> statement
followed by the targeted shape ID followed by the trait value. Traits are
applied to shapes outside of their definition in the JSON AST using the
&quot;traits&quot; key-value pair of a namespace.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">apply</span><span class="nc"> MyList$member</span> <span class="nd">@documentation</span>(<span class="s2">&quot;Hello&quot;</span>)
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyList$member&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>The shape ID of a member consists of the aggregate shape name followed by
&quot;$&quot; followed by the member name. The member name for each shape is defined
in <a class="reference internal" href="#shape-id-member-names"><span class="std std-ref">Shape ID member names</span></a>.</p>
<div class="section" id="default-values">
<span id="id12"></span><h5>Default values<a class="headerlink" href="#default-values" title="Permalink to this headline">¶</a></h5>
<p>Shapes are used to represent messages that can be sent on the wire and data
structures that are generated in various programming languages. The values
provided for <a class="reference internal" href="#member"><span class="std std-ref">members</span></a> of <a class="reference internal" href="#aggregate-types"><span class="std std-ref">aggregate shapes</span></a>
are either always present and set to a default value when necessary or
<em>boxed</em>, meaning a value is optionally present with no default value.</p>
<ul class="simple">
<li>The default value of a <code class="docutils literal notranslate"><span class="pre">byte</span></code>, <code class="docutils literal notranslate"><span class="pre">short</span></code>, <code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>,
<code class="docutils literal notranslate"><span class="pre">float</span></code>, and <code class="docutils literal notranslate"><span class="pre">double</span></code> shape that is not boxed is zero.</li>
<li>The default value of a <code class="docutils literal notranslate"><span class="pre">boolean</span></code> shape that is not boxed is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</li>
<li>All other shapes are always considered boxed and have no default value.</li>
</ul>
<p>Members are considered boxed if and only if the member is marked with the
<a class="reference internal" href="#box-trait"><span class="std std-ref">box trait</span></a> or the shape targeted by the member is marked
with the box trait. Members that target strings, timestamps, and
aggregate shapes are always considered boxed and have no default values.</p>
</div>
<div class="section" id="recursive-shape-definitions">
<h5>Recursive shape definitions<a class="headerlink" href="#recursive-shape-definitions" title="Permalink to this headline">¶</a></h5>
<p>Smithy allows for recursive shape definitions with the following constraint:
the member of a list, set, or map cannot directly or transitively target its
containing shape unless one or more members in the path from the container
back to itself targets a structure or union shape. This ensures that shapes
that are typically impossible to define in various programming languages are
not defined in Smithy models (for example, you can't define a recursive list
in Java <code class="docutils literal notranslate"><span class="pre">List&lt;List&lt;List....</span></code>).</p>
<p>The following shape definition is invalid:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">list</span><span class="nc"> RecursiveList</span> {
    <span class="nl">member:</span> <span class="vc">RecursiveList</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#RecursiveList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#RecursiveList&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>The following shape definition is valid:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">list</span><span class="nc"> ValidList</span> {
    <span class="nl">member:</span> <span class="vc">IntermediateStructure</span>
}

<span class="kd">structure</span><span class="nc"> IntermediateStructure</span> {
    <span class="nl">foo:</span> <span class="vc">ValidList</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#ValidList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#IntermediateStructure&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#IntermediateStructure&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ValidList&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="service-types">
<span id="id13"></span><h3>Service types<a class="headerlink" href="#service-types" title="Permalink to this headline">¶</a></h3>
<p><em>Service types</em> are types that form services, resources, and operations.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#service"><span class="std std-ref">service</span></a></td>
<td>Entry point of an API that aggregates resources and operations together</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#operation"><span class="std std-ref">operation</span></a></td>
<td>Represents the input, output and possible errors of an API operation</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#resource"><span class="std std-ref">resource</span></a></td>
<td>Entity with an identity that has a set of operations</td>
</tr>
</tbody>
</table>
<div class="section" id="service">
<span id="id14"></span><h4>Service<a class="headerlink" href="#service" title="Permalink to this headline">¶</a></h4>
<p>A <em class="dfn">service</em> is the entry point of an API that aggregates resources and
operations together. The <a class="reference internal" href="#resource"><span class="std std-ref">resources</span></a> and
<a class="reference internal" href="#operation"><span class="std std-ref">operations</span></a> of an API are bound within the closure of a
service.</p>
<p>A service shape is defined using a <a class="reference internal" href="language-specification.html#grammar-token-service_statement"><code class="xref std std-token docutils literal notranslate"><span class="pre">service_statement</span></code></a> and supports
the following properties:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>version</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><strong>Required</strong>. Defines the version of the service. The version can be
provided in any format (e.g., <code class="docutils literal notranslate"><span class="pre">2017-02-11</span></code>, <code class="docutils literal notranslate"><span class="pre">2.0</span></code>, etc).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#service-operations"><span class="std std-ref">operations</span></a></td>
<td>[<a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a>]</td>
<td>Binds a list of operations to the service. Each element in the list is
a shape ID that MUST target an operation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#service-resources"><span class="std std-ref">resources</span></a></td>
<td>[<a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a>]</td>
<td>Binds a list of resources to the service. Each element in the list is
a shape ID that MUST target a resource.</td>
</tr>
</tbody>
</table>
<div class="section" id="service-operations">
<span id="id15"></span><h5>Service operations<a class="headerlink" href="#service-operations" title="Permalink to this headline">¶</a></h5>
<p><a class="reference internal" href="#operation"><span class="std std-ref">Operation</span></a> shapes can be bound to a service by adding the
shape ID of an operation to the <code class="docutils literal notranslate"><span class="pre">operations</span></code> property of a service.
Operations bound directly to a service are typically RPC-style operations
that do not fit within a resource hierarchy.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">service</span><span class="nc"> MyService</span> {
    <span class="nl">version:</span> <span class="s2">&quot;2017-02-11&quot;</span>,
    <span class="nl">operations:</span> [<span class="vc">GetServerTime</span>],
}

<span class="nd">@readonly</span>
<span class="kd">operation</span><span class="nc"> GetServerTime</span> {
    <span class="nl">output:</span> <span class="vc">GetServerTimeOutput</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyService&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetServerTime&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetServerTime&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetServerTimeOutput&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Validation</strong></p>
<ol class="arabic simple">
<li>An operation MUST NOT be bound to multiple shapes within the closure of a
service.</li>
<li>Every operation shape contained within the entire closure of a service MUST
have a case-insensitively unique shape name, regardless of their namespaces.</li>
</ol>
</div>
<div class="section" id="service-resources">
<span id="id16"></span><h5>Service resources<a class="headerlink" href="#service-resources" title="Permalink to this headline">¶</a></h5>
<p><a class="reference internal" href="#resource"><span class="std std-ref">Resource</span></a> shapes can be bound to a service by adding the
shape ID of a resource to the <code class="docutils literal notranslate"><span class="pre">resources</span></code> property of a service.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">service</span><span class="nc"> MyService</span> {
    <span class="nl">version:</span> <span class="s2">&quot;2017-02-11&quot;</span>,
    <span class="nl">resources:</span> [<span class="vc">MyResource</span>],
}

<span class="kd">resource</span><span class="nc"> MyResource</span> {}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyService&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#MyResource&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyResource&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Validation</strong></p>
<ol class="arabic simple">
<li>A resource MUST NOT be bound to multiple shapes within the closure of a
service.</li>
<li>Every resource shape contained within the entire closure of a service MUST
have a case-insensitively unique shape name, regardless of their
namespaces.</li>
</ol>
</div>
</div>
<div class="section" id="operation">
<span id="id17"></span><h4>Operation<a class="headerlink" href="#operation" title="Permalink to this headline">¶</a></h4>
<p>The <em class="dfn">operation</em> type represents the input, output, and possible errors of
an API operation. Operation shapes are bound to <a class="reference internal" href="#resource"><span class="std std-ref">resource</span></a>
shapes and <a class="reference internal" href="#service"><span class="std std-ref">service</span></a> shapes. Operation shapes are defined using
the <a class="reference internal" href="language-specification.html#grammar-token-operation_statement"><code class="xref std std-token docutils literal notranslate"><span class="pre">operation_statement</span></code></a>.</p>
<p>An operation is an object that supports the following key-value pairs:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#operation-input"><span class="std std-ref">input</span></a></td>
<td>The optional input structure of the operation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#operation-output"><span class="std std-ref">output</span></a></td>
<td>The optional output structure of the operation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#operation-errors"><span class="std std-ref">errors</span></a></td>
<td>The optional list of errors the operation can return.</td>
</tr>
</tbody>
</table>
<p>The following example defines an operation shape that accepts an input
structure named <code class="docutils literal notranslate"><span class="pre">Input</span></code>, returns an output structure named <code class="docutils literal notranslate"><span class="pre">Output</span></code>, and
can potentially return the <code class="docutils literal notranslate"><span class="pre">NotFound</span></code> or <code class="docutils literal notranslate"><span class="pre">BadRequest</span></code>
<a class="reference internal" href="#error-trait"><span class="std std-ref">error structures</span></a>.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">operation</span><span class="nc"> MyOperation</span> {
    <span class="nl">input:</span> <span class="vc">Input</span>,
    <span class="nl">output:</span> <span class="vc">Output</span>,
    <span class="nl">errors:</span> [<span class="vc">NotFound</span>, <span class="vc">BadRequest</span>]
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyOperation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Input&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Output&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;errors&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#NotFound&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#BadRequest&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="operation-input">
<span id="id18"></span><h5>Operation input<a class="headerlink" href="#operation-input" title="Permalink to this headline">¶</a></h5>
<p>The input of an operation is an optional shape ID that MUST target a
structure shape. An operation is not required to accept input.</p>
<p>The following example defines an operation that accepts an input structure
named <code class="docutils literal notranslate"><span class="pre">Input</span></code>:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">operation</span><span class="nc"> MyOperation</span> {
    <span class="nl">input:</span> <span class="vc">Input</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyOperation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Input&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="operation-output">
<span id="id19"></span><h5>Operation output<a class="headerlink" href="#operation-output" title="Permalink to this headline">¶</a></h5>
<p>The output of an operation is an optional shape ID that MUST target a
structure shape. An operation is not required to return output.</p>
<p>The following example defines an operation that returns an output
structure named <code class="docutils literal notranslate"><span class="pre">Output</span></code>:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">operation</span><span class="nc"> MyOperation</span> {
    <span class="nl">output:</span> <span class="vc">Output</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyOperation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Output&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="operation-errors">
<span id="id20"></span><h5>Operation errors<a class="headerlink" href="#operation-errors" title="Permalink to this headline">¶</a></h5>
<p>The errors of an operation is an optional array of shape IDs that MUST
target structure shapes that are marked with the <a class="reference internal" href="#error-trait"><span class="std std-ref">error trait</span></a>. Errors
defined on an operation are errors that can potentially occur when calling
an operation.</p>
<p>The following example defines an operation shape that accepts no input,
returns no output, and can potentially return the
<code class="docutils literal notranslate"><span class="pre">NotFound</span></code> or <code class="docutils literal notranslate"><span class="pre">BadRequest</span></code> error structures.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">operation</span><span class="nc"> MyOperation</span> {
    <span class="nl">errors:</span> [<span class="vc">NotFound</span>, <span class="vc">BadRequest</span>]
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyOperation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;errors&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#NotFound&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#BadRequest&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="resource">
<span id="id21"></span><h4>Resource<a class="headerlink" href="#resource" title="Permalink to this headline">¶</a></h4>
<p>Smithy defines a <em class="dfn">resource</em> as an entity with an identity that has a
set of operations.</p>
<p>A resource shape is defined using a <a class="reference internal" href="language-specification.html#grammar-token-resource_statement"><code class="xref std std-token docutils literal notranslate"><span class="pre">resource_statement</span></code></a> and supports
the following properties:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="30%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#resource-identifiers"><span class="std std-ref">identifiers</span></a></td>
<td>Map&lt;String, <a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a>&gt;</td>
<td>Defines identifier names and shape IDs used to identify the resource.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#create-lifecycle"><span class="std std-ref">create</span></a></td>
<td><a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a></td>
<td>Defines the lifecycle operation used to create a resource using one
or more identifiers created by the service.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#put-lifecycle"><span class="std std-ref">put</span></a></td>
<td><a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a></td>
<td>Defines an idempotent lifecycle operation used to create a resource
using identifiers provided by the client.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#read-lifecycle"><span class="std std-ref">read</span></a></td>
<td><a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a></td>
<td>Defines the lifecycle operation used to retrieve the resource.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#update-lifecycle"><span class="std std-ref">update</span></a></td>
<td><a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a></td>
<td>Defines the lifecycle operation used to update the resource.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#delete-lifecycle"><span class="std std-ref">delete</span></a></td>
<td><a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a></td>
<td>Defines the lifecycle operation used to delete the resource.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list-lifecycle"><span class="std std-ref">list</span></a></td>
<td><a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a></td>
<td>Defines the lifecycle operation used to list resources of this type.</td>
</tr>
<tr class="row-odd"><td>operations</td>
<td>[<a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a>]</td>
<td>Binds a list of non-lifecycle instance operations to the resource.</td>
</tr>
<tr class="row-even"><td>collectionOperations</td>
<td>[<a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a>]</td>
<td>Binds a list of non-lifecycle collection operations to the resource.</td>
</tr>
<tr class="row-odd"><td>resources</td>
<td>[<a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a>]</td>
<td>Binds a list of resources to this resource as a child resource,
forming a containment relationship. The resources MUST NOT have a
cyclical containment hierarchy, and a resource can not be bound more
than once in the entire closure of a resource or service.</td>
</tr>
</tbody>
</table>
<div class="section" id="resource-identifiers">
<span id="identifiers"></span><h5>Identifiers<a class="headerlink" href="#resource-identifiers" title="Permalink to this headline">¶</a></h5>
<p><em class="dfn">Identifiers</em> are used to refer to a specific resource within a service.
The identifiers property of a resource is a map of identifier names to
<a class="reference internal" href="#shape-id"><span class="std std-ref">shape IDs</span></a> that MUST target string shapes.</p>
<p>For example, the following model defines a <code class="docutils literal notranslate"><span class="pre">Forecast</span></code> resource with a
single identifier named <code class="docutils literal notranslate"><span class="pre">forecastId</span></code> that targets the <code class="docutils literal notranslate"><span class="pre">ForecastId</span></code> shape:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="kd">resource</span><span class="nc"> Forecast</span> {
    <span class="nl">identifiers:</span> {
        <span class="nl">forecastId:</span> <span class="vc">ForecastId</span>
    }
}

<span class="kd">string</span><span class="nc"> ForecastId</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Forecast&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;forecastId&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ForecastId&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#ForecastId&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>When a resource is bound as a child to another resource using the &quot;resources&quot;
property, all of the identifiers of the parent resource MUST be repeated
verbatim in the child resource, and the child resource MAY introduce any
number of additional identifiers.</p>
<p><em class="dfn">Parent identifiers</em> are the identifiers of the parent of a resource.
All parent identifiers MUST be bound as identifiers in the input of every
operation bound as a child to a resource. <em class="dfn">Child identifiers</em> are the
identifiers that a child resource contains that are not present in the parent
identifiers.</p>
<p>For example, given the following model,</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> ResourceA</span> {
    <span class="nl">identifiers:</span> {
        <span class="nl">a:</span> <span class="vc">String</span>
    },
    <span class="nl">resources:</span> [<span class="vc">ResourceB</span>],
}

<span class="kd">resource</span><span class="nc"> ResourceB</span> {
    <span class="nl">identifiers:</span> {
        <span class="nl">a:</span> <span class="vc">String</span>,
        <span class="nl">b:</span> <span class="vc">String</span>,
    },
    <span class="nl">resources:</span> [<span class="vc">ResourceC</span>],
}

<span class="kd">resource</span><span class="nc"> ResourceC</span> {
    <span class="nl">identifiers:</span> {
        <span class="nl">a:</span> <span class="vc">String</span>,
        <span class="nl">b:</span> <span class="vc">String</span>,
        <span class="nl">c:</span> <span class="vc">String</span>,
    }
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#ResourceA&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ResourceB&quot;</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#ResourceB&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ResourceC&quot;</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#ResourceC&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;c&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ResourceB</span></code> is a valid child of <code class="docutils literal notranslate"><span class="pre">ResourceA</span></code> and contains a child
identifier of &quot;b&quot;. <code class="docutils literal notranslate"><span class="pre">ResourceC</span></code> is a valid child of <code class="docutils literal notranslate"><span class="pre">ResourceB</span></code> and
contains a child identifier of &quot;c&quot;.</p>
<p>However, the following defines two <em>invalid</em> child resources that do not
define an <code class="docutils literal notranslate"><span class="pre">identifiers</span></code> property that is compatible with their parents:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> ResourceA</span> {
    <span class="nl">identifiers:</span> {
        <span class="nl">a:</span> <span class="vc">String</span>,
        <span class="nl">b:</span> <span class="vc">String</span>,
    },
    <span class="nl">resources:</span> [<span class="vc">Invalid1</span>, <span class="vc">Invalid2</span>],
}

<span class="kd">resource</span><span class="nc"> Invalid1</span> {
    <span class="c">// Invalid: missing &quot;a&quot;.</span>
    <span class="nl">identifiers:</span> {
        <span class="nl">b:</span> <span class="vc">String</span>,
    },
}

<span class="kd">resource</span><span class="nc"> Invalid2</span> {
    <span class="nl">identifiers:</span> {
        <span class="nl">a:</span> <span class="vc">String</span>,
        <span class="c">// Invalid: does not target the same shape.</span>
        <span class="nl">b:</span> <span class="vc">SomeOtherString</span>,
    },
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#ResourceA&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Invalid1&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Invalid2&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Invalid1&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Invalid2&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#SomeOtherString&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="binding-identifiers-to-operations">
<span id="binding-identifiers"></span><h5>Binding identifiers to operations<a class="headerlink" href="#binding-identifiers-to-operations" title="Permalink to this headline">¶</a></h5>
<p><em>Identifier bindings</em> indicate which top-level members of the input structure
of an operation provide values for the identifiers of a resource.</p>
<p><strong>Validation</strong></p>
<ul class="simple">
<li>Child resources MUST provide identifier bindings for all of its parent's
identifiers.</li>
<li>Identifier bindings are only formed on input structure members that are
marked as <a class="reference internal" href="#required-trait"><span class="std std-ref">required trait</span></a>.</li>
<li>Resource operations MUST form a valid <em>instance operation</em> or
<em>collection operation</em>.</li>
</ul>
<p id="instance-operations"><em class="dfn">Instance operations</em> are formed when all of the identifiers of a resource
are bound to the input structure of an operation or when a resource has no
identifiers. The <a class="reference internal" href="#put-lifecycle"><span class="std std-ref">put</span></a>, <a class="reference internal" href="#read-lifecycle"><span class="std std-ref">read</span></a>,
<a class="reference internal" href="#update-lifecycle"><span class="std std-ref">update</span></a>, and <a class="reference internal" href="#delete-lifecycle"><span class="std std-ref">delete</span></a>
lifecycle operations are examples of instance operations. An operation bound
to a resource using <cite>operations</cite> MUST form a valid instance operation.</p>
<p id="collection-operations"><em class="dfn">Collection operations</em> are used when an operation is meant to operate on
a collection of resources rather than a specific resource. Collection
operations are formed when an operation is bound to a resource with <cite>collectionOperations</cite>,
or when bound to the <a class="reference internal" href="#list-lifecycle"><span class="std std-ref">list</span></a> or <a class="reference internal" href="#create-lifecycle"><span class="std std-ref">create</span></a>
lifecycle operations. A collection operation MUST omit one or more identifiers
of the resource it is bound to, but MUST bind all identifiers of any parent
resource.</p>
</div>
<div class="section" id="implicit-identifier-bindings">
<span id="id22"></span><h5>Implicit identifier bindings<a class="headerlink" href="#implicit-identifier-bindings" title="Permalink to this headline">¶</a></h5>
<p><em>Implicit identifier bindings</em> are formed when the input of an operation
contains member names that target the same shapes that are defined in the
&quot;identifiers&quot; property of the resource to which an operation is bound.</p>
<p>For example, given the following model,</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> Forecast</span> {
    <span class="nl">identifiers:</span> {
        <span class="nl">forecastId:</span> <span class="vc">ForecastId</span>,
    },
    <span class="nl">read:</span> <span class="vc">GetForecast</span>,
}

<span class="nd">@readonly</span>
<span class="kd">operation</span><span class="nc"> GetForecast</span> {
    <span class="nl">input:</span> <span class="vc">GetForecastInput</span>,
    <span class="nl">output:</span> <span class="vc">GetForecastOutput</span>
}

<span class="kd">structure</span><span class="nc"> GetForecastInput</span> {
    <span class="nd">@required</span>
    <span class="nl">forecastId:</span> <span class="vc">ForecastId</span>,
}

<span class="kd">structure</span><span class="nc"> GetForecastOutput</span> {
    <span class="nd">@required</span>
    <span class="nl">weather:</span> <span class="vc">WeatherData</span>,
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Forecast&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;forecastId&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ForecastId&quot;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;read&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetForecast&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetForecast&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetForecastInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetForecastOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetForecastInput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;forecastId&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ForecastId&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetForecastOutput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;weather&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#WeatherData&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">GetForecast</span></code> forms a valid instance operation because the operation is
not marked with the <code class="docutils literal notranslate"><span class="pre">collection</span></code> trait and <code class="docutils literal notranslate"><span class="pre">GetForecastInput</span></code> provides
<em>implicit identifier bindings</em> by defining a required &quot;forecastId&quot; member
that targets the same shape as the &quot;forecastId&quot; identifier of the resource.</p>
<p>Implicit identifier bindings for collection operations are created in a
similar way to an instance operation, but MUST NOT contain identifier bindings
for <em>all</em> child identifiers of the resource.</p>
<p>Given the following model,</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> Forecast</span> {
    <span class="nl">identifiers:</span> {
        <span class="nl">forecastId:</span> <span class="vc">ForecastId</span>,
    },
    <span class="nl">collectionOperations:</span> [<span class="vc">BatchPutForecasts</span>],
}

<span class="kd">operation</span><span class="nc"> BatchPutForecasts</span> {
    <span class="nl">input:</span> <span class="vc">BatchPutForecastsInput</span>,
    <span class="nl">output:</span> <span class="vc">BatchPutForecastsOutput</span>
}

<span class="kd">structure</span><span class="nc"> BatchPutForecastsInput</span> {
    <span class="nd">@required</span>
    <span class="nl">forecasts:</span> <span class="vc">BatchPutForecastList</span>,
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Forecast&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;forecastId&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ForecastId&quot;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;collectionOperations&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#BatchPutForecasts&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#BatchPutForecasts&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#BatchPutForecastsInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#BatchPutForecastsOutput&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#BatchPutForecastsInput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;forecasts&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#BatchPutForecastList&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">BatchPutForecasts</span></code> forms a valid collection operation with implicit
identifier bindings because <code class="docutils literal notranslate"><span class="pre">BatchPutForecastsInput</span></code> does not require an
input member named &quot;forecastId&quot; that targets <code class="docutils literal notranslate"><span class="pre">ForecastId</span></code>.</p>
</div>
<div class="section" id="explicit-identifier-bindings">
<h5>Explicit identifier bindings<a class="headerlink" href="#explicit-identifier-bindings" title="Permalink to this headline">¶</a></h5>
<p><em>Explicit identifier bindings</em> are defined by applying the
<a class="reference internal" href="#resourceidentifier-trait"><span class="std std-ref">resourceIdentifier trait</span></a> to a member of the input of for an
operation bound to a resource. Explicit bindings are necessary when the name of
the input structure member differs from the name of the resource identifier to
which the input member corresponds.</p>
<p>For example, given the following,</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> Forecast</span> {
    <span class="c">// continued from above</span>
    <span class="nl">resources:</span> [<span class="vc">HistoricalForecast</span>],
}

<span class="kd">resource</span><span class="nc"> HistoricalForecast</span> {
    <span class="nl">identifiers:</span> {
        <span class="nl">forecastId:</span> <span class="vc">ForecastId</span>,
        <span class="nl">historicalId:</span> <span class="vc">HistoricalForecastId</span>,
    },
    <span class="nl">read:</span> <span class="vc">GetHistoricalForecast</span>,
    <span class="nl">list:</span> <span class="vc">ListHistoricalForecasts</span>,
}

<span class="nd">@readonly</span>
<span class="kd">operation</span><span class="nc"> GetHistoricalForecast</span> {
    <span class="nl">input:</span> <span class="vc">GetHistoricalForecastInput</span>,
    <span class="nl">output:</span> <span class="vc">GetHistoricalForecastOutput</span>
}

<span class="kd">structure</span><span class="nc"> GetHistoricalForecastInput</span> {
    <span class="nd">@required</span>
    <span class="nd">@resourceIdentifier</span>(<span class="s2">&quot;forecastId&quot;</span>)
    <span class="nl">customForecastIdName:</span> <span class="vc">ForecastId</span>,

    <span class="nd">@required</span>
    <span class="nd">@resourceIdentifier</span>(<span class="s2">&quot;historicalId&quot;</span>)
    <span class="nl">customHistoricalIdName:</span> <span class="vc">String</span>
}
</pre></div>
</div>
<p>the <a class="reference internal" href="#resourceidentifier-trait"><span class="std std-ref">resourceIdentifier trait</span></a> on <code class="docutils literal notranslate"><span class="pre">GetHistoricalForecastInput$customForecastIdName</span></code>
maps it to the &quot;forecastId&quot; identifier is provided by the
&quot;customForecastIdName&quot; member, and the <a class="reference internal" href="#resourceidentifier-trait"><span class="std std-ref">resourceIdentifier trait</span></a>
on <code class="docutils literal notranslate"><span class="pre">GetHistoricalForecastInput$customHistoricalIdName</span></code> maps that member
to the &quot;historicalId&quot; identifier.</p>
</div>
<div class="section" id="lifecycle-operations">
<span id="id23"></span><h5>Lifecycle operations<a class="headerlink" href="#lifecycle-operations" title="Permalink to this headline">¶</a></h5>
<p><em class="dfn">Lifecycle operations</em> are used to transition the state of a resource
using well-defined semantics. Lifecycle operations are defined by setting the
<code class="docutils literal notranslate"><span class="pre">put</span></code>, <code class="docutils literal notranslate"><span class="pre">create</span></code>, <code class="docutils literal notranslate"><span class="pre">read</span></code>, <code class="docutils literal notranslate"><span class="pre">update</span></code>, <code class="docutils literal notranslate"><span class="pre">delete</span></code>, and <code class="docutils literal notranslate"><span class="pre">list</span></code> properties
of a resource to target an operation shape.</p>
<p>The following snippet defines a resource with each lifecycle method:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> Forecast</span> {
    <span class="nl">identifiers:</span> {
        <span class="nl">forecastId:</span> <span class="vc">ForecastId</span>,
    },
    <span class="nl">put:</span> <span class="vc">PutForecast</span>,
    <span class="nl">create:</span> <span class="vc">CreateForecast</span>,
    <span class="nl">read:</span> <span class="vc">GetForecast</span>,
    <span class="nl">update:</span> <span class="vc">UpdateForecast</span>,
    <span class="nl">delete:</span> <span class="vc">DeleteForecast</span>,
    <span class="nl">list:</span> <span class="vc">ListForecasts</span>,
}
</pre></div>
</div>
</div>
<div class="section" id="put-lifecycle">
<span id="id24"></span><h5>Put lifecycle<a class="headerlink" href="#put-lifecycle" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">put</span></code> lifecycle operation is used to create a resource using identifiers
provided by the client.</p>
<p><strong>Validation</strong></p>
<ul class="simple">
<li>Put operations MUST NOT be marked with <a class="reference internal" href="#readonly-trait"><span class="std std-ref">readonly trait</span></a>.</li>
<li>Put operations MUST be marked with <a class="reference internal" href="#idempotent-trait"><span class="std std-ref">idempotent trait</span></a>.</li>
<li>Put operations MUST form valid <a class="reference internal" href="#instance-operations"><span class="std std-ref">instance operations</span></a>.</li>
</ul>
<p>The following snippet defines the <code class="docutils literal notranslate"><span class="pre">PutForecast</span></code> operation.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">operation</span><span class="nc"> PutForecast</span> {
    <span class="nl">input:</span> <span class="vc">PutForecastInput</span>,
    <span class="nl">output:</span> <span class="vc">PutForecastOutput</span>
}

<span class="nd">@idempotent</span>
<span class="kd">structure</span><span class="nc"> PutForecastInput</span> {
    <span class="c">// The client provides the resource identifier.</span>
    <span class="nd">@required</span>
    <span class="nl">forecastId:</span> <span class="vc">ForecastId</span>,

    <span class="nl">chanceOfRain:</span> <span class="vc">Float</span>
}
</pre></div>
</div>
</div>
<div class="section" id="create-lifecycle">
<span id="id25"></span><h5>Create lifecycle<a class="headerlink" href="#create-lifecycle" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">create</span></code> operation is used to create a resource using one or more
identifiers created by the service.</p>
<p><strong>Validation</strong></p>
<ul class="simple">
<li>Create operations MUST NOT be marked with <a class="reference internal" href="#readonly-trait"><span class="std std-ref">readonly trait</span></a>.</li>
<li>Create operations MUST form valid <a class="reference internal" href="#collection-operations"><span class="std std-ref">collection operations</span></a>.</li>
</ul>
<p>The following snippet defines the <code class="docutils literal notranslate"><span class="pre">CreateForecast</span></code> operation.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">operation</span><span class="nc"> CreateForecast</span> {
    <span class="nl">input:</span> <span class="vc">CreateForecastInput</span>,
    <span class="nl">output:</span> <span class="vc">CreateForecastOutput</span>
}

<span class="nd">@collection</span>
<span class="kd">operation</span><span class="nc"> CreateForecast</span> {
    <span class="nl">input:</span> <span class="vc">CreateForecastInput</span>,
    <span class="nl">output:</span> <span class="vc">CreateForecastOutput</span>
}

<span class="kd">structure</span><span class="nc"> CreateForecastInput</span> {
    <span class="c">// No identifier is provided by the client, so the service is</span>
    <span class="c">// responsible for providing the identifier of the resource.</span>
    <span class="nl">chanceOfRain:</span> <span class="vc">Float</span>,
}
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">create</span></code> operation MAY be marked with <a class="reference internal" href="#idempotent-trait"><span class="std std-ref">idempotent trait</span></a></p>
</div>
<div class="section" id="read-lifecycle">
<span id="id26"></span><h5>Read lifecycle<a class="headerlink" href="#read-lifecycle" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">read</span></code> operation is the canonical operation used to retrieve the current
representation of a resource.</p>
<p><strong>Validation</strong></p>
<ul class="simple">
<li>Read operations MUST be valid <a class="reference internal" href="#instance-operations"><span class="std std-ref">instance operations</span></a>.</li>
<li>Read operations MUST be marked with <a class="reference internal" href="#readonly-trait"><span class="std std-ref">readonly trait</span></a>.</li>
</ul>
<p>For example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@readonly</span>
<span class="kd">operation</span><span class="nc"> GetForecast</span> {
    <span class="nl">input:</span> <span class="vc">GetForecastInput</span>,
    <span class="nl">output:</span> <span class="vc">GetForecastOutput</span>,
    <span class="nl">errors:</span> [<span class="vc">ResourceNotFound</span>]
}

<span class="kd">structure</span><span class="nc"> GetForecastInput</span> {
    <span class="nd">@required</span>
    <span class="nl">forecastId:</span> <span class="vc">ForecastId</span>,
}
</pre></div>
</div>
</div>
<div class="section" id="update-lifecycle">
<span id="id27"></span><h5>Update lifecycle<a class="headerlink" href="#update-lifecycle" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">update</span></code> operation is the canonical operation used to update a
resource.</p>
<p><strong>Validation</strong></p>
<ul class="simple">
<li>Update operations MUST be valid <a class="reference internal" href="#instance-operations"><span class="std std-ref">instance operations</span></a>.</li>
<li>Update operations MUST NOT be marked with <a class="reference internal" href="#readonly-trait"><span class="std std-ref">readonly trait</span></a>.</li>
</ul>
<p>For example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">operation</span><span class="nc"> UpdateForecast</span> {
    <span class="nl">input:</span> <span class="vc">UpdateForecastInput</span>,
    <span class="nl">output:</span> <span class="vc">UpdateForecastOutput</span>,
    <span class="nl">errors:</span> [<span class="vc">ResourceNotFound</span>]
}

<span class="kd">structure</span><span class="nc"> UpdateForecastInput</span> {
    <span class="nd">@required</span>
    <span class="nl">forecastId:</span> <span class="vc">ForecastId</span>,

    <span class="nl">chanceOfRain:</span> <span class="vc">Float</span>,
}
</pre></div>
</div>
</div>
<div class="section" id="delete-lifecycle">
<span id="id28"></span><h5>Delete lifecycle<a class="headerlink" href="#delete-lifecycle" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">delete</span></code> operation is canonical operation used to delete a resource.</p>
<p><strong>Validation</strong></p>
<ul class="simple">
<li>Delete operations MUST be valid <a class="reference internal" href="#instance-operations"><span class="std std-ref">instance operations</span></a>.</li>
<li>Delete operations MUST NOT be marked with <a class="reference internal" href="#readonly-trait"><span class="std std-ref">readonly trait</span></a>.</li>
<li>Delete operations MUST be marked with <a class="reference internal" href="#idempotent-trait"><span class="std std-ref">idempotent trait</span></a>.</li>
</ul>
<p>For example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@idempotent</span>
<span class="kd">operation</span><span class="nc"> DeleteForecast</span> {
    <span class="nl">input:</span> <span class="vc">DeleteForecastInput</span>,
    <span class="nl">output:</span> <span class="vc">DeleteForecastOutput</span>,
    <span class="nl">errors:</span> [<span class="vc">ResourceNotFound</span>]
}

<span class="kd">structure</span><span class="nc"> DeleteForecastInput</span> {
    <span class="nd">@required</span>
    <span class="nl">forecastId:</span> <span class="vc">ForecastId</span>,
}
</pre></div>
</div>
</div>
<div class="section" id="list-lifecycle">
<span id="id29"></span><h5>List lifecycle<a class="headerlink" href="#list-lifecycle" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">list</span></code> operation is the canonical operation used to list a
collection of resources.</p>
<p><strong>Validation</strong></p>
<ul class="simple">
<li>List operations MUST form valid <a class="reference internal" href="#collection-operations"><span class="std std-ref">collection operations</span></a>.</li>
<li>List operations MUST be marked with <a class="reference internal" href="#readonly-trait"><span class="std std-ref">readonly trait</span></a>.</li>
<li>The output of a list operation SHOULD contain references to the resource
being listed.</li>
<li>List operations SHOULD be <a class="reference internal" href="#paginated-trait"><span class="std std-ref">paginated</span></a>.</li>
</ul>
<p>For example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@collection</span> <span class="nd">@readonly</span> <span class="nd">@paginated</span>
<span class="kd">operation</span><span class="nc"> ListForecasts</span> {
    <span class="nl">input:</span> <span class="vc">ListForecastsInput</span>,
    <span class="nl">output:</span> <span class="vc">ListForecastsOutput</span>
}

<span class="kd">structure</span><span class="nc"> ListForecastsInput</span> {
    <span class="nl">maxResults:</span> <span class="vc">Integer</span>,
    <span class="nl">nextToken:</span> <span class="vc">String</span>
}

<span class="kd">structure</span><span class="nc"> ListForecastsOutput</span> {
    <span class="nl">nextToken:</span> <span class="vc">String</span>,
    <span class="nd">@required</span>
    <span class="nl">forecasts:</span> <span class="vc">ForecastList</span>
}

<span class="kd">list</span><span class="nc"> ForecastList</span> {
    <span class="nl">member:</span> <span class="vc">ForecastId</span>
}
</pre></div>
</div>
</div>
<div class="section" id="referencing-resources">
<span id="id30"></span><h5>Referencing resources<a class="headerlink" href="#referencing-resources" title="Permalink to this headline">¶</a></h5>
<p>References between resources can be defined in a Smithy model at design-time.
Resource references allow tooling to understand the relationships between
resources and how to dereference the location of a resource.</p>
<p>A reference to a resource is formed when the <a class="reference internal" href="#references-trait"><span class="std std-ref">references trait</span></a>
is applied to a structure or string shape. The following example creates a
reference to a <code class="docutils literal notranslate"><span class="pre">HistoricalForecast</span></code> resource (a resource that requires the
&quot;forecastId&quot; and &quot;historicalId&quot; identifiers):</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@references</span>([{<span class="nl">resource:</span> <span class="vc">HistoricalForecast</span>}])
<span class="kd">structure</span><span class="nc"> HistoricalReference</span> {
    <span class="nl">forecastId:</span> <span class="vc">ForecastId</span>,
    <span class="nl">historicalId:</span> <span class="vc">HistoricalForecastId</span>
}
</pre></div>
</div>
<p>Notice that in the above example, the identifiers of the resource were not
explicitly mapped to structure members. This is because the targeted structure
contains members with names that match the names of the identifiers of the
<code class="docutils literal notranslate"><span class="pre">HistoricalForecast</span></code> resource.</p>
<p>Explicit mappings between identifier names and structure member names can be
defined if needed. For example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@references</span>([{<span class="nl">resource:</span> <span class="vc">HistoricalForecast</span>,
              <span class="nl">ids:</span> {
                  <span class="nl">forecastId:</span> <span class="s2">&quot;customForecastId&quot;</span>,
                  <span class="nl">historicalId:</span> <span class="s2">&quot;customHistoricalId&quot;</span>
              }])
<span class="kd">structure</span><span class="nc"> AnotherHistoricalReference</span> {
    <span class="nl">customForecastId:</span> <span class="vc">String</span>,
    <span class="nl">customHistoricalId:</span> <span class="vc">String</span>,
}
</pre></div>
</div>
<p>A reference can be formed on a string shape for resources that have one
identifier. References applied to a string shape MUST omit the &quot;ids&quot;
property in the reference.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> SimpleResource</span> {
    <span class="nl">identifiers:</span> {
        <span class="nl">foo:</span> <span class="vc">String</span>,
    }
}

<span class="nd">@references</span>([{<span class="nl">resource:</span> <span class="vc">SimpleResource</span>}])
<span class="kd">string</span><span class="nc"> SimpleResourceReference</span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="#references-trait"><span class="std std-ref">references trait</span></a> for more information about references.</p>
</div>
</div>
</div>
</div>
<div class="section" id="shape-id">
<span id="id31"></span><h2>Shape ID<a class="headerlink" href="#shape-id" title="Permalink to this headline">¶</a></h2>
<p>A <em class="dfn">shape ID</em> is used to refer to shapes and traits in the model.
Shape IDs adhere to the following syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">com</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">baz</span><span class="c1">#ShapeName$memberName</span>
\<span class="n">_________</span><span class="o">/</span> \<span class="n">_______</span><span class="o">/</span> \<span class="n">________</span><span class="o">/</span>
     <span class="o">|</span>          <span class="o">|</span>          <span class="o">|</span>
 <span class="n">Namespace</span>  <span class="n">Shape</span> <span class="n">name</span>  <span class="n">Member</span> <span class="n">name</span>
</pre></div>
</div>
<p>Shape IDs are formally defined by the <a class="reference internal" href="language-specification.html#shape-id-abnf"><span class="std std-ref">shape ID ABNF</span></a>.</p>
<dl class="docutils">
<dt>Absolute shape ID</dt>
<dd>An <em class="dfn">absolute shape ID</em> starts with a <a class="reference internal" href="language-specification.html#grammar-token-namespace"><code class="xref std std-token docutils literal notranslate"><span class="pre">namespace</span></code></a> name,
followed by &quot;<code class="docutils literal notranslate"><span class="pre">#</span></code>&quot;, followed by a <em>relative shape ID</em>.</dd>
<dt>Relative shape ID</dt>
<dd><p class="first">A <em class="dfn">relative shape ID</em> contains a <a class="reference internal" href="language-specification.html#grammar-token-identifier"><code class="xref std std-token docutils literal notranslate"><span class="pre">shape</span> <span class="pre">name</span></code></a>
and an optional <a class="reference internal" href="language-specification.html#grammar-token-identifier"><code class="xref std std-token docutils literal notranslate"><span class="pre">member</span> <span class="pre">name</span></code></a>. The shape name and
member name are separated by the &quot;<code class="docutils literal notranslate"><span class="pre">$</span></code>&quot; symbol if a member name is
present.</p>
<p class="last">A relative shape ID is resolved to an absolute shape ID using the
process defined in <a class="reference internal" href="#relative-shape-id"><span class="std std-ref">Relative shape ID resolution</span></a>.</p>
</dd>
</dl>
<div class="section" id="relative-shape-id-resolution">
<span id="relative-shape-id"></span><h3>Relative shape ID resolution<a class="headerlink" href="#relative-shape-id-resolution" title="Permalink to this headline">¶</a></h3>
<p>In the Smithy IDL, relative shape IDs are resolved using the following process:</p>
<ol class="arabic simple">
<li>If a <a class="reference internal" href="language-specification.html#grammar-token-use_statement"><code class="xref std std-token docutils literal notranslate"><span class="pre">use_statement</span></code></a> has imported a shape with the same name,
the shape ID resolves to the imported shape ID.</li>
<li>If a shape is defined in the same namespace as the shape with the same name,
the namespace of the shape resolves to the <em>current namespace</em>.</li>
<li>If a shape is defined in the <a class="reference internal" href="#prelude"><span class="std std-ref">prelude</span></a> with the same name,
the namespace resolves to <code class="docutils literal notranslate"><span class="pre">smithy.api</span></code>.</li>
<li>If a relative shape ID does not satisfy one of the above cases, the shape
ID is invalid, and the namespace is inherited from the <em>current namespace</em>.</li>
</ol>
<p>The following example Smithy model contains comments above each member of
the shape named <code class="docutils literal notranslate"><span class="pre">MyStructure</span></code> that describes the shape the member resolves
to.</p>
<div class="highlight-smithy notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="kd">use</span><span class="nc"> foo.baz#Bar</span>

<span class="kd">string</span><span class="nc"> MyString</span>

<span class="kd">structure</span><span class="nc"> MyStructure</span> {
    <span class="c">// Resolves to smithy.example#MyString</span>
    <span class="c">// There is a shape named MyString defined in the same namespace.</span>
    <span class="nl">a:</span> <span class="vc">MyString</span>,

    <span class="c">// Resolves to smithy.example#MyString</span>
    <span class="c">// Absolute shape IDs do not perform namespace resolution.</span>
    <span class="nl">b:</span> <span class="vc">smithy.example#MyString</span>,

    <span class="c">// Resolves to foo.baz#Bar</span>
    <span class="c">// The &quot;use foo.baz#Bar&quot; statement imported the Bar symbol,</span>
    <span class="c">// allowing the shape to be referenced using a relative shape ID.</span>
    <span class="nl">c:</span> <span class="vc">Bar</span>,

    <span class="c">// Resolves to foo.baz#Bar</span>
    <span class="c">// Absolute shape IDs do not perform namespace resolution.</span>
    <span class="nl">d:</span> <span class="vc">foo.baz#Bar</span>,

    <span class="c">// Resolves to foo.baz#MyString</span>
    <span class="c">// Absolute shape IDs do not perform namespace resolution.</span>
    <span class="nl">e:</span> <span class="vc">foo.baz#MyString</span>,

    <span class="c">// Resolves to smithy.api#String</span>
    <span class="c">// No shape named String was imported through a use statement</span>
    <span class="c">// the smithy.example namespace does not contain a shape named</span>
    <span class="c">// String, and the prelude model contains a shape named String.</span>
    <span class="nl">f:</span> <span class="vc">String</span>,

    <span class="c">// Resolves to smithy.example#MyBoolean.</span>
    <span class="c">// There is a shape named MyBoolean defined in the same namespace.</span>
    <span class="c">// Forward references are supported both within the same file and</span>
    <span class="c">// across multiple files.</span>
    <span class="nl">g:</span> <span class="vc">MyBoolean</span>,

    <span class="c">// Invalid. A shape by this name has not been imported through a</span>
    <span class="c">// use statement, a shape by this name does not exist in the</span>
    <span class="c">// current namespace, and a shape by this name does not exist in</span>
    <span class="c">// the prelude model.</span>
    <span class="nl">h:</span> <span class="vc">InvalidShape</span>,
}

<span class="kd">boolean</span><span class="nc"> MyBoolean</span>
</pre></div>
</td></tr></table></div>
<p id="relative-shape-id-json">Relative shape IDs in the <a class="reference internal" href="language-specification.html#json-ast"><span class="std std-ref">JSON AST</span></a> are resolved using
the same process as the IDL with the only difference being the JSON AST
does not support any kind of <code class="docutils literal notranslate"><span class="pre">use</span></code> statements.</p>
<p>For example, given the following Smithy model:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyStructure&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#MyString&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;c&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Foo&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;d&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#InvalidShape&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The members of <code class="docutils literal notranslate"><span class="pre">MyStructure</span></code> resolve to the following shape IDs:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">a</span></code> targeting <code class="docutils literal notranslate"><span class="pre">MyString</span></code> resolves to <code class="docutils literal notranslate"><span class="pre">smithy.example#MyString</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">b</span></code> targeting <code class="docutils literal notranslate"><span class="pre">String</span></code> resolves to <code class="docutils literal notranslate"><span class="pre">smithy.api#String</span></code> in the prelude.</li>
<li><code class="docutils literal notranslate"><span class="pre">c</span></code> targeting <code class="docutils literal notranslate"><span class="pre">smithy.example#Foo</span></code> resolves to <code class="docutils literal notranslate"><span class="pre">smithy.example#Foo</span></code>
because absolute shape IDs do not perform namespace resolution.</li>
<li><code class="docutils literal notranslate"><span class="pre">d</span></code> targeting <code class="docutils literal notranslate"><span class="pre">InvalidShape</span></code> resolves to an invalid shape ID that
targets <code class="docutils literal notranslate"><span class="pre">smithy.example#InvalidShape</span></code> because a shape named
<code class="docutils literal notranslate"><span class="pre">InvalidShape</span></code> does not exist in the <code class="docutils literal notranslate"><span class="pre">smithy.example</span></code> namespace nor
does one exist in the prelude.</li>
</ul>
</div>
<div class="section" id="shape-id-member-names">
<span id="id32"></span><h3>Shape ID member names<a class="headerlink" href="#shape-id-member-names" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference internal" href="#member"><span class="std std-ref">member</span></a> of an <a class="reference internal" href="#aggregate-types"><span class="std std-ref">aggregate shape</span></a> can be
referenced in a shape ID by appending &quot;<code class="docutils literal notranslate"><span class="pre">$</span></code>&quot; followed by the
appropriate member name. Member names for each shape are defined as follows:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="25%" />
<col width="40%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Shape ID</th>
<th class="head">Syntax</th>
<th class="head">Examples</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#structure"><span class="std std-ref">structure</span></a> member</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;$&lt;member-name&gt;</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">Shape$foo</span></code>, <code class="docutils literal notranslate"><span class="pre">ns.example#Shape$baz</span></code></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#union"><span class="std std-ref">union</span></a> member</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;$&lt;member-name&gt;</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">Shape$foo</span></code>, <code class="docutils literal notranslate"><span class="pre">ns.example#Shape$baz</span></code></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list"><span class="std std-ref">list</span></a> member</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;$member</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">Shape$member</span></code>, <code class="docutils literal notranslate"><span class="pre">ns.example#Shape$member</span></code></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#set"><span class="std std-ref">set</span></a> member</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;$member</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">Shape$member</span></code>, <code class="docutils literal notranslate"><span class="pre">ns.example#Shape$member</span></code></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#map"><span class="std std-ref">map</span></a> key</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;$key</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">Shape$key</span></code>, <code class="docutils literal notranslate"><span class="pre">ns.example#Shape$key</span></code></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#map"><span class="std std-ref">map</span></a> value</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;$value</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">Shape$value</span></code>, <code class="docutils literal notranslate"><span class="pre">ns.example#Shape$value</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="shape-names">
<span id="id33"></span><h3>Shape names<a class="headerlink" href="#shape-names" title="Permalink to this headline">¶</a></h3>
<p>Consumers of a Smithy model MAY choose to inflect shape names, structure
member names, and other facets of a Smithy model in order to expose a more
idiomatic experience to particular programming languages. In order to make this
easier for consumers of a model, model authors SHOULD utilize a strict form of
PascalCase in which only the first letter of acronyms, abbreviations, and
initialisms are capitalized.</p>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Recommended</th>
<th class="head">Not recommended</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>UserId</td>
<td>UserID</td>
</tr>
<tr class="row-odd"><td>ResourceArn</td>
<td>ResourceARN</td>
</tr>
<tr class="row-even"><td>IoChannel</td>
<td>IOChannel</td>
</tr>
<tr class="row-odd"><td>HtmlEntity</td>
<td>HTMLEntity</td>
</tr>
<tr class="row-even"><td>HtmlEntity</td>
<td>HTML_Entity</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="shape-id-conflicts">
<h3>Shape ID conflicts<a class="headerlink" href="#shape-id-conflicts" title="Permalink to this headline">¶</a></h3>
<p>While shape IDs used within a model are case-sensitive, no two shapes in
the model can have the same case-insensitive shape ID. For example,
<code class="docutils literal notranslate"><span class="pre">com.Foo#baz</span></code> and <code class="docutils literal notranslate"><span class="pre">com.foo#baz</span></code> are not allowed in the same model. This
property also extends to member names: <code class="docutils literal notranslate"><span class="pre">com.foo#Baz$bar</span></code> and
<code class="docutils literal notranslate"><span class="pre">com.foo#Baz$Bar</span></code> are not allowed on the same structure.</p>
</div>
<div class="section" id="syntactic-shape-ids-in-the-idl">
<span id="syntactic-shape-ids"></span><h3>Syntactic shape IDs in the IDL<a class="headerlink" href="#syntactic-shape-ids-in-the-idl" title="Permalink to this headline">¶</a></h3>
<p>Unquoted string values in the Smithy IDL in trait values or metadata values
are considered shape IDs and are resolved using the process defined in
<a class="reference internal" href="#relative-shape-id"><span class="std std-ref">Relative shape ID resolution</span></a>. Values that are not meant to be shape IDs MUST
be quoted.</p>
<p>For example, the following model resolves the value of the <a class="reference internal" href="#error-trait"><span class="std std-ref">error trait</span></a>
to the string literal <code class="docutils literal notranslate"><span class="pre">&quot;smithy.example#client&quot;</span></code> rather than using the valid
string literal value of <code class="docutils literal notranslate"><span class="pre">&quot;client&quot;</span></code>, causing the model to be invalid:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@error</span>(<span class="vc">client</span>) <span class="c">// &lt;-- This should be &quot;client&quot;</span>
<span class="kd">structure</span><span class="nc"> Error</span>

<span class="kd">string</span><span class="nc"> client</span>
</pre></div>
</div>
<p>Object keys in the IDL are not automatically treated as shape IDs.</p>
<p>Consider the following metadata definition:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> foo </span><span class="nd">=</span> {
    <span class="nl">String:</span> <span class="vc">String</span>,
}
</pre></div>
</div>
<p>The object key remains the same literal string value of <code class="docutils literal notranslate"><span class="pre">String</span></code> while the
value is treated as a shape ID and resolves to the string literal
<code class="docutils literal notranslate"><span class="pre">&quot;smithy.api#String&quot;</span></code>. This IDL model is equivalent to the following
JSON AST model:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;String&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="prelude-model">
<span id="prelude"></span><h2>Prelude model<a class="headerlink" href="#prelude-model" title="Permalink to this headline">¶</a></h2>
<p>Smithy models automatically include a <em>prelude</em> model. The prelude model
defines various simple shapes and every trait defined in the core
specification. Shapes defined in the prelude can be referenced from within
any namespace using a relative shape ID. All of the shapes and traits
defined in the prelude are available inside of the <code class="docutils literal notranslate"><span class="pre">smithy.api</span></code> namespace.</p>
<div class="literal-block-wrapper docutils container" id="prelude-shapes">
<div class="code-block-caption"><span class="caption-text">Smithy prelude</span><a class="headerlink" href="#prelude-shapes" title="Permalink to this code">¶</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="nc"> &quot;0.5.0&quot;</span>

<span class="kd">namespace</span><span class="nc"> smithy.api</span>

<span class="kd">string</span><span class="nc"> String</span>

<span class="kd">blob</span><span class="nc"> Blob</span>

<span class="kd">bigInteger</span><span class="nc"> BigInteger</span>

<span class="kd">bigDecimal</span><span class="nc"> BigDecimal</span>

<span class="kd">timestamp</span><span class="nc"> Timestamp</span>

<span class="kd">document</span><span class="nc"> Document</span>

<span class="nd">@box</span>
<span class="kd">boolean</span><span class="nc"> Boolean</span>

<span class="kd">boolean</span><span class="nc"> PrimitiveBoolean</span>

<span class="nd">@box</span>
<span class="kd">byte</span><span class="nc"> Byte</span>

<span class="kd">byte</span><span class="nc"> PrimitiveByte</span>

<span class="nd">@box</span>
<span class="kd">short</span><span class="nc"> Short</span>

<span class="kd">short</span><span class="nc"> PrimitiveShort</span>

<span class="nd">@box</span>
<span class="kd">integer</span><span class="nc"> Integer</span>

<span class="kd">integer</span><span class="nc"> PrimitiveInteger</span>

<span class="nd">@box</span>
<span class="kd">long</span><span class="nc"> Long</span>

<span class="kd">long</span><span class="nc"> PrimitiveLong</span>

<span class="nd">@box</span>
<span class="kd">float</span><span class="nc"> Float</span>

<span class="kd">float</span><span class="nc"> PrimitiveFloat</span>

<span class="nd">@box</span>
<span class="kd">double</span><span class="nc"> Double</span>

<span class="kd">double</span><span class="nc"> PrimitiveDouble</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="traits">
<span id="id34"></span><h2>Traits<a class="headerlink" href="#traits" title="Permalink to this headline">¶</a></h2>
<p><em>Traits</em> are model components that can be attached to <a class="reference internal" href="index.html"><span class="doc">shapes</span></a>
to describe additional information about the shape; shapes provide the
structure and layout of an API, while traits provide refinement and style.
Traits are defined by applying the <a class="reference internal" href="#trait-definition"><span class="std std-ref">trait definition</span></a>
trait to a shape.</p>
<p>Trait names are case-sensitive; it is invalid, for example, to write the
<a class="reference internal" href="#documentation-trait"><span class="std std-ref">documentation trait</span></a> as &quot;Documentation&quot;).</p>
<div class="section" id="applying-traits-to-shapes">
<h3>Applying traits to shapes<a class="headerlink" href="#applying-traits-to-shapes" title="Permalink to this headline">¶</a></h3>
<p>Trait values immediately preceding a shape definition are applied to the
shape.</p>
<p>The following example applies the <code class="docutils literal notranslate"><span class="pre">sensitive</span></code> and <code class="docutils literal notranslate"><span class="pre">documentation</span></code> trait
to <code class="docutils literal notranslate"><span class="pre">MyString</span></code>:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@sensitive</span>
<span class="nd">@documentation</span>(<span class="s2">&quot;Contains a string&quot;</span>)
<span class="kd">string</span><span class="nc"> MyString</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Contains a string&quot;</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#sensitive&quot;</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>The shape ID of a trait is <em>resolved</em> against <a class="reference internal" href="language-specification.html#grammar-token-use_statement"><code class="xref std std-token docutils literal notranslate"><span class="pre">use_statement</span></code></a>s and the
current namespace in exactly the same same way as
<a class="reference internal" href="#relative-shape-id"><span class="std std-ref">other shape IDs</span></a>.</p>
<p>Traits can be applied to shapes outside of a shape's definition using the
<code class="docutils literal notranslate"><span class="pre">apply</span></code> statement. This can be useful for allowing different teams within
the same organization to independently own different facets of a model.
For example, a service team could own the Smithy model that defines the
shapes and traits of the API, and a documentation team could own a Smithy
model that applies documentation traits to the shapes.</p>
<p>The following example applies the <a class="reference internal" href="#documentation-trait"><span class="std std-ref">documentation trait</span></a> and
<a class="reference internal" href="#length-trait"><span class="std std-ref">length trait</span></a> to the <code class="docutils literal notranslate"><span class="pre">smithy.example#MyString</span></code> shape:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="kd">apply</span><span class="nc"> MyString</span> <span class="nd">@documentation</span>(<span class="s2">&quot;This is my string!&quot;</span>)
<span class="kd">apply</span><span class="nc"> MyString</span> <span class="nd">@length</span>(<span class="nl">min:</span> <span class="m">1</span>, <span class="nl">max:</span> <span class="m">10</span>)
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;This is my string!&quot;</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#length&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mi">10</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="trait-values">
<span id="id35"></span><h3>Trait values<a class="headerlink" href="#trait-values" title="Permalink to this headline">¶</a></h3>
<p>The value that can be provided for a trait depends on its type. A value for a
trait is defined in the IDL by enclosing the value in parenthesis.</p>
<div class="section" id="structure-map-and-union-trait-values">
<h4>Structure, map, and union trait values<a class="headerlink" href="#structure-map-and-union-trait-values" title="Permalink to this headline">¶</a></h4>
<p>Traits that are a <code class="docutils literal notranslate"><span class="pre">structure</span></code>, <code class="docutils literal notranslate"><span class="pre">union</span></code>, or <code class="docutils literal notranslate"><span class="pre">map</span></code> are defined using
a JSON-like object in the Smithy IDL or a JSON object in the
<a class="reference internal" href="language-specification.html#json-ast"><span class="std std-ref">JSON AST</span></a>. The wrapping braces ({}) for the object MUST be
omitted in the Smithy IDL. For example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@structuredTrait</span>(<span class="nl">foo:</span> <span class="s2">&quot;bar&quot;</span>, <span class="nl">baz:</span> <span class="s2">&quot;bam&quot;</span>)
</pre></div>
</div>
<p>Nested structure, map, and union values are defined like JSON value
using the <a class="reference internal" href="language-specification.html#node-values"><span class="std std-ref">node value</span></a> productions:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@structuredTrait</span>(
    <span class="nl">foo:</span> {
        <span class="nl">bar:</span> <span class="s2">&quot;baz&quot;</span>,
        <span class="nl">qux:</span> <span class="s2">&quot;true&quot;</span>,
    }
)
</pre></div>
</div>
<p>Omitting a value is allowed on <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">set</span></code>, <code class="docutils literal notranslate"><span class="pre">map</span></code>, and <code class="docutils literal notranslate"><span class="pre">structure</span></code>
traits if the shapes have no <code class="docutils literal notranslate"><span class="pre">length</span></code> constraints or <code class="docutils literal notranslate"><span class="pre">required</span></code> members.</p>
</div>
<div class="section" id="annotation-traits">
<h4>Annotation traits<a class="headerlink" href="#annotation-traits" title="Permalink to this headline">¶</a></h4>
<p>A structure trait with no members is called an <em>annotation trait</em>. The
following example defines an annotation trait named <code class="docutils literal notranslate"><span class="pre">foo</span></code>:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@trait</span>
<span class="kd">structure</span><span class="nc"> foo</span> {}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#foo&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#trait&quot;</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>It's hard to predict what information a trait needs to capture when modeling
a domain; a trait might start out as a simple annotation, but later might need
additional information. Smithy explicitly supports this use case by allowing
<code class="docutils literal notranslate"><span class="pre">null</span></code> and <code class="docutils literal notranslate"><span class="pre">true</span></code> to be provided for traits that have a structure value.</p>
<p>The following applications of the <code class="docutils literal notranslate"><span class="pre">foo</span></code> annotation trait are all equivalent:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@foo</span>
<span class="kd">string</span><span class="nc"> MyString1</span>

<span class="nd">@foo</span>()
<span class="kd">string</span><span class="nc"> MyString2</span>

<span class="nd">@foo</span>(<span class="kc">true</span>)
<span class="kd">string</span><span class="nc"> MyString3</span>

<span class="nd">@foo</span>(<span class="kc">null</span>)
<span class="kd">string</span><span class="nc"> MyString4</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString1&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#foo&quot;</span><span class="p">:</span> <span class="kc">null</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyString2&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#foo&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyString3&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#foo&quot;</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyString4&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#foo&quot;</span><span class="p">:</span> <span class="kc">null</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>A member can be safely added to an annotation trait structure if the member is
not marked as required. The applications of the <code class="docutils literal notranslate"><span class="pre">foo</span></code> trait in the previous
example and the following example are all valid even after adding a member to the
<code class="docutils literal notranslate"><span class="pre">foo</span></code> trait:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@trait</span>
<span class="kd">structure</span><span class="nc"> foo</span> {
    <span class="nl">baz:</span> <span class="vc">String</span>,
}

<span class="nd">@foo</span>(<span class="nl">baz:</span> <span class="s2">&quot;bar&quot;</span>)
<span class="kd">string</span><span class="nc"> MyString5</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#foo&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;baz&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#trait&quot;</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyString5&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;baz&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="other-trait-values">
<h4>Other trait values<a class="headerlink" href="#other-trait-values" title="Permalink to this headline">¶</a></h4>
<p>All other trait values MUST adhere to the JSON type mappings defined
in <a class="reference internal" href="#trait-definition-values"><span class="std std-ref">Trait JSON values</span></a> table.</p>
</div>
</div>
<div class="section" id="trait-conflict-resolution">
<span id="id36"></span><h3>Trait conflict resolution<a class="headerlink" href="#trait-conflict-resolution" title="Permalink to this headline">¶</a></h3>
<p>Trait conflict resolution is used when the same trait is applied multiple
times to a shape. Duplicate traits applied to shapes are allowed if, and only
if, the trait is a <code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">set</span></code> shape or if both values are exactly
equal. If both values target <code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">set</span></code> shapes, then the traits are
concatenated into a single trait value. If both values are equal, then the
conflict is ignored. All other instances of trait collisions are prohibited.</p>
<p>The following model definition is <strong>invalid</strong> because the <code class="docutils literal notranslate"><span class="pre">length</span></code> trait is
duplicated on the <code class="docutils literal notranslate"><span class="pre">MyList</span></code> shape with different values:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@length</span>(<span class="nl">min:</span> <span class="m">0</span>, <span class="nl">max:</span> <span class="m">10</span>)
<span class="kd">list</span><span class="nc"> MyList</span> {
    <span class="nl">member:</span> <span class="vc">String</span>
}

<span class="kd">apply</span><span class="nc"> MyList</span> <span class="nd">@length</span>(<span class="nl">min:</span> <span class="m">10</span>, <span class="nl">max:</span> <span class="m">20</span>)
</pre></div>
</div>
<p>The following model definition is <strong>valid</strong> because the <code class="docutils literal notranslate"><span class="pre">length</span></code> trait is
duplicated on the <code class="docutils literal notranslate"><span class="pre">MyList</span></code> shape with the same values:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@length</span>(<span class="nl">min:</span> <span class="m">0</span>, <span class="nl">max:</span> <span class="m">10</span>)
<span class="kd">list</span><span class="nc"> MyList</span> {
    <span class="nl">member:</span> <span class="vc">String</span>
}

<span class="kd">apply</span><span class="nc"> MyList</span> <span class="nd">@length</span>(<span class="nl">min:</span> <span class="m">0</span>, <span class="nl">max:</span> <span class="m">10</span>)
</pre></div>
</div>
<p>The following model definition is <strong>valid</strong> because the <code class="docutils literal notranslate"><span class="pre">tags</span></code> trait is
a <a class="reference internal" href="#list"><span class="std std-ref">list</span></a> shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@tags</span>([<span class="s2">&quot;foo&quot;</span>, <span class="s2">&quot;baz&quot;</span>, <span class="s2">&quot;bar&quot;</span>])
<span class="kd">string</span><span class="nc"> MyString</span>

<span class="c">// This is a valid trait collision on a list trait, tags.</span>
<span class="c">// tags becomes [&quot;foo&quot;, &quot;baz&quot;, &quot;bar&quot;, &quot;bar&quot;, &quot;qux&quot;]</span>
<span class="kd">apply</span><span class="nc"> MyString</span> <span class="nd">@tags</span>([<span class="s2">&quot;bar&quot;</span>, <span class="s2">&quot;qux&quot;</span>])
</pre></div>
</div>
</div>
<div class="section" id="trait-definitions">
<span id="trait-definition"></span><h3>Trait definitions<a class="headerlink" href="#trait-definitions" title="Permalink to this headline">¶</a></h3>
<p>A <em>trait definition</em> defines a trait for use in a model. Custom traits can be
used in a model to extend Smithy beyond its built-in capabilities. All traits
applied to a shape MUST have a valid trait definition.</p>
<p>Traits are a specialization of shapes. Traits are defined inside of a
namespace by applying the <code class="docutils literal notranslate"><span class="pre">trait</span></code> definition trait to a shape. Trait
definitions can only be applied to simple types, <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">map</span></code>, <code class="docutils literal notranslate"><span class="pre">set</span></code>,
<code class="docutils literal notranslate"><span class="pre">structure</span></code>, and <code class="docutils literal notranslate"><span class="pre">union</span></code> shapes.</p>
<p>The following example defines a trait named <code class="docutils literal notranslate"><span class="pre">myTraitName</span></code> in the
<code class="docutils literal notranslate"><span class="pre">smithy.example</span></code> namespace:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@trait</span>(<span class="nl">selector:</span> <span class="s2">&quot;*&quot;</span>)
<span class="kd">structure</span><span class="nc"> myTraitName</span> {}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#myTraitName&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#trait&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">By convention, trait shape names SHOULD use a lowercase name so that they
visually stand out from normal shapes.</p>
</div>
<p>After a trait is defined, it can be applied to any shape that matches its
selector. The following example applies the <code class="docutils literal notranslate"><span class="pre">myTraitName</span></code> trait to the
<code class="docutils literal notranslate"><span class="pre">MyString</span></code> shape using a trait shape ID that is relative to the current
namespace:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@myTraitName</span>
<span class="kd">string</span><span class="nc"> MyString</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#myTraitName&quot;</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Built-in traits are defined in the Smithy <a class="reference internal" href="#prelude"><span class="std std-ref">prelude</span></a> and are
automatically available in every Smithy model through relative shape IDs.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The only valid reference to a trait definition is through applying the
trait to a shape. Members and references within a model MUST NOT refer
to trait shapes.</p>
</div>
<div class="section" id="trait-definition-properties">
<span id="id37"></span><h4>Trait definition properties<a class="headerlink" href="#trait-definition-properties" title="Permalink to this headline">¶</a></h4>
<p>The trait definition trait is a structure that supports the following
members:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>selector</td>
<td>string</td>
<td>A valid <a class="reference internal" href="selectors.html#selectors"><span class="std std-ref">selector</span></a> that defines where the trait
can be applied. For example, a <code class="docutils literal notranslate"><span class="pre">selector</span></code> set to <code class="docutils literal notranslate"><span class="pre">:test(list,</span> <span class="pre">map)</span></code>
means that the trait can be applied to a <a class="reference internal" href="#list"><span class="std std-ref">list</span></a> or <a class="reference internal" href="#map"><span class="std std-ref">map</span></a>
shape. This value defaults to <code class="docutils literal notranslate"><span class="pre">*</span></code> if not set, meaning the trait can
be applied to any shape.</td>
</tr>
<tr class="row-odd"><td>conflicts</td>
<td>[string]</td>
<td>Defines the shape IDs of traits that MUST NOT be applied to the same
shape as the trait being defined. This allows traits to be defined as
mutually exclusive. Relative shape IDs that are not resolved in the IDL
while parsing are assumed to refer to traits defined in the prelude
namespace, <code class="docutils literal notranslate"><span class="pre">smithy.api</span></code>. Conflict shape IDs MAY reference unknown
trait definitions that are not defined in the model.</td>
</tr>
<tr class="row-even"><td>structurallyExclusive</td>
<td>boolean</td>
<td>Requires that only a single member of a structure can be marked with
the trait.</td>
</tr>
</tbody>
</table>
<p>The following example defines two custom traits: <code class="docutils literal notranslate"><span class="pre">beta</span></code> and
<code class="docutils literal notranslate"><span class="pre">structuredTrait</span></code>:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="cm">/// A trait that can be applied to a member.</span>
<span class="nd">@trait</span>(<span class="nl">selector:</span> <span class="s2">&quot;member:of(structure)&quot;</span>)
<span class="kd">structure</span><span class="nc"> beta</span> {}

<span class="cm">/// A trait that has members.</span>
<span class="nd">@trait</span>(<span class="nl">selector:</span> <span class="s2">&quot;string&quot;</span>, <span class="nl">conflicts:</span> [<span class="vc">beta</span>])
<span class="kd">structure</span><span class="nc"> structuredTrait</span> {
    <span class="nd">@required</span>
    <span class="nl">lorem:</span> <span class="vc">StringShape</span>,

    <span class="nd">@required</span>
    <span class="nl">ipsum:</span> <span class="vc">StringShape</span>,

    <span class="nl">dolor:</span> <span class="vc">StringShape</span>,
}

<span class="c">// Apply the &quot;beta&quot; trait to the &quot;foo&quot; member.</span>
<span class="kd">structure</span><span class="nc"> MyShape</span> {
    <span class="nd">@required</span>
    <span class="nd">@beta</span>
    <span class="nl">foo:</span> <span class="vc">StringShape</span>,
}

<span class="c">// Apply the structuredTrait to the string.</span>
<span class="nd">@structuredTrait</span>(
    <span class="nl">lorem:</span> <span class="s2">&quot;This is a custom trait!&quot;</span>,
    <span class="nl">ipsum:</span> <span class="s2">&quot;lorem and ipsum are both required values.&quot;</span>)
<span class="kd">string</span><span class="nc"> StringShape</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#beta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#trait&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="s2">&quot;member:of(structure)&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;A trait that can be applied to a member.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#structuredTrait&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#trait&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;conflicts&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;smithy.example#beta&quot;</span>
                    <span class="p">]</span>
                <span class="p">},</span>
                <span class="nt">&quot;smithy.api#members&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;lorem&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;StringShape&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">},</span>
                    <span class="nt">&quot;dolor&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;StringShape&quot;</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;A trait that has members.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyShape&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#members&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;beta&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;StringShape&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;beta&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#StringShape&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#structuredTrait&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;lorem&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a custom trait!&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;ipsum&quot;</span><span class="p">:</span> <span class="s2">&quot;lorem and ipsum are both required values.&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="trait-json-values">
<span id="trait-definition-values"></span><h4>Trait JSON values<a class="headerlink" href="#trait-json-values" title="Permalink to this headline">¶</a></h4>
<p>The value provided for a trait MUST be compatible with the <code class="docutils literal notranslate"><span class="pre">shape</span></code> defined
for the trait. The following table defines each shape type that is available
to target from trait definitions and how values for those shapes are defined
in JSON.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Smithy type</th>
<th class="head">JSON type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>blob</td>
<td>string</td>
<td>A <code class="docutils literal notranslate"><span class="pre">string</span></code> value that is base64 encoded. The bytes provided for a
blob MUST be compatible with the <code class="docutils literal notranslate"><span class="pre">format</span></code> of the blob.</td>
</tr>
<tr class="row-odd"><td>boolean</td>
<td>boolean</td>
<td>Can be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</td>
</tr>
<tr class="row-even"><td>byte</td>
<td>number</td>
<td>The value MUST fall within the range of -128 to 127</td>
</tr>
<tr class="row-odd"><td>short</td>
<td>number</td>
<td>The value MUST fall within the range of -32,768 to 32,767</td>
</tr>
<tr class="row-even"><td>integer</td>
<td>number</td>
<td>The value MUST fall within the range of -2^31 to (2^31)-1.</td>
</tr>
<tr class="row-odd"><td>long</td>
<td>number</td>
<td>The value MUST fall within the range of -2^63 to (2^63)-1.</td>
</tr>
<tr class="row-even"><td>float</td>
<td>number</td>
<td>A normal JSON number.</td>
</tr>
<tr class="row-odd"><td>double</td>
<td>number</td>
<td>A normal JSON number.</td>
</tr>
<tr class="row-even"><td>bigDecimal</td>
<td>string</td>
<td>bigDecimal values are serialized as strings to avoid rounding issues
when parsing a Smithy model in various languages.</td>
</tr>
<tr class="row-odd"><td>bigInteger</td>
<td>string | integer</td>
<td>bigInteger values can be serialized as strings to avoid truncation
issues when parsing a Smithy model in various languages.</td>
</tr>
<tr class="row-even"><td>string</td>
<td>string</td>
<td>The provided value SHOULD be compatible with the <code class="docutils literal notranslate"><span class="pre">format</span></code> of the
string shape if present; however, this is not validated by Smithy.</td>
</tr>
<tr class="row-odd"><td>timestamp</td>
<td>number | string</td>
<td>If a number is provided, it represents Unix epoch seconds with optional
millisecond precision. If a string is provided, it MUST be a valid
<span class="target" id="index-2"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc3339.html"><strong>RFC 3339</strong></a> string with optional millisecond precision
(e.g., <code class="docutils literal notranslate"><span class="pre">1990-12-31T23:59:60Z</span></code>).</td>
</tr>
<tr class="row-even"><td>list</td>
<td>array</td>
<td>Each value in the array MUST be compatible with the referenced member.</td>
</tr>
<tr class="row-odd"><td>map</td>
<td>object</td>
<td>Each key MUST be compatible with the <code class="docutils literal notranslate"><span class="pre">key</span></code> member of the map, and
each value MUST be compatible with the <code class="docutils literal notranslate"><span class="pre">value</span></code> member of the map.</td>
</tr>
<tr class="row-even"><td>structure</td>
<td>object</td>
<td>All members marked as required MUST be provided in a corresponding
key-value pair. Each key MUST correspond to a single member name of
the structure. Each value MUST be compatible with the member that
corresponds to the member name.</td>
</tr>
<tr class="row-odd"><td>union</td>
<td>object</td>
<td>The object MUST contain a single single key-value pair. The key MUST be
one of the member names of the union shape, and the value MUST be
compatible with the corresponding shape.</td>
</tr>
</tbody>
</table>
<p>Trait values MUST be compatible with any constraint traits found related to the
shape being validated.</p>
</div>
</div>
<div class="section" id="scope-of-member-traits">
<h3>Scope of member traits<a class="headerlink" href="#scope-of-member-traits" title="Permalink to this headline">¶</a></h3>
<p>Traits that target <a class="reference internal" href="#member"><span class="std std-ref">member shapes</span></a> apply only in the
context of the member shape and do not affect the shape targeted by the
member. Traits applied to a <a class="reference internal" href="#member"><span class="std std-ref">member</span></a> shape supersede traits applied to
the shape referenced by the member and do not conflict.</p>
</div>
<div class="section" id="type-refinement-traits">
<h3>Type refinement traits<a class="headerlink" href="#type-refinement-traits" title="Permalink to this headline">¶</a></h3>
<div class="section" id="box-trait">
<span id="id38"></span><h4><code class="docutils literal notranslate"><span class="pre">box</span></code> trait<a class="headerlink" href="#box-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd><p class="first">Indicates that a shape is boxed. When a <a class="reference internal" href="#member"><span class="std std-ref">member</span></a> is marked
with this trait or the shape targeted by a member is marked with this
trait, the member may or may not contain a value, and the member has no
<a class="reference internal" href="#default-values"><span class="std std-ref">default value</span></a>.</p>
<p class="last">Boolean, byte, short, integer, long, float, and double shapes are only
considered boxed if they are marked with the <code class="docutils literal notranslate"><span class="pre">box</span></code> trait. All other
shapes are always considered boxed.</p>
</dd>
<dt>Trait selector</dt>
<dd><div class="first highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="nd">test</span><span class="o">(</span><span class="nt">boolean</span><span class="o">,</span> <span class="nt">byte</span><span class="o">,</span> <span class="nt">short</span><span class="o">,</span> <span class="nt">integer</span><span class="o">,</span> <span class="nt">long</span><span class="o">,</span> <span class="nt">float</span><span class="o">,</span> <span class="nt">double</span><span class="o">,</span>
      <span class="nt">member</span> <span class="o">&gt;</span> <span class="p">:</span><span class="nd">test</span><span class="o">(</span><span class="nt">boolean</span><span class="o">,</span> <span class="nt">byte</span><span class="o">,</span> <span class="nt">short</span><span class="o">,</span> <span class="nt">integer</span><span class="o">,</span> <span class="nt">long</span><span class="o">,</span> <span class="nt">float</span><span class="o">,</span> <span class="nt">double</span><span class="o">))</span>
</pre></div>
</div>
<p class="last"><em>A boolean, byte, short, integer, long, float, double shape or a member that targets one of these shapes</em></p>
</dd>
<dt>Value type</dt>
<dd>Annotation trait.</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">box</span></code> trait is primarily used to influence code generation. For example,
in Java, this might mean the value provided as the member of an aggregate
shape can be set to null. In a language like Rust, this might mean the value
is wrapped in an <a class="reference external" href="https://doc.rust-lang.org/std/option/enum.Option.html">Option type</a>.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@box</span>
<span class="kd">integer</span><span class="nc"> BoxedInteger</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#BoxedInteger&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#box&quot;</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>The <a class="reference internal" href="#prelude"><span class="std std-ref">prelude</span></a> contains predefined simple shapes that can be
used in all Smithy models, including boxed and unboxed shapes.</p>
</div>
<div class="section" id="deprecated-trait">
<span id="id39"></span><h4><code class="docutils literal notranslate"><span class="pre">deprecated</span></code> trait<a class="headerlink" href="#deprecated-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Marks a shape or member as deprecated.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">*</span></code></dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">deprecated</span></code> trait is a structure that supports the following members:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="25%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>message</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Provides a plain text message for a deprecated shape or member.</td>
</tr>
<tr class="row-odd"><td>since</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Provides a plain text date or version for when a shape or member was
deprecated.</td>
</tr>
</tbody>
</table>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@deprecated</span>
<span class="kd">string</span><span class="nc"> SomeString</span>

<span class="nd">@deprecated</span>(<span class="nl">message:</span> <span class="s2">&quot;This shape is no longer used.&quot;</span>, <span class="nl">since:</span> <span class="s2">&quot;1.3&quot;</span>)
<span class="kd">string</span><span class="nc"> OtherString</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#SomeString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#deprecated&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#OtherString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#deprecated&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;This shape is no longer used.&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;since&quot;</span><span class="p">:</span> <span class="s2">&quot;1.3&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="error-trait">
<span id="id40"></span><h4><code class="docutils literal notranslate"><span class="pre">error</span></code> trait<a class="headerlink" href="#error-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Indicates that a structure shape represents an error. All shapes
referenced by the <a class="reference internal" href="#operation-errors"><span class="std std-ref">errors list of an operation</span></a>
MUST be targeted with this trait.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">string</span></code> that MUST be set to &quot;client&quot; or &quot;server&quot; to indicate if the
client or server is at fault for the error.</dd>
<dt>Conflicts with</dt>
<dd><a class="reference internal" href="#trait-definition"><span class="std std-ref">trait definition</span></a></dd>
</dl>
<p>The following structure defines a throttling error.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@error</span>(<span class="s2">&quot;client&quot;</span>)
<span class="kd">structure</span><span class="nc"> ThrottlingError</span> {}
</pre></div>
</div>
</div>
</div>
<p>Note that this structure is lacking the <code class="docutils literal notranslate"><span class="pre">retryable</span></code> trait that generically
lets clients know that the error is retryable.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@error</span>(<span class="s2">&quot;client&quot;</span>)
<span class="nd">@retryable</span>
<span class="kd">structure</span><span class="nc"> ThrottlingError</span> {}
</pre></div>
</div>
</div>
</div>
<p>When using an HTTP-based protocol, it is recommended to add an
<a class="reference internal" href="http.html#httperror-trait"><span class="std std-ref">httpError trait</span></a> to use an appropriate HTTP status code with
the error.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@error</span>(<span class="s2">&quot;client&quot;</span>)
<span class="nd">@retryable</span>
<span class="nd">@httpError</span>(<span class="m">429</span>)
<span class="kd">structure</span><span class="nc"> ThrottlingError</span> {}
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">message</span></code> member of an error structure is special-cased. It contains
the human-readable message that describes the error. If the <code class="docutils literal notranslate"><span class="pre">message</span></code> member
is not defined in the structure, code generated for the error may not provide
an idiomatic way to access the error message (e.g., an exception message
in Java).</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@error</span>(<span class="s2">&quot;client&quot;</span>)
<span class="nd">@retryable</span>
<span class="nd">@httpError</span>(<span class="m">429</span>)
<span class="kd">structure</span><span class="nc"> ThrottlingError</span> {
    <span class="nd">@required</span>
    <span class="nl">message:</span> <span class="vc">String</span>,
}
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="constraint-traits">
<h3>Constraint traits<a class="headerlink" href="#constraint-traits" title="Permalink to this headline">¶</a></h3>
<p>Constraint traits are used to constrain the values that can be provided
for a shape.</p>
<div class="section" id="enum-trait">
<span id="id41"></span><h4><code class="docutils literal notranslate"><span class="pre">enum</span></code> trait<a class="headerlink" href="#enum-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Constrains the acceptable values of a string to a fixed set.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">string</span></code></dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">map</span></code> of enum constant values to structures optionally containing a name,
documentation, tags, and/or a deprecation flag.</dd>
</dl>
<p>Smithy models SHOULD apply the enum trait when string shapes have a fixed
set of allowable values.</p>
<p>The enum trait is a map of allowed string values to enum constant definition
structures. Enum values do not allow aliasing; all enum constant values MUST be
unique across the entire set.</p>
<p>An enum definition is a structure that supports the following optional
members:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>string</td>
<td><p class="first">Defines a constant name to use when referencing an enum value.</p>
<p>Enum constant names MUST start with an upper or lower case ASCII Latin
letter (<code class="docutils literal notranslate"><span class="pre">A-Z</span></code> or <code class="docutils literal notranslate"><span class="pre">a-z</span></code>), or the ASCII underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>) and be
followed by zero or more upper or lower case ASCII Latin letters
(<code class="docutils literal notranslate"><span class="pre">A-Z</span></code> or <code class="docutils literal notranslate"><span class="pre">a-z</span></code>), ASCII underscores (<code class="docutils literal notranslate"><span class="pre">_</span></code>), or ASCII digits
(<code class="docutils literal notranslate"><span class="pre">0-9</span></code>). That is, enum constant names MUST match the following
regular expression: <code class="docutils literal notranslate"><span class="pre">^[a-zA-Z_]+[a-zA-Z_0-9]*$</span></code>.</p>
<p class="last">The following stricter rules are recommended for consistency: Enum
constant names SHOULD NOT contain any lowercase ASCII Latin letters
(<code class="docutils literal notranslate"><span class="pre">a-z</span></code>) and SHOULD NOT start with an ASCII underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>). That
is, enum names SHOULD match the following regular expression:
<code class="docutils literal notranslate"><span class="pre">^[A-Z]+[A-Z_0-9]*$</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td>documentation</td>
<td>string</td>
<td>Defines documentation about the enum value in the <a class="reference external" href="https://spec.commonmark.org/">CommonMark</a> format.</td>
</tr>
<tr class="row-even"><td>tags</td>
<td><code class="docutils literal notranslate"><span class="pre">list&lt;string&gt;</span></code></td>
<td>Attaches a list of tags that allow the enum value to be categorized and
grouped.</td>
</tr>
<tr class="row-odd"><td>deprecated</td>
<td><code class="docutils literal notranslate"><span class="pre">boolean</span></code></td>
<td>Whether the enum value should be considered deprecated for consumers of
the Smithy model.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Consumers of a Smithy model MAY choose to represent enum values as
constants. Those that do SHOULD use the enum definition's <code class="docutils literal notranslate"><span class="pre">name</span></code>
property, if specified. Consumers that choose to represent enums as
constants SHOULD ensure that unknown enum names returned from a service
do not cause runtime failures.</p>
</div>
<p>The following example defines an enum of valid string values for <code class="docutils literal notranslate"><span class="pre">MyString</span></code>.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@enum</span>(
    <span class="nl">t2.nano:</span> {
        <span class="nl">name:</span> <span class="s2">&quot;T2_NANO&quot;</span>,
        <span class="nl">documentation:</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            T2 instances are Burstable Performance</span>
<span class="s2">            Instances that provide a baseline level of CPU</span>
<span class="s2">            performance with the ability to burst above the</span>
<span class="s2">            baseline.&quot;&quot;&quot;</span>,
        <span class="nl">tags:</span> [<span class="s2">&quot;ebsOnly&quot;</span>]
    },
    <span class="nl">t2.micro:</span> {
        <span class="nl">name:</span> <span class="s2">&quot;T2_MICRO&quot;</span>,
        <span class="nl">documentation:</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            T2 instances are Burstable Performance</span>
<span class="s2">            Instances that provide a baseline level of CPU</span>
<span class="s2">            performance with the ability to burst above the</span>
<span class="s2">            baseline.&quot;&quot;&quot;</span>,
        <span class="nl">tags:</span> [<span class="s2">&quot;ebsOnly&quot;</span>]
    },
    <span class="nl">m256.mega:</span> {
        <span class="nl">name:</span> <span class="s2">&quot;M256_MEGA&quot;</span>,
        <span class="nl">deprecated:</span> <span class="kc">true</span>
    }
)
<span class="kd">string</span><span class="nc"> MyString</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#enum&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;t2.nano&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;T2_NANO&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;T2 instances are ...&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;ebsOnly&quot;</span>
                        <span class="p">]</span>
                    <span class="p">},</span>
                    <span class="nt">&quot;t2.micro&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;T2_MICRO&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;T2 instances are ...&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;ebsOnly&quot;</span>
                        <span class="p">]</span>
                    <span class="p">},</span>
                    <span class="nt">&quot;m256.mega&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;M256_MEGA&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;deprecated&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="idref-trait">
<span id="id42"></span><h4><code class="docutils literal notranslate"><span class="pre">idRef</span></code> trait<a class="headerlink" href="#idref-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd><p class="first">Indicates that a string value MUST contain a valid absolute
<a class="reference internal" href="#shape-id"><span class="std std-ref">shape ID</span></a>.</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">idRef</span></code> trait is used primarily when declaring
<a class="reference internal" href="#trait-definition"><span class="std std-ref">trait definitions</span></a> in a model. A trait definition
that targets a string shape with the <code class="docutils literal notranslate"><span class="pre">idRef</span></code> trait indicates that when
the defined trait is applied to a shape, the value of the trait MUST be
a valid shape ID. The <code class="docutils literal notranslate"><span class="pre">idRef</span></code> trait can also be applied at any level of
nesting on shapes referenced by trait definitions.</p>
</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(string,</span> <span class="pre">member</span> <span class="pre">&gt;</span> <span class="pre">string)</span></code></p>
<p class="last"><em>A string shape or a member that targets a string shape</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">idRef</span></code> trait is a structure that supports the following optional
members:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>failWhenMissing</td>
<td><code class="docutils literal notranslate"><span class="pre">boolean</span></code></td>
<td>When set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the shape ID MUST target a shape that can be
found in the model.</td>
</tr>
<tr class="row-odd"><td>selector</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">Defines the <a class="reference internal" href="selectors.html#selectors"><span class="std std-ref">selector</span></a> that the resolved shape,
if found, MUST match.</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">selector</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">*</span></code> when not defined.</p>
</td>
</tr>
<tr class="row-even"><td>errorMessage</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">Defines a custom error message to use when the shape ID cannot be
found or does not match the <code class="docutils literal notranslate"><span class="pre">selector</span></code>.</p>
<p class="last">A default message is generated when <code class="docutils literal notranslate"><span class="pre">errorMessage</span></code> is not defined.</p>
</td>
</tr>
</tbody>
</table>
<p>To illustrate an example, a custom trait named <code class="docutils literal notranslate"><span class="pre">integerRef</span></code> is defined.
This trait can be attached to any shape, and the value of the trait MUST
contain a valid shape ID that targets an integer shape in the model.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@trait</span>
<span class="nd">@idRef</span>(<span class="nl">failWhenMissing:</span> <span class="kc">true</span>, <span class="nl">selector:</span> <span class="s2">&quot;integer&quot;</span>)
<span class="kd">string</span><span class="nc"> IntegerRefTraitValue</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#integerRef&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#trait&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#idRef&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;failWhenMissing&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Given the following model,</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@integerRef</span>(<span class="vc">NotFound</span>)
<span class="kd">string</span><span class="nc"> InvalidShape1</span>

<span class="nd">@integerRef</span>(<span class="vc">String</span>)
<span class="kd">string</span><span class="nc"> InvalidShape2</span>

<span class="nd">@integerRef</span>(<span class="s2">&quot;invalid-shape-id!&quot;</span>)
<span class="kd">string</span><span class="nc"> InvalidShape3</span>

<span class="nd">@integerRef</span>(<span class="vc">Integer</span>)
<span class="kd">string</span><span class="nc"> ValidShape</span>

<span class="nd">@integerRef</span>(<span class="vc">MyShape</span>)
<span class="kd">string</span><span class="nc"> ValidShape2</span>

<span class="kd">string</span><span class="nc"> MyShape</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#InvalidShape1&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#integerRef&quot;</span><span class="p">:</span> <span class="s2">&quot;NotFound&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#InvalidShape2&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#integerRef&quot;</span><span class="p">:</span> <span class="s2">&quot;String&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#InvalidShape3&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#integerRef&quot;</span><span class="p">:</span> <span class="s2">&quot;invalid-shape-id!&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#ValidShape&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#integerRef&quot;</span><span class="p">:</span> <span class="s2">&quot;Integer&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#ValidShape2&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#integerRef&quot;</span><span class="p">:</span> <span class="s2">&quot;MyShape&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyShape&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">InvalidShape1</span></code> is invalid because the &quot;NotFound&quot; shape cannot be
found in the model.</li>
<li><code class="docutils literal notranslate"><span class="pre">InvalidShape2</span></code> is invalid because &quot;smithy.api#String&quot; targets a
string which does not match the &quot;integer&quot; selector.</li>
<li><code class="docutils literal notranslate"><span class="pre">InvalidShape3</span></code> is invalid because &quot;invalid-shape-id!&quot; is not a
syntactically correct absolute shape ID.</li>
<li><code class="docutils literal notranslate"><span class="pre">ValidShape</span></code> is valid because &quot;smithy.api#Integer&quot; targets an integer.</li>
<li><code class="docutils literal notranslate"><span class="pre">ValidShape2</span></code> is valid because &quot;MyShape&quot; is a relative ID that targets
<code class="docutils literal notranslate"><span class="pre">smithy.example#MyShape</span></code>.</li>
</ul>
</div>
<div class="section" id="length-trait">
<span id="id43"></span><h4><code class="docutils literal notranslate"><span class="pre">length</span></code> trait<a class="headerlink" href="#length-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Constrains a shape to minimum and maximum number of elements or size.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(list,</span> <span class="pre">map,</span> <span class="pre">string,</span> <span class="pre">blob,</span> <span class="pre">member</span> <span class="pre">&gt;</span> <span class="pre">:each(list,</span> <span class="pre">map,</span> <span class="pre">string,</span> <span class="pre">blob))</span></code></p>
<p class="last"><em>Any list, map, string, or blob; or a member that targets one of these shapes</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>The length trait is a structure that contains the following members:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>min</td>
<td><code class="docutils literal notranslate"><span class="pre">number</span></code></td>
<td>Integer value that represents the minimum inclusive length of a shape.</td>
</tr>
<tr class="row-odd"><td>max</td>
<td><code class="docutils literal notranslate"><span class="pre">number</span></code></td>
<td>Integer value that represents the maximum inclusive length of a shape.</td>
</tr>
</tbody>
</table>
<p>At least one of min, max is required.</p>
<p>The following table describes what a length trait constrains when applied to
the corresponding shape:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Shape</th>
<th class="head">Length constrains</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>list</td>
<td>The number of members</td>
</tr>
<tr class="row-odd"><td>map</td>
<td>The number of key-value pairs</td>
</tr>
<tr class="row-even"><td>string</td>
<td>The number of Unicode code points</td>
</tr>
<tr class="row-odd"><td>blob</td>
<td>The size of the blob in bytes</td>
</tr>
</tbody>
</table>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@length</span>(<span class="nl">min:</span> <span class="m">1</span>, <span class="nl">max:</span> <span class="m">10</span>)
<span class="kd">string</span><span class="nc"> MyString</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#length&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mi">10</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="pattern-trait">
<span id="id44"></span><h4><code class="docutils literal notranslate"><span class="pre">pattern</span></code> trait<a class="headerlink" href="#pattern-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Restricts string shape values to a specified regular expression.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(string,</span> <span class="pre">member</span> <span class="pre">&gt;</span> <span class="pre">string)</span></code></p>
<p class="last"><em>A string or a member that targets a string</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">string</span></code></dd>
</dl>
<p>Smithy regular expressions MUST be valid regular expressions according to the
<a class="reference external" href="https://www.ecma-international.org/ecma-262/8.0/index.html#sec-patterns">ECMA 262 regular expression dialect</a>. Patterns SHOULD avoid the use of
conditionals, directives, recursion, lookahead, look-behind, back-references,
and look-around in order to ensure maximum compatibility across programming
languages.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@pattern</span>(<span class="s2">&quot;\\w+&quot;</span>)
<span class="kd">string</span><span class="nc"> MyString</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;\\w+&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="private-trait">
<span id="id45"></span><h4><code class="docutils literal notranslate"><span class="pre">private</span></code> trait<a class="headerlink" href="#private-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Prevents models defined in a different namespace from referencing the
targeted shape.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">*</span></code></dd>
<dt>Value type</dt>
<dd>Annotation trait</dd>
</dl>
<p>Shapes marked as <code class="docutils literal notranslate"><span class="pre">private</span></code> cannot be accessed outside of the namespace in
which the shape is defined. The <code class="docutils literal notranslate"><span class="pre">private</span></code> trait is meant only to control
access from within the model itself and SHOULD NOT influence code-generation
of the targeted shape.</p>
</div>
<div class="section" id="range-trait">
<span id="id46"></span><h4><code class="docutils literal notranslate"><span class="pre">range</span></code> trait<a class="headerlink" href="#range-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Restricts allowed values of byte, short, integer, long, float, double,
bigDecimal, and bigInteger shapes within an acceptable lower and upper
bound.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(number,</span> <span class="pre">member</span> <span class="pre">&gt;</span> <span class="pre">number)</span></code></p>
<p class="last"><em>A number or a member that targets a number</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>The length trait is a structure that contains the following members:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>min</td>
<td><code class="docutils literal notranslate"><span class="pre">bigDecimal</span></code></td>
<td>Specifies the allowed inclusive minimum value.</td>
</tr>
<tr class="row-odd"><td>max</td>
<td><code class="docutils literal notranslate"><span class="pre">bigDecimal</span></code></td>
<td>Specifies the allowed inclusive maximum value.</td>
</tr>
</tbody>
</table>
<p>At least one of <code class="docutils literal notranslate"><span class="pre">min</span></code> or <code class="docutils literal notranslate"><span class="pre">max</span></code> is required. <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> accept both
integers and real numbers. Real numbers may only be applied to float, double,
or bigDecimal shapes. <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> MUST fall within the allowable range
of the targeted numeric shape to which it is applied.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@range</span>(<span class="nl">min:</span> <span class="m">1</span>, <span class="nl">max:</span> <span class="m">10</span>)
<span class="kd">integer</span><span class="nc"> MyInt</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyInt&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#range&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mi">10</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="required-trait">
<span id="id47"></span><h4><code class="docutils literal notranslate"><span class="pre">required</span></code> trait<a class="headerlink" href="#required-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Marks a structure member as required, meaning a value for the member MUST
be present.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">member:of(structure)</span></code></p>
<p class="last"><em>Member of a structure</em></p>
</dd>
<dt>Value type</dt>
<dd>Annotation trait.</dd>
</dl>
<p>The required trait applies to structure data, operation input, output, and
errors. When a member that is part of the input of an operation is marked as
required, a client MUST provide a value for the member when calling the
operation. When a member that is part of the output of an operation or an
error is marked as required, a service MUST provide a value for the member
in a response.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">structure</span><span class="nc"> MyStructure</span> {
    <span class="nd">@required</span>
    <span class="nl">foo:</span> <span class="vc">FooString</span>,
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyStructure&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#FooString&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="uniqueitems-trait">
<span id="uniqueitems"></span><h4><code class="docutils literal notranslate"><span class="pre">uniqueItems</span></code> trait<a class="headerlink" href="#uniqueitems-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Indicates that the items in a <a class="reference internal" href="#list"><span class="std std-ref">list</span></a> MUST be unique.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(list</span> <span class="pre">&gt;</span> <span class="pre">member</span> <span class="pre">&gt;</span> <span class="pre">simpleType)</span></code></p>
<p class="last"><em>A list that targets any simple type.</em></p>
</dd>
<dt>Value type</dt>
<dd>Annotation trait.</dd>
</dl>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@uniqueItems</span>
<span class="kd">list</span><span class="nc"> MyList</span> {
    <span class="nl">member:</span> <span class="vc">String</span>,
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#uniqueItems&quot;</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="behavior-traits">
<h3>Behavior traits<a class="headerlink" href="#behavior-traits" title="Permalink to this headline">¶</a></h3>
<p>Behavior traits are used to alter the behavior of operations.</p>
<div class="section" id="idempotencytoken-trait">
<span id="id48"></span><h4><code class="docutils literal notranslate"><span class="pre">idempotencyToken</span></code> trait<a class="headerlink" href="#idempotencytoken-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Defines the input member of an operation that is used by the server to
identify and discard replayed requests.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(member:of(structure)</span> <span class="pre">&gt;</span> <span class="pre">string)</span></code></p>
<p class="last"><em>Any structure member that targets a string</em></p>
</dd>
<dt>Value type</dt>
<dd>Annotation trait</dd>
</dl>
<p>Only a single member of the input of an operation can be targeted by the
<code class="docutils literal notranslate"><span class="pre">idempotencyToken</span></code> trait; only top-level structure members of the input of an
operation are considered.</p>
<p>A unique identifier (typically a <a class="reference external" href="https://tools.ietf.org/html/rfc4122">UUID</a>) SHOULD be used by the client when
providing the value for the request token member. When the request token is
present, the service MUST ensure that the request is not replayed within a
service-defined period of time. This allows the client to safely retry
operation invocations, including operations that are not read-only, that fail
due to networking issues or internal server errors. The service uses the
provided request token to identify and discard duplicate requests.</p>
<p>Client implementations MAY automatically provide a value for a request token
member if and only if the member is not explicitly provided.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">operation</span><span class="nc"> AllocateWidget</span> {
    <span class="nl">input:</span> <span class="vc">AllocateWidgetInput</span>
}

<span class="kd">structure</span><span class="nc"> AllocateWidgetInput</span> {
    <span class="nd">@idempotencyToken</span>
    <span class="nl">clientToken:</span> <span class="vc">String</span>,
}
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="idempotent-trait">
<span id="id49"></span><h4><code class="docutils literal notranslate"><span class="pre">idempotent</span></code> trait<a class="headerlink" href="#idempotent-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Indicates that the intended effect on the server of multiple identical
requests with an operation is the same as the effect for a single such
request.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">operation</span></code></dd>
<dt>Value type</dt>
<dd>Annotation trait</dd>
<dt>Conflicts with</dt>
<dd><a class="reference internal" href="#readonly-trait"><span class="std std-ref">readonly trait</span></a></dd>
</dl>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@idempotent</span>
<span class="kd">operation</span><span class="nc"> GetSomething</span> {
    <span class="nl">input:</span> <span class="vc">DeleteSomething</span>,
    <span class="nl">output:</span> <span class="vc">DeleteSomethingOutput</span>
}
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All operations that are marked as <a class="reference internal" href="#readonly-trait"><span class="std std-ref">readonly trait</span></a> are inherently
idempotent.</p>
</div>
</div>
<div class="section" id="readonly-trait">
<span id="id50"></span><h4><code class="docutils literal notranslate"><span class="pre">readonly</span></code> trait<a class="headerlink" href="#readonly-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Indicates that an operation is effectively read-only.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">operation</span></code></dd>
<dt>Value type</dt>
<dd>Annotation trait</dd>
<dt>Conflicts with</dt>
<dd><a class="reference internal" href="#idempotent-trait"><span class="std std-ref">idempotent trait</span></a></dd>
</dl>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@readonly</span>
<span class="kd">operation</span><span class="nc"> GetSomething</span> {
    <span class="nl">input:</span> <span class="vc">GetSomethingInput</span>,
    <span class="nl">output:</span> <span class="vc">GetSomethingOutput</span>
}
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="retryable-trait">
<span id="id51"></span><h4><code class="docutils literal notranslate"><span class="pre">retryable</span></code> trait<a class="headerlink" href="#retryable-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Indicates that an error MAY be retried by the client.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">structure[trait|error]</span></code></p>
<p class="last"><em>A structure shape with the error trait</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>The retryable trait is a structure that contains the following members:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>throttling</td>
<td><code class="docutils literal notranslate"><span class="pre">boolean</span></code></td>
<td>Indicates that the error is a retryable throttling error.</td>
</tr>
</tbody>
</table>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@error</span>(<span class="s2">&quot;server&quot;</span>)
<span class="nd">@retryable</span>
<span class="nd">@httpError</span>(<span class="m">503</span>)
<span class="kd">structure</span><span class="nc"> ServiceUnavailableError</span> {}

<span class="nd">@error</span>(<span class="s2">&quot;client&quot;</span>)
<span class="nd">@retryable</span>(<span class="nl">throttling:</span> <span class="kc">true</span>)
<span class="nd">@httpError</span>(<span class="m">429</span>)
<span class="kd">structure</span><span class="nc"> ThrottlingError</span> {}
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="paginated-trait">
<span id="pagination"></span><span id="id52"></span><h4><code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait<a class="headerlink" href="#paginated-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>The <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait indicates that an operation intentionally limits
the number of results returned in a single response and that multiple
invocations might be necessary to retrieve all results.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(operation,</span> <span class="pre">service)</span></code></p>
<p class="last"><em>An operation or service</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>Pagination is the process of dividing large result sets into discrete
pages. Smithy provides a built-in pagination mechanism that utilizes a
cursor.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait is a structure that contains the following members:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>inputToken</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">The name of the operation input member that contains a continuation
token. When this value is provided as input, the service returns
results from where the previous response left off. This input member
MUST NOT be marked as <code class="docutils literal notranslate"><span class="pre">required</span></code> and MUST target a string shape.</p>
<p class="last">When contained within a service, a paginated operation MUST either
configure <code class="docutils literal notranslate"><span class="pre">inputToken</span></code> on the operation itself or inherit it from
the service that contains the operation.</p>
</td>
</tr>
<tr class="row-odd"><td>outputToken</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">The path to the operation output member that contains an optional
continuation token. When this value is present in operation output,
it indicates that there are more results to retrieve. To get the next
page of results, the client passes the received output continuation
token to the input continuation token of the next request. This
output member MUST NOT be marked as <code class="docutils literal notranslate"><span class="pre">required</span></code> and MUST target a
string shape.</p>
<p class="last">When contained within a service, a paginated operation MUST either
configure <code class="docutils literal notranslate"><span class="pre">outputToken</span></code> on the operation itself or inherit it from
the service that contains the operation.</p>
</td>
</tr>
<tr class="row-even"><td>items</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>The path to an output member of the operation that contains
the data that is being paginated across many responses. The named
output member, if specified, MUST target a list or map.</td>
</tr>
<tr class="row-odd"><td>pageSize</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><p class="first">The name of an operation input member that limits the maximum number
of results to include in the operation output. This input member
SHOULD NOT be required and MUST target an integer shape.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not attempt to fill response pages to meet the value provided
for the <code class="docutils literal notranslate"><span class="pre">pageSize</span></code> member of a paginated operation. Attempting to
match a target number of elements results in an unbounded API with
an unpredictable latency.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p>The following example defines a paginated operation that sets each value
explicitly on the operation.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@collection</span> <span class="nd">@readonly</span>
<span class="nd">@paginated</span>(<span class="nl">inputToken:</span> <span class="s2">&quot;nextToken&quot;</span>, <span class="nl">outputToken:</span> <span class="s2">&quot;nextToken&quot;</span>,
           <span class="nl">pageSize:</span> <span class="s2">&quot;maxResults&quot;</span>, <span class="nl">items:</span> <span class="s2">&quot;foos&quot;</span>)
<span class="kd">operation</span><span class="nc"> GetFoos</span> {
    <span class="nl">input:</span> <span class="vc">GetFoosInput</span>,
    <span class="nl">output:</span> <span class="vc">GetFoosOutput</span>
}

<span class="kd">structure</span><span class="nc"> GetFoosInput</span> {
    <span class="nl">maxResults:</span> <span class="vc">Integer</span>,
    <span class="nl">nextToken:</span> <span class="vc">String</span>
}

<span class="kd">structure</span><span class="nc"> GetFoosOutput</span> {
    <span class="nl">nextToken:</span> <span class="vc">String</span>,

    <span class="nd">@required</span>
    <span class="nl">foos:</span> <span class="vc">StringList</span>,
}

<span class="kd">list</span><span class="nc"> StringList</span> {
    <span class="nl">member:</span> <span class="vc">String</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#GetFoos&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetFoosInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetFoosOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#collection&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#paginated&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;inputToken&quot;</span><span class="p">:</span> <span class="s2">&quot;nextToken&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;outputToken&quot;</span><span class="p">:</span> <span class="s2">&quot;nextToken&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;pageSize&quot;</span><span class="p">:</span> <span class="s2">&quot;maxResults&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;items&quot;</span><span class="p">:</span> <span class="s2">&quot;foos&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetFoosInput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;maxResults&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Integer&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;nextToken&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetFoosOutput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;nextToken&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;foos&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#StringList&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#StringList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Attaching the <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait to a service provides default pagination
configuration settings to all operations bound within the closure of the
service. Pagination settings configured on an operation override any inherited
service setting.</p>
<p>The following example defines a paginated operation that inherits some
settings from a service.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@paginated</span>(<span class="nl">inputToken:</span> <span class="s2">&quot;nextToken&quot;</span>, <span class="nl">outputToken:</span> <span class="s2">&quot;nextToken&quot;</span>,
           <span class="nl">pageSize:</span> <span class="s2">&quot;maxResults&quot;</span>)
<span class="kd">service</span><span class="nc"> Example</span> {
    <span class="nl">version:</span> <span class="s2">&quot;2019-06-27&quot;</span>,
    <span class="nl">operations:</span> [<span class="vc">GetFoos</span>],
}

<span class="nd">@collection</span> <span class="nd">@readonly</span> <span class="nd">@paginated</span>(<span class="nl">items:</span> <span class="s2">&quot;foos&quot;</span>)
<span class="kd">operation</span><span class="nc"> GetFoos</span> {
    <span class="nl">input:</span> <span class="vc">GetFoosInput</span>,
    <span class="nl">output:</span> <span class="vc">GetFoosOutput</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Example&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-06-27&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#paginated&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;inputToken&quot;</span><span class="p">:</span> <span class="s2">&quot;nextToken&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;outputToken&quot;</span><span class="p">:</span> <span class="s2">&quot;nextToken&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;pageSize&quot;</span><span class="p">:</span> <span class="s2">&quot;maxResults&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetFoos&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetFoosInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetFoosOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#collection&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#paginated&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;items&quot;</span><span class="p">:</span> <span class="s2">&quot;foos&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>The values for <code class="docutils literal notranslate"><span class="pre">outputToken</span></code> and <code class="docutils literal notranslate"><span class="pre">items</span></code> are paths. <em class="dfn">Paths</em> are a series of
identifiers separated by dots (<code class="docutils literal notranslate"><span class="pre">.</span></code>) where each identifier represents a
member name in a structure. The first member name MUST correspond to a member
of the output structure and each subsequent member name MUST correspond to a
member in the previously referenced structure. Paths MUST adhere to the
following ABNF.</p>
<pre>
<strong id="grammar-token-path">path</strong> =
    <a class="reference internal" href="language-specification.html#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> *(&quot;.&quot; <a class="reference internal" href="language-specification.html#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a>)
</pre>
<p>The following example defines a paginated operation which uses a result
wrapper where the output token and items are referenced by paths.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@readonly</span>
<span class="nd">@paginated</span>(<span class="nl">inputToken:</span> <span class="s2">&quot;nextToken&quot;</span>, <span class="nl">outputToken:</span> <span class="s2">&quot;result.nextToken&quot;</span>,
           <span class="nl">pageSize:</span> <span class="s2">&quot;maxResults&quot;</span>, <span class="nl">items:</span> <span class="s2">&quot;result.foos&quot;</span>)
<span class="kd">operation</span><span class="nc"> GetFoos</span> {
    <span class="nl">input:</span> <span class="vc">GetFoosInput</span>,
    <span class="nl">output:</span> <span class="vc">GetFoosOutput</span>
}

<span class="kd">structure</span><span class="nc"> GetFoosInput</span> {
    <span class="nl">maxResults:</span> <span class="vc">Integer</span>,
    <span class="nl">nextToken:</span> <span class="vc">String</span>
}

<span class="kd">structure</span><span class="nc"> GetFoosOutput</span> {
    <span class="nd">@required</span>
    <span class="nl">result:</span> <span class="vc">ResultWrapper</span>
}

<span class="kd">structure</span><span class="nc"> ResultWrapper</span> {
    <span class="nl">nextToken:</span> <span class="vc">String</span>,

    <span class="nd">@required</span>
    <span class="nl">foos:</span> <span class="vc">StringList</span>,
}

<span class="kd">list</span><span class="nc"> StringList</span> {
    <span class="nl">member:</span> <span class="vc">String</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#GetFoos&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetFoosInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetFoosOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#paginated&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;inputToken&quot;</span><span class="p">:</span> <span class="s2">&quot;nextToken&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;outputToken&quot;</span><span class="p">:</span> <span class="s2">&quot;result.nextToken&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;pageSize&quot;</span><span class="p">:</span> <span class="s2">&quot;maxResults&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;items&quot;</span><span class="p">:</span> <span class="s2">&quot;result.foos&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetFoosInput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;maxResults&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Integer&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;nextToken&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetFoosOutput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ResultWrapper&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#ResultWrapper&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;nextToken&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;foos&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#StringList&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#StringList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pagination-behavior">
<h5>Pagination Behavior<a class="headerlink" href="#pagination-behavior" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li>If an operation returns a naturally size-limited subset of data
(e.g., a top-ten list of users sorted by rank), then the operation
SHOULD NOT be paginated.</li>
<li>Only one list or map per operation can be paginated.</li>
<li>Paginated responses MUST NOT return the same item of a paginated result
set more than once (i.e., a paginated result set is a disjoint union of the
subsets partitioned by the referenced <code class="docutils literal notranslate"><span class="pre">pageSize</span></code> input member and the SLA
defined by the service).</li>
<li>If a paginated request returns data in a sorted order that is not an
immutable strict total ordering of items, then the paginated request MUST
provide a temporally static view of the underlying data that does not
modify the order topology during pagination. For example, a game’s
leaderboard of top-scoring players cannot have players move from position
#10 to position #12 during pagination, the last player on page N has to
have a higher score than the first player on page N+1, no players that
exist when pagination begins are to be skipped, and players MUST NOT be
repeated due to moves in the underlying data.</li>
<li>If pagination is ordered and newly created resources are returned, then
newly created resources MUST appear in order on the appropriate page.</li>
</ol>
</div>
<div class="section" id="client-behavior">
<h5>Client behavior<a class="headerlink" href="#client-behavior" title="Permalink to this headline">¶</a></h5>
<p>Smithy clients SHOULD provide abstractions that can be used to automatically
iterate over paginated responses. The following steps describe the process a
client MUST follow when iterating over paginated API calls:</p>
<ol class="arabic simple">
<li>Send the initial request to a paginated operation.</li>
<li>If the received response does not contain a continuation token in the
referenced <code class="docutils literal notranslate"><span class="pre">outputToken</span></code> member, then there are no more results to
retrieve and the process is complete.</li>
<li>If there is a continuation token in the referenced <code class="docutils literal notranslate"><span class="pre">outputToken</span></code> member
of the response, then the client sends a subsequent request using the same
input parameters as the original call, but including the last received
continuation token. Clients are free to change the designated <code class="docutils literal notranslate"><span class="pre">pageSize</span></code>
input parameter at this step as needed.</li>
<li>If a client receives an identical continuation token from a service in back
to back calls, then the client MAY choose to stop sending requests. This
scenario implies a &quot;tail&quot; style API operation where clients are running in
an infinite loop to send requests to a service in order to retrieve results
as they are available.</li>
<li>Return to step 2.</li>
</ol>
</div>
<div class="section" id="continuation-tokens">
<h5>Continuation tokens<a class="headerlink" href="#continuation-tokens" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait indicates that an operation utilizes cursor-based
pagination. When a paginated operation truncates its output, it MUST return a
continuation token in the operation output that can be used to get the next
page of results. This token can then be provided along with the original input
to request additional results from the operation.</p>
<ol class="arabic">
<li><p class="first"><strong>Continuation tokens SHOULD be opaque.</strong></p>
<p>Plain text continuation tokens inappropriately expose implementation details
to the client, resulting in consumers building systems that manually
construct continuation tokens. Making backwards compatible changes to a
plain text continuation token format is extremely hard to manage.</p>
</li>
<li><p class="first"><strong>Continuation tokens SHOULD be versioned.</strong></p>
<p>The parameters and context needed to paginate an API call can evolve over
time. To future-proof these APIs, services SHOULD include some kind of
version identifier in their continuation tokens. Once the version identifier
of a token is recognized, a service will then know the appropriate operation
for decoding and returning the next response for a paginated request.</p>
</li>
<li><p class="first"><strong>Continuation tokens SHOULD expire after a period of time.</strong></p>
<p>Continuation tokens SHOULD expire after a short period of time (e.g., 24
hours is a reasonable default for many services). This allows services
to quickly phase out deprecated continuation token formats, and helps to set
the expectation that continuation tokens are ephemeral and MUST NOT be used
after extended periods of time. Services MUST reject a request with a client
error when a client uses an expired continuation token.</p>
</li>
<li><p class="first"><strong>Continuation tokens MUST be bound to a fixed set of filtering parameters.</strong></p>
<p>Services MUST reject a request that changes filtering input parameters while
paging through responses. Services MUST require clients to send the same
filtering request parameters used in the initial pagination request to all
subsequent pagination requests.</p>
<p><em class="dfn">Filtering parameters</em> are defined as parameters that remove certain
elements from appearing in the result set of a paginated API call. Filtering
parameters do not influence the presentation of results (e.g., the
designated <code class="docutils literal notranslate"><span class="pre">pageSize</span></code> input parameter partitions a result set into smaller
subsets but does not change the sum of the parts). Services MUST allow
clients to change presentation based parameters while paginating through a
result set.</p>
</li>
<li><p class="first"><strong>Continuation tokens MUST NOT influence authorization.</strong></p>
<p>A service MUST NOT evaluate authorization differently depending on the
presence, absence, or contents of a continuation token.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="section" id="resource-traits">
<h3>Resource traits<a class="headerlink" href="#resource-traits" title="Permalink to this headline">¶</a></h3>
<div class="section" id="references-trait">
<span id="id53"></span><h4><code class="docutils literal notranslate"><span class="pre">references</span></code> trait<a class="headerlink" href="#references-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd><p class="first">Defines the <a class="reference internal" href="#resource"><span class="std std-ref">Resource</span></a> shapes that are referenced by a string shape
or a structure shape and the members of the structure that provide values
for the <a class="reference internal" href="#resource-identifiers"><span class="std std-ref">identifiers</span></a> of the resource.</p>
<p class="last">References provide the ability for tooling to <em>dereference</em> a resource
reference at runtime. For example, if a client receives a response from a
service that contains references, the client could provide functionality
to resolve references by name, allowing the end-user to invoke operations
on a specific referenced resource.</p>
</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(structure,</span> <span class="pre">string)</span></code></p>
<p class="last"><em>Any structure or string</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">Reference</span></code> structures</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">references</span></code> trait is a list of <code class="docutils literal notranslate"><span class="pre">Reference</span></code> structures that contain
the following members:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="23%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>service</td>
<td><a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a></td>
<td>The absolute shape ID of the service to which the resource is bound.
As with the <code class="docutils literal notranslate"><span class="pre">resource</span></code> property, the provided shape ID is not
required to be resolvable at build time.</td>
</tr>
<tr class="row-odd"><td>resource</td>
<td><a class="reference internal" href="#shape-id"><span class="std std-ref">Shape ID</span></a></td>
<td><p class="first"><strong>Required</strong>. The absolute shape ID of the referenced resource.</p>
<p class="last">The provided shape ID is not required to be part of the model;
references may refer to resources in other models without directly
depending on the external package in which the resource is defined.
The reference will not be resolvable at build time but MAY be resolvable
at runtime if the tool has loaded more than one model.</p>
</td>
</tr>
<tr class="row-even"><td>ids</td>
<td><code class="docutils literal notranslate"><span class="pre">map&lt;string,</span> <span class="pre">string&gt;</span></code></td>
<td><p class="first">Defines a mapping of each resource identifier name to a structure
member name that provides its value. Each key in the map MUST refer
to one of the identifier names in the identifiers property of the
resource, and each value in the map MUST refer to a valid structure
member name that targets a string shape.</p>
<ul class="last simple">
<li>This property MUST be omitted if the <code class="docutils literal notranslate"><span class="pre">references</span></code> trait is applied
to a string shape.</li>
<li>This property MAY be omitted if the identifiers of the resource
can be <a class="reference internal" href="#implicit-ids"><span class="std std-ref">mapped implicitly</span></a>.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>rel</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Defines the semantics of the relationship. The <code class="docutils literal notranslate"><span class="pre">rel</span></code> property SHOULD
contain a link relation as defined in <span class="target" id="index-3"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc5988.html#section-4"><strong>RFC 5988#section-4</strong></a> (i.e.,
this value SHOULD contain either a <a class="reference external" href="https://www.iana.org/assignments/link-relations/link-relations.xhtml">standard link relation</a> or URI).</td>
</tr>
</tbody>
</table>
<p>References MAY NOT be resolvable at runtime in the following circumstances:</p>
<ol class="arabic simple">
<li>The members that make up the <code class="docutils literal notranslate"><span class="pre">ids</span></code> are not present in a structure at
runtime (e.g., a member is not marked as <a class="reference internal" href="#required-trait"><span class="std std-ref">required trait</span></a>)</li>
<li>The targeted resource and/or service shape is not part of the model</li>
<li>The reference is bound to a specific service that is unknown to the tool</li>
</ol>
<p>The following example defines several references:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@references</span>([
    {<span class="nl">resource:</span> <span class="vc">Forecast</span>},
    {<span class="nl">resource:</span> <span class="vc">ShapeName</span>},
    {<span class="nl">resource:</span> <span class="vc">Meteorologist</span>},
    {
        <span class="nl">resource:</span> <span class="vc">com.foo.baz#Object</span>,
        <span class="nl">service:</span> <span class="vc">com.foo.baz#Service</span>,
        <span class="nl">ids:</span> {<span class="nl">bucket:</span> <span class="s2">&quot;bucketName&quot;</span>, <span class="nl">object:</span> <span class="s2">&quot;objectKey&quot;</span>},
    ])
<span class="kd">structure</span><span class="nc"> ForecastInformation</span> {
    <span class="nl">someId:</span> <span class="vc">SomeShapeIdentifier</span>,

    <span class="nd">@required</span>
    <span class="nl">forecastId:</span> <span class="vc">ForecastId</span>,

    <span class="nd">@required</span>
    <span class="nl">meteorologistId:</span> <span class="vc">MeteorologistId</span>,

    <span class="nd">@required</span>
    <span class="nl">otherData:</span> <span class="vc">SomeOtherShape</span>,

    <span class="nd">@required</span>
    <span class="nl">bucketName:</span> <span class="vc">BucketName</span>,

    <span class="nd">@required</span>
    <span class="nl">objectKey:</span> <span class="vc">ObjectKey</span>,
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="implicit-ids">
<span id="id54"></span><h5>Implicit ids<a class="headerlink" href="#implicit-ids" title="Permalink to this headline">¶</a></h5>
<p>The &quot;ids&quot; property of a reference MAY be omitted in any of the following
conditions:</p>
<ol class="arabic simple">
<li>The shape that the references trait is applied to is a string shape.</li>
<li>The shape that the references trait is applied to is a structure shape
and all of the identifier names of the resource have corresponding member
names that target string shapes.</li>
</ol>
</div>
</div>
<div class="section" id="resourceidentifier-trait">
<span id="id55"></span><h4><code class="docutils literal notranslate"><span class="pre">resourceIdentifier</span></code> trait<a class="headerlink" href="#resourceidentifier-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Indicates that the targeted structure member provides an identifier for a
resource.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(member:of(structure)[trait|required]</span> <span class="pre">&gt;</span> <span class="pre">string)</span></code></p>
<p class="last"><em>Any required member of a structure that targets a string</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">string</span></code></dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">resourceIdentifier</span></code> trait may only be used on members of structures that
serve as input shapes for operations bound to resources. The string value
provided must correspond to the name of an identifier for said resource. The
trait is not required when the name of the input structure member is an exact
match for the name of the resource identifier.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">resource</span><span class="nc"> File</span> {
    <span class="nl">identifiers:</span> {
        <span class="nl">directory:</span> <span class="s2">&quot;String&quot;</span>,
        <span class="nl">fileName:</span> <span class="s2">&quot;String&quot;</span>,
    },
    <span class="nl">read:</span> <span class="vc">GetFile</span>,
}

<span class="nd">@readonly</span>
<span class="kd">operation</span><span class="nc"> GetFile</span> {
    <span class="nl">input:</span> <span class="vc">GetFileInput</span>,
    <span class="nl">output:</span> <span class="vc">GetFileOutput</span>,
    <span class="nl">errors:</span> [<span class="vc">NoSuchResource</span>]
}

<span class="kd">structure</span><span class="nc"> GetFileInput</span> {
    <span class="nd">@required</span>
    <span class="nl">directory:</span> <span class="vc">String</span>,

    <span class="c">// resourceIdentifier is used because the input member name</span>
    <span class="c">// does not match the resource identifier name</span>
    <span class="nd">@resourceIdentifier</span>(<span class="s2">&quot;fileName&quot;</span>)
    <span class="nd">@required</span>
    <span class="nl">name:</span> <span class="vc">String</span>,
}
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="protocol-traits">
<h3>Protocol traits<a class="headerlink" href="#protocol-traits" title="Permalink to this headline">¶</a></h3>
<p>Serialization and protocols traits define how data is transferred over
the wire.</p>
<div class="section" id="protocols-trait">
<span id="id56"></span><h4><code class="docutils literal notranslate"><span class="pre">protocols</span></code> trait<a class="headerlink" href="#protocols-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Defines the protocols supported by a service.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">service</span></code></dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">list</span></code> of protocol <code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>Smithy is protocol agnostic, which means it focuses on the interfaces and
abstractions that are provided to end-users rather than how the data is sent
over the wire. In Smithy, a <em>protocol</em> is a named set of rules that defines
the syntax and semantics of how a client and server communicate. A protocol
name defines both the application protocol of a service and the serialization
formats used in messages. These serialization formats MAY be influenced by
payload serialization traits like <a class="reference internal" href="#jsonname-trait"><span class="std std-ref">jsonName trait</span></a> and
<a class="reference internal" href="xml.html#xmlattribute-trait"><span class="std std-ref">xmlAttribute trait</span></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">protocols</span></code> trait of a service defines a priority ordered list of
protocols supported by the service and the authentication schemes that each
protocol supports. A client MUST understand at least one of the protocols in
order to successfully communicate with the service.</p>
<p>The value of the <code class="docutils literal notranslate"><span class="pre">protocols</span></code> trait is a list of protocol structures. Each
protocol structure supports the following members:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><strong>Required</strong>. The name of the protocol. The name MUST be unique across
the entire list and MUST match the following regular expression:
<code class="docutils literal notranslate"><span class="pre">^[a-z][a-z0-9\-.+]*$</span></code>.</td>
</tr>
<tr class="row-odd"><td>auth</td>
<td><code class="docutils literal notranslate"><span class="pre">list&lt;string&gt;</span></code></td>
<td>A priority ordered list of authentication schemes supported by this
protocol. Each value MUST match the following regular expression:
<code class="docutils literal notranslate"><span class="pre">^[a-z][a-z0-9\-.+]*$</span></code>.</td>
</tr>
<tr class="row-even"><td>tags</td>
<td><code class="docutils literal notranslate"><span class="pre">list&lt;string&gt;</span></code></td>
<td>Attaches a list of tags that allow the protocol to be categorized and
grouped.</td>
</tr>
</tbody>
</table>
<p>The following example defines a service that supports both the
&quot;smithy.example&quot; protocol and the &quot;aws.mqtt&quot; protocols. The
&quot;aws.mqtt&quot; protocol is defined with an optional list of tags.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@protocols</span>([
    {<span class="nl">name:</span> <span class="s2">&quot;smithy.example&quot;</span>, <span class="nl">auth:</span> [<span class="s2">&quot;http-basic&quot;</span>]},
    {<span class="nl">name:</span> <span class="s2">&quot;aws.mqtt&quot;</span>, <span class="nl">auth:</span> [<span class="s2">&quot;x.509&quot;</span>], <span class="nl">tags:</span> [<span class="s2">&quot;internal&quot;</span>]}])
<span class="kd">service</span><span class="nc"> WeatherService</span> {
    <span class="nl">version:</span> <span class="s2">&quot;2017-02-11&quot;</span>,
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#WeatherService&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#protocols&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;auth&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;http-basic&quot;</span>
                        <span class="p">]</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;aws.mqtt&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;auth&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;x.509&quot;</span>
                        <span class="p">],</span>
                        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;internal&quot;</span>
                        <span class="p">]</span>
                    <span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>An operation bound to a service is expected to support every listed <code class="docutils literal notranslate"><span class="pre">auth</span></code>
scheme of every protocol unless the operation or the service is annotated
with the <a class="reference internal" href="#auth-trait"><span class="std std-ref">auth trait</span></a>.</p>
<div class="section" id="built-in-auth-schemes">
<h5>Built-in auth schemes<a class="headerlink" href="#built-in-auth-schemes" title="Permalink to this headline">¶</a></h5>
<p>Smithy defines the following built-in authentication schemes that can be
used with the <code class="docutils literal notranslate"><span class="pre">protocols</span></code> trait.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Scheme</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>http-basic</td>
<td>HTTP Basic Authentication as defined in <span class="target" id="index-4"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2617.html"><strong>RFC 2617</strong></a>.</td>
</tr>
<tr class="row-odd"><td>http-digest</td>
<td>HTTP Digest Authentication as defined in <span class="target" id="index-5"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2617.html"><strong>RFC 2617</strong></a>.</td>
</tr>
<tr class="row-even"><td>http-bearer</td>
<td>HTTP Bearer Authentication as defined in <span class="target" id="index-6"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc6750.html"><strong>RFC 6750</strong></a>.</td>
</tr>
<tr class="row-odd"><td>http-x-api-key</td>
<td>An HTTP-specific authentication scheme that sends an arbitrary
API key in the &quot;X-Api-Key&quot; HTTP header.</td>
</tr>
<tr class="row-even"><td>none</td>
<td>Indicates that the API can be called without authentication.</td>
</tr>
</tbody>
</table>
<p>Custom authentication schemes MAY be referenced in Smithy models and
SHOULD utilize some kind of prefix to prevent collisions with other
custom schemes (for example, &quot;aws.v4&quot; is preferred over just &quot;v4&quot;).</p>
</div>
</div>
<div class="section" id="auth-trait">
<span id="id57"></span><h4><code class="docutils literal notranslate"><span class="pre">auth</span></code> trait<a class="headerlink" href="#auth-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Defines the priority ordered authentication schemes supported by a service
or operation. When applied to a service, it defines the default
authentication schemes of every operation in the service. When applied
to an operation, it defines the list of all authentication schemes
supported by the operation, overriding any <code class="docutils literal notranslate"><span class="pre">auth</span></code> trait specified
on a service.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(service,</span> <span class="pre">operation)</span></code></p>
<p class="last"><em>Service or operation shapes</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">list&lt;string&gt;</span></code> which represents a priority ordered list of values that
reference authentication schemes defined on a service shape.</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">auth</span></code> trait is used to explicitly define which authentication schemes
defined by the <a class="reference internal" href="#protocols-trait"><span class="std std-ref">protocols trait</span></a> of a service are supported by an
operation.</p>
<p>Operations that are not annotated with the <code class="docutils literal notranslate"><span class="pre">auth</span></code> trait inherit the <code class="docutils literal notranslate"><span class="pre">auth</span></code>
trait of the service they are bound to, and if the service is not annotated
with the <code class="docutils literal notranslate"><span class="pre">auth</span></code> trait, then the operation is expected to support each of
the authentication schemes defined by all of the protocols of the service.
Each entry in the <code class="docutils literal notranslate"><span class="pre">auth</span></code> trait MUST map to a corresponding <code class="docutils literal notranslate"><span class="pre">auth</span></code>
property in the <code class="docutils literal notranslate"><span class="pre">protocols</span></code> trait of a service with the exception of the
&quot;none&quot; auth scheme which can be used without defining it in a protocol.</p>
<p>When connecting to a service using a specific protocol, only the intersection
of the <code class="docutils literal notranslate"><span class="pre">auth</span></code> schemes listed in the selected protocol and the <code class="docutils literal notranslate"><span class="pre">auth</span></code>
schemes defined in the resolved <code class="docutils literal notranslate"><span class="pre">auth</span></code> trait are eligible for the client
to use.</p>
<p>The following example defines two operations:</p>
<ul class="simple">
<li>OperationA defines an explicit list of the authentication schemes it
supports using the <code class="docutils literal notranslate"><span class="pre">auth</span></code> trait.</li>
<li>OperationB does is not annotated with the <code class="docutils literal notranslate"><span class="pre">auth</span></code> trait, so the schemes
supported by this operation inherit from the <code class="docutils literal notranslate"><span class="pre">protocols</span></code> trait defined
on the service.</li>
</ul>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@protocols</span>([{<span class="nl">name:</span> <span class="s2">&quot;smithy.example&quot;</span>, <span class="nl">auth:</span> [<span class="s2">&quot;http-basic&quot;</span>, <span class="s2">&quot;http-digest&quot;</span>]}])
<span class="c">// Every operation by default should support http-basic and http-digest.</span>
<span class="nd">@auth</span>([<span class="s2">&quot;http-basic&quot;</span>, <span class="s2">&quot;http-digest&quot;</span>])
<span class="kd">service</span><span class="nc"> AuthenticatedService</span> {
    <span class="nl">version:</span> <span class="s2">&quot;2017-02-11&quot;</span>,
    <span class="nl">operations:</span> [<span class="vc">OperationA</span>, <span class="vc">OperationB</span>]
}

<span class="c">// This operation is configured to either be unauthenticated</span>
<span class="c">// or to use http-basic. It is not expected to support http-digest.</span>
<span class="nd">@auth</span>([<span class="s2">&quot;none&quot;</span>, <span class="s2">&quot;http-basic&quot;</span>])
<span class="kd">operation</span><span class="nc"> OperationA</span> {}

<span class="c">// This operation defines no auth, so it is expected to support the auth</span>
<span class="c">// defined on the service: http-basic and http-digest.</span>
<span class="kd">operation</span><span class="nc"> OperationB</span> {}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#AuthenticatedService&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#OperationA&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#OperationB&quot;</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#protocols&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;auth&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;http-basic&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;http-digest&quot;</span>
                        <span class="p">]</span>
                    <span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#OperationA&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#auth&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;none&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;http-basic&quot;</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#OperationB&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>The following <code class="docutils literal notranslate"><span class="pre">auth</span></code> trait is invalid because it uses an <code class="docutils literal notranslate"><span class="pre">auth</span></code> trait
scheme that is not supported by any of the <code class="docutils literal notranslate"><span class="pre">protocols</span></code> of the service:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@protocols</span>([{<span class="nl">name:</span> <span class="s2">&quot;smithy.example&quot;</span>, <span class="nl">auth:</span> [<span class="s2">&quot;http-basic&quot;</span>]}])
<span class="nd">@auth</span>([<span class="s2">&quot;http-digest&quot;</span>]) <span class="c">// &lt;-- Invalid!</span>
<span class="kd">service</span><span class="nc"> InvalidExample</span> {
    <span class="nl">version:</span> <span class="s2">&quot;2017-02-11&quot;</span>
}
</pre></div>
</div>
<p>The following example demonstrates how a service that supports multiple
protocols can define different authentication schemes for each protocol.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@protocols</span>([
    {<span class="nl">name:</span> <span class="s2">&quot;example.foo&quot;</span>, <span class="nl">auth:</span> [<span class="s2">&quot;http-basic&quot;</span>, <span class="s2">&quot;http-digest&quot;</span>]},
    {<span class="nl">name:</span> <span class="s2">&quot;example.baz&quot;</span>, <span class="nl">auth:</span> [<span class="s2">&quot;x.509&quot;</span>]}])
<span class="nd">@auth</span>([<span class="s2">&quot;http-basic&quot;</span>, <span class="s2">&quot;x.509&quot;</span>])
<span class="kd">service</span><span class="nc"> AuthenticatedService</span> {
    <span class="nl">version:</span> <span class="s2">&quot;2017-02-11&quot;</span>,
    <span class="nl">operations:</span> [<span class="vc">OperationA</span>, <span class="vc">OperationB</span>]
}

<span class="nd">@auth</span>([<span class="s2">&quot;http-digest&quot;</span>, <span class="s2">&quot;x.509&quot;</span>])
<span class="kd">operation</span><span class="nc"> OperationA</span> {}

<span class="kd">operation</span><span class="nc"> OperationB</span> {}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#AuthenticatedService&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#OperationA&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#OperationB&quot;</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#protocols&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;example.foo&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;auth&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;http-basic&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;http-digest&quot;</span>
                        <span class="p">]</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;example.baz&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;auth&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;x.509&quot;</span>
                        <span class="p">]</span>
                    <span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#OperationA&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#auth&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;http-digest&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;x.509&quot;</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#OperationB&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>When connecting to the above service over the &quot;example.foo&quot; protocol:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">OperationA</span></code> supports the &quot;http-digest&quot; authentication scheme.</li>
<li><code class="docutils literal notranslate"><span class="pre">OperationB</span></code> supports the &quot;http-basic&quot; and &quot;http-digest&quot; authentication
schemes.</li>
</ul>
<p>When connecting to the above service over the &quot;example.baz&quot; protocol,
both <code class="docutils literal notranslate"><span class="pre">OperationA</span></code> and <code class="docutils literal notranslate"><span class="pre">OperationB</span></code> support only the x.509 authentication
scheme.</p>
</div>
<div class="section" id="jsonname-trait">
<span id="id58"></span><h4><code class="docutils literal notranslate"><span class="pre">jsonName</span></code> trait<a class="headerlink" href="#jsonname-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Allows a serialized object property name in a JSON document to differ from
a structure member name used in the model.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">member:of(structure)</span></code></p>
<p class="last"><em>Any structure member</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">string</span></code></dd>
</dl>
<p>Given the following structure definition,</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">structure</span><span class="nc"> MyStructure</span> {
    <span class="nd">@jsonName</span>(<span class="s2">&quot;Foo&quot;</span>)
    <span class="nl">foo:</span> <span class="vc">String</span>,

    <span class="nl">bar:</span> <span class="vc">String</span>,
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyStructure&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#jsonName&quot;</span><span class="p">:</span> <span class="s2">&quot;Foo&quot;</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="nt">&quot;bar&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>and the following values provided for <code class="docutils literal notranslate"><span class="pre">MyStructure</span></code>,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;foo&quot;</span> <span class="o">=</span> <span class="s2">&quot;abc&quot;</span>
<span class="s2">&quot;bar&quot;</span> <span class="o">=</span> <span class="s2">&quot;def&quot;</span>
</pre></div>
</div>
<p>the JSON representation of the value would be serialized with the
following document:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;Foo&quot;</span><span class="p">:</span> <span class="s2">&quot;abc&quot;</span><span class="p">,</span>
    <span class="nt">&quot;bar&quot;</span><span class="p">:</span> <span class="s2">&quot;def&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="mediatype-trait">
<span id="id59"></span><h4><code class="docutils literal notranslate"><span class="pre">mediaType</span></code> trait<a class="headerlink" href="#mediatype-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Describes the contents of a blob or string shape using a media type as
defined by <span class="target" id="index-7"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc6838.html"><strong>RFC 6838</strong></a> (e.g., &quot;video/quicktime&quot;).</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(blob,</span> <span class="pre">string)</span></code></p>
<p class="last"><em>Any blob or string</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">string</span></code></dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">mediaType</span></code> can be used in tools for documentation, validation,
automated conversion or encoding in code, automatically determining an
appropriate Content-Type for an HTTP-based protocol, etc.</p>
<p>The following example defines a video/quicktime blob:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@mediaType</span>(<span class="s2">&quot;video/quicktime&quot;</span>)
<span class="kd">blob</span><span class="nc"> VideoData</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="timestampformat-trait">
<span id="id60"></span><h4><code class="docutils literal notranslate"><span class="pre">timestampFormat</span></code> trait<a class="headerlink" href="#timestampformat-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Defines a custom timestamp serialization format.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(timestamp,</span> <span class="pre">member</span> <span class="pre">&gt;</span> <span class="pre">timestamp)</span></code></p>
<p class="last"><em>timestamp or member that targets a timestamp</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">string</span></code></dd>
</dl>
<p>The serialization format of a timestamp shape is normally dictated by the
<a class="reference internal" href="#protocols-trait"><span class="std std-ref">protocol</span></a> of a service. In order to interoperate with
other web services or frameworks, it is sometimes necessary to use a specific
serialization format that differs from the protocol.</p>
<p>Smithy defines the following built-in timestamp formats:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Format</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>date-time</td>
<td>Date time as defined by the <code class="docutils literal notranslate"><span class="pre">date-time</span></code> production in
<a class="reference external" href="https://xml2rfc.tools.ietf.org/public/rfc/html/rfc3339.html#anchor14">RFC3339 section 5.6</a>
with no UTC offset (for example, <code class="docutils literal notranslate"><span class="pre">1985-04-12T23:20:50.52Z</span></code>).</td>
</tr>
<tr class="row-odd"><td>http-date</td>
<td>An HTTP date as defined by the <code class="docutils literal notranslate"><span class="pre">IMF-fixdate</span></code> production in
<span class="target" id="index-8"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc7231.html#section-7.1.1.1"><strong>RFC 7231#section-7.1.1.1</strong></a> (for example,
<code class="docutils literal notranslate"><span class="pre">Tue,</span> <span class="pre">29</span> <span class="pre">Apr</span> <span class="pre">2014</span> <span class="pre">18:30:38</span> <span class="pre">GMT</span></code>).</td>
</tr>
<tr class="row-even"><td>epoch-seconds</td>
<td>Also known as Unix time, the number of seconds that have elapsed since
00:00:00 Coordinated Universal Time (UTC), Thursday, 1 January 1970,
with decimal precision (for example, <code class="docutils literal notranslate"><span class="pre">1515531081.1234</span></code>).</td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">This trait SHOULD NOT be used unless the intended serialization format of
a timestmap differs from the default protocol format. Using this trait too
liberally can cause other tooling to improperly interpret the timestamp.</p>
</div>
<p>See <a class="reference internal" href="#timestamp-serialization-format"><span class="std std-ref">Timestamp serialization format</span></a> for information on how to
determine the serialization format of a timestamp.</p>
</div>
</div>
<div class="section" id="documentation-traits">
<span id="id61"></span><h3>Documentation traits<a class="headerlink" href="#documentation-traits" title="Permalink to this headline">¶</a></h3>
<div class="section" id="documentation-trait">
<span id="id62"></span><h4><code class="docutils literal notranslate"><span class="pre">documentation</span></code> trait<a class="headerlink" href="#documentation-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Adds documentation to a shape or member using the <a class="reference external" href="https://spec.commonmark.org/">CommonMark</a> format.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">*</span></code></dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">string</span></code></dd>
</dl>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@documentation</span>(<span class="s2">&quot;This *is* documentation about the shape.&quot;</span>)
<span class="kd">string</span><span class="nc"> MyString</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="effective-documentation">
<h5>Effective documentation<a class="headerlink" href="#effective-documentation" title="Permalink to this headline">¶</a></h5>
<p>The <em>effective documentation trait</em> of a shape is resolved using the following
process:</p>
<ol class="arabic simple">
<li>Use the <code class="docutils literal notranslate"><span class="pre">documentation</span></code> trait of the shape, if present.</li>
<li>If the shape is a <a class="reference internal" href="#member"><span class="std std-ref">member</span></a>, then use the <code class="docutils literal notranslate"><span class="pre">documentation</span></code> trait of
the shape targeted by the member, if present.</li>
</ol>
<p>For example, given the following model,</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">structure</span><span class="nc"> Foo</span> {
    <span class="nd">@documentation</span>(<span class="s2">&quot;Member documentation&quot;</span>)
    <span class="nl">baz:</span> <span class="vc">Baz</span>,

    <span class="nl">bar:</span> <span class="vc">Baz</span>,

    <span class="nl">qux:</span> <span class="vc">String</span>,
}

<span class="nd">@documentation</span>(<span class="s2">&quot;Shape documentation&quot;</span>)
<span class="kd">string</span><span class="nc"> Baz</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Foo&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;baz&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Baz&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Member documentation&quot;</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="nt">&quot;bar&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Baz&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;qux&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Baz&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Shape documentation&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>the effective documentation of <code class="docutils literal notranslate"><span class="pre">Foo$baz</span></code> resolves to &quot;Member documentation&quot;,
<code class="docutils literal notranslate"><span class="pre">Foo$bar</span></code> resolves to &quot;Shape documentation&quot;, <code class="docutils literal notranslate"><span class="pre">Foo$qux</span></code> is not documented,
<code class="docutils literal notranslate"><span class="pre">Baz</span></code> resolves to &quot;Shape documentation&quot;, and <code class="docutils literal notranslate"><span class="pre">Foo</span></code> is not documented.</p>
</div>
</div>
<div class="section" id="examples-trait">
<span id="id63"></span><h4><code class="docutils literal notranslate"><span class="pre">examples</span></code> trait<a class="headerlink" href="#examples-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Provides example inputs and outputs for operations.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">operation</span></code></dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">list</span></code> of <a class="reference internal" href="#example-structure"><span class="std std-ref">example structures</span></a></dd>
</dl>
<div class="section" id="example-structure">
<span id="id64"></span><h5>Example structure<a class="headerlink" href="#example-structure" title="Permalink to this headline">¶</a></h5>
<p>Each <code class="docutils literal notranslate"><span class="pre">example</span></code> trait value is a structure with the following members:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>title</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><strong>Required</strong>. A short title that defines the example.</td>
</tr>
<tr class="row-odd"><td>documentation</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>A longer description of the example in the <a class="reference external" href="https://spec.commonmark.org/">CommonMark</a> format.</td>
</tr>
<tr class="row-even"><td>input</td>
<td><code class="docutils literal notranslate"><span class="pre">document</span></code></td>
<td>Provides example input parameters for the operation. Each key is
the name of a top-level input structure member, and each value is the
value of the member.</td>
</tr>
<tr class="row-odd"><td>output</td>
<td><code class="docutils literal notranslate"><span class="pre">document</span></code></td>
<td>Provides example output parameters for the operation. Each key is
the name of a top-level output structure member, and each value is the
value of the member.</td>
</tr>
</tbody>
</table>
<p>The values provided for the <code class="docutils literal notranslate"><span class="pre">input</span></code> and <code class="docutils literal notranslate"><span class="pre">output</span></code> members MUST be
compatible with the shapes and constraints of the corresponding structure.
These values use the same semantics and format as
<a class="reference internal" href="#trait-definition-values"><span class="std std-ref">custom trait values</span></a>.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@readonly</span>
<span class="kd">operation</span><span class="nc"> MyOperation</span> {
    <span class="nl">input:</span> <span class="vc">MyOperationInput</span>,
    <span class="nl">output:</span> <span class="vc">MyOperationOutput</span>
}

<span class="kd">apply</span><span class="nc"> MyOperation</span> <span class="nd">@examples</span>([
    {
        <span class="nl">title:</span> <span class="s2">&quot;Invoke MyOperation&quot;</span>,
        <span class="nl">input:</span> {
            <span class="nl">tags:</span> [<span class="s2">&quot;foo&quot;</span>, <span class="s2">&quot;baz&quot;</span>, <span class="s2">&quot;bar&quot;</span>],
        },
        <span class="nl">output:</span> {
            <span class="nl">status:</span> <span class="s2">&quot;PENDING&quot;</span>,
        }
    },
    {
        <span class="nl">title:</span> <span class="s2">&quot;Another example for MyOperation&quot;</span>,
        <span class="nl">input:</span> {
            <span class="nl">foo:</span> <span class="s2">&quot;baz&quot;</span>,
        },
        <span class="nl">output:</span> {
            <span class="nl">status:</span> <span class="s2">&quot;PENDING&quot;</span>,
        }
    },
])
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="externaldocumentation-trait">
<span id="id65"></span><h4><code class="docutils literal notranslate"><span class="pre">externalDocumentation</span></code> trait<a class="headerlink" href="#externaldocumentation-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Provides a link to external documentation for a shape.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">*</span></code></dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">string</span></code> containing a valid URL.</dd>
</dl>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@externalDocumentation</span>(<span class="s2">&quot;https://www.example.com/&quot;</span>)
<span class="kd">service</span><span class="nc"> MyService</span> {
    <span class="nl">version:</span> <span class="s2">&quot;2006-03-01&quot;</span>,
}
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="sensitive-trait">
<span id="id66"></span><h4><code class="docutils literal notranslate"><span class="pre">sensitive</span></code> trait<a class="headerlink" href="#sensitive-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Indicates that the data stored in the shape or member is sensitive
and MUST be handled with care.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:not(:test(service,</span> <span class="pre">operation,</span> <span class="pre">resource))</span></code></p>
<p class="last"><em>Any shape that is not a service, operation, or resource.</em></p>
</dd>
<dt>Value type</dt>
<dd>Annotation trait</dd>
</dl>
<p>Sensitive data MUST NOT be exposed in things like exception messages or log
output. Application of this trait SHOULD NOT affect wire logging
(i.e., logging of all data transmitted to and from servers or clients).</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@sensitive</span>
<span class="kd">string</span><span class="nc"> MyString</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="since-trait">
<span id="id67"></span><h4><code class="docutils literal notranslate"><span class="pre">since</span></code> trait<a class="headerlink" href="#since-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Defines the version or date in which a shape or member was added to
the model.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">*</span></code></dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">string</span></code> representing the date it was added.</dd>
</dl>
</div>
<div class="section" id="tags-trait">
<span id="id68"></span><h4><code class="docutils literal notranslate"><span class="pre">tags</span></code> trait<a class="headerlink" href="#tags-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Tags a shape with arbitrary tag names that can be used to filter and group
shapes in the model.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">*</span></code></dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">list&lt;string&gt;</span></code></dd>
</dl>
<p>Tools can use these tags to filter shapes that should not be visible for a
particular consumer of a model. The string values that can be provided to the
tags trait are arbitrary and up to the model author.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@tags</span>([<span class="s2">&quot;experimental&quot;</span>, <span class="s2">&quot;public&quot;</span>])
<span class="kd">string</span><span class="nc"> SomeStructure</span> {}
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="title-trait">
<span id="id69"></span><h4><code class="docutils literal notranslate"><span class="pre">title</span></code> trait<a class="headerlink" href="#title-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Defines a proper name for a service or resource shape. This title can be
used in automatically generated documentation and other contexts to
provide a user friendly name for services and resources.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(service,</span> <span class="pre">resource)</span></code></p>
<p class="last"><em>Any service or resource</em></p>
</dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">string</span></code></dd>
</dl>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> acme.example</span>

<span class="nd">@title</span>(<span class="s2">&quot;ACME Simple Image Service&quot;</span>)
<span class="kd">service</span><span class="nc"> MySimpleImageService</span> {
    <span class="nl">version:</span> <span class="s2">&quot;2006-03-01&quot;</span>,
}
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="endpoint-traits">
<span id="id70"></span><h3>Endpoint Traits<a class="headerlink" href="#endpoint-traits" title="Permalink to this headline">¶</a></h3>
<p>Smithy provides various endpoint binding traits that can be used to configure
request endpoints.</p>
<div class="contents local topic" id="id71">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#endpoint-trait" id="id112"><code class="docutils literal notranslate"><span class="pre">endpoint</span></code> trait</a><ul>
<li><a class="reference internal" href="#labels" id="id113">Labels</a></li>
<li><a class="reference internal" href="#endpoint-clientbehavior" id="id114">Client Behavior</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hostlabel-trait" id="id115"><code class="docutils literal notranslate"><span class="pre">hostLabel</span></code> trait</a></li>
</ul>
</div>
<div class="section" id="endpoint-trait">
<span id="id72"></span><h4><code class="docutils literal notranslate"><span class="pre">endpoint</span></code> trait<a class="headerlink" href="#endpoint-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Configures a custom operation endpoint.</dd>
<dt>Trait selector</dt>
<dd><code class="docutils literal notranslate"><span class="pre">operation</span></code></dd>
<dt>Value type</dt>
<dd><code class="docutils literal notranslate"><span class="pre">structure</span></code></dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">endpoint</span></code> trait is a structure that contains the following members:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>hostPrefix</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><strong>Required</strong> The <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> property defines a template that expands
to a valid <em>host</em> as defined in <span class="target" id="index-9"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc3986.html#section-3.2.2"><strong>RFC 3986#section-3.2.2</strong></a>.
<code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> MAY contain <a class="reference internal" href="#endpoint-labels"><span class="std std-ref">label placeholders</span></a>
that reference top-level input members of the operation marked with the
<a class="reference internal" href="#hostlabel-trait"><span class="std std-ref">hostLabel trait</span></a>. The <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> MUST NOT contain a scheme,
userinfo, or port.</td>
</tr>
</tbody>
</table>
<p>The following example defines an operation that uses a custom endpoint:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@readonly</span>
<span class="nd">@endpoint</span>(<span class="nl">hostPrefix:</span> <span class="s2">&quot;{foo}.data.&quot;</span>)
<span class="kd">operation</span><span class="nc"> GetStatus</span> {
    <span class="nl">input:</span> <span class="vc">GetStatusInput</span>,
    <span class="nl">output:</span> <span class="vc">GetStatusOutput</span>
}

<span class="kd">structure</span><span class="nc"> GetStatusInput</span> {
    <span class="nd">@required</span>
    <span class="nd">@hostLabel</span>
    <span class="nl">foo:</span> <span class="vc">String</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#GetStatus&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetStatusInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetStatusOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#endpoint&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;hostPrefix&quot;</span><span class="p">:</span> <span class="s2">&quot;{foo}.data.&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetStatusInput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;smithy.api#hostLabel&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="labels">
<span id="endpoint-labels"></span><h5>Labels<a class="headerlink" href="#labels" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> patterns MAY contain label placeholders. <em class="dfn">Labels</em> consist
of label name characters surrounded by open and closed braces (for example,
&quot;{label_name}&quot; is a label and <code class="docutils literal notranslate"><span class="pre">label_name</span></code> is the label name). Every label
MUST correspond to a top-level operation input member, the input member MUST
be marked as <a class="reference internal" href="#required-trait"><span class="std std-ref">required</span></a>, the input member MUST have the
<a class="reference internal" href="#hostlabel-trait"><span class="std std-ref">hostLabel trait</span></a>, and the input member MUST reference a string.</p>
<p>Given the following operation,</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@readonly</span>
<span class="nd">@endpoint</span>(<span class="nl">hostPrefix:</span> <span class="s2">&quot;{foo}.data.&quot;</span>)
<span class="kd">operation</span><span class="nc"> GetStatus</span> {
    <span class="nl">input:</span> <span class="vc">GetStatusInput</span>,
    <span class="nl">output:</span> <span class="vc">GetStatusOutput</span>
}

<span class="kd">structure</span><span class="nc"> GetStatusInput</span> {
    <span class="nd">@required</span>
    <span class="nd">@hostLabel</span>
    <span class="nl">foo:</span> <span class="vc">String</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#GetStatus&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetStatusInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetStatusOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#endpoint&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;hostPrefix&quot;</span><span class="p">:</span> <span class="s2">&quot;{foo}.data.&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetStatusInput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;smithy.api#hostLabel&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>and the following value provided for <code class="docutils literal notranslate"><span class="pre">GetStatusInput</span></code>,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;foo&quot;</span> <span class="o">=</span> <span class="s2">&quot;abc&quot;</span>
</pre></div>
</div>
<p>the expanded <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> evaluates to <code class="docutils literal notranslate"><span class="pre">abc.data.</span></code>.</p>
<p>Any number of labels can be included within a pattern, provided that they are
not immediately adjacent and do not have identical label names.</p>
<p>Given the following operation,</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@readonly</span>
<span class="nd">@endpoint</span>(<span class="nl">hostPrefix:</span> <span class="s2">&quot;{foo}-{bar}.data.&quot;</span>)
<span class="kd">operation</span><span class="nc"> GetStatus</span> {
    <span class="nl">input:</span> <span class="vc">GetStatusInput</span>,
    <span class="nl">output:</span> <span class="vc">GetStatusOutput</span>
}

<span class="kd">structure</span><span class="nc"> GetStatusInput</span> {
    <span class="nd">@required</span>
    <span class="nd">@hostLabel</span>
    <span class="nl">foo:</span> <span class="vc">String</span>

    <span class="nd">@required</span>
    <span class="nd">@hostLabel</span>
    <span class="nl">bar:</span> <span class="vc">String</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#GetStatus&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetStatusInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetStatusOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#endpoint&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;hostPrefix&quot;</span><span class="p">:</span> <span class="s2">&quot;{foo}-{bar}.data.&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetStatusInput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;smithy.api#hostLabel&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="nt">&quot;bar&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;smithy.api#hostLabel&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>and the following values provided for <code class="docutils literal notranslate"><span class="pre">GetStatusInput</span></code>,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;foo&quot;</span> <span class="o">=</span> <span class="s2">&quot;abc&quot;</span>
<span class="s2">&quot;bar&quot;</span> <span class="o">=</span> <span class="s2">&quot;def&quot;</span>
</pre></div>
</div>
<p>the expanded <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> evaluates to <code class="docutils literal notranslate"><span class="pre">abc-def.data.</span></code>.</p>
<p>Labels MUST NOT be adjacent in a <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code>. The following operation is
invalid because the <code class="docutils literal notranslate"><span class="pre">{foo}</span></code> and <code class="docutils literal notranslate"><span class="pre">{bar}</span></code> labels are adjacent:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@readonly</span>
<span class="nd">@endpoint</span>(<span class="nl">hostPrefix:</span> <span class="s2">&quot;{foo}{bar}.data.&quot;</span>)
<span class="kd">operation</span><span class="nc"> GetStatus</span> {
    <span class="nl">input:</span> <span class="vc">GetStatusInput</span>,
    <span class="nl">output:</span> <span class="vc">GetStatusOutput</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#GetStatus&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetStatusInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetStatusOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#endpoint&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;hostPrefix&quot;</span><span class="p">:</span> <span class="s2">&quot;{foo}{bar}.data.&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="endpoint-clientbehavior">
<span id="id73"></span><h5>Client Behavior<a class="headerlink" href="#endpoint-clientbehavior" title="Permalink to this headline">¶</a></h5>
<p>If an API operation is decorated with an endpoint trait, a client MUST expand
the <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> template and prepend the expanded value to the client's
endpoint host prior to its use. Clients MUST fail when expanding a
<code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> template if the value of any labeled member is empty or null.</p>
<p>After the <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> template is expanded, a client MUST prepend the
expanded value to the client's derived endpoint host. The client MUST NOT add
any additional characters between the <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> and client derived
endpoint host. The resolved host value MUST result in a valid <a class="reference external" href="https://tools.ietf.org/html/rfc3986#section-3.2.2">RFC 3986 Host</a>.</p>
<p>Clients SHOULD provide a way for users to disable the <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> injection
behavior. If a user sets this flag, the client MUST NOT perform any
<code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> expansion and MUST NOT prepend the prefix to the client derived
host. The client MUST serialize members to any modeled target location
regardless of this flag.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">hostLabel</span></code> trait MUST NOT affect the protocol-specific serialization
logic of a member.</p>
<p>Given the following operation,</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@readonly</span>
<span class="nd">@endpoint</span>(<span class="nl">hostPrefix:</span> <span class="s2">&quot;{foo}.data.&quot;</span>)
<span class="nd">@http</span>(<span class="nl">method:</span> <span class="s2">&quot;GET&quot;</span>, <span class="nl">uri:</span> <span class="s2">&quot;/status&quot;</span>)
<span class="kd">operation</span><span class="nc"> GetStatus</span> {
    <span class="nl">input:</span> <span class="vc">GetStatusInput</span>,
    <span class="nl">output:</span> <span class="vc">GetStatusOutput</span>
}

<span class="kd">structure</span><span class="nc"> GetStatusInput</span> {
    <span class="nd">@required</span>
    <span class="nd">@hostLabel</span>
    <span class="nd">@httpHeader</span>(<span class="s2">&quot;X-Foo&quot;</span>)
    <span class="nl">foo:</span> <span class="vc">String</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#GetStatus&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetStatusInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetStatusOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#endpoint&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;hostPrefix&quot;</span><span class="p">:</span> <span class="s2">&quot;{foo}.data.&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;smithy.api#http&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;/status&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetStatusInput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;smithy.api#hostLabel&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;smithy.api#httpHeader&quot;</span><span class="p">:</span> <span class="s2">&quot;X-Foo&quot;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>and the following value provided for <code class="docutils literal notranslate"><span class="pre">GetStatusInput</span></code>,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;foo&quot;</span> <span class="o">=</span> <span class="s2">&quot;abc&quot;</span>
</pre></div>
</div>
<p>the expanded <code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> evaluates to <code class="docutils literal notranslate"><span class="pre">abc.data.</span></code> AND the <code class="docutils literal notranslate"><span class="pre">X-Foo</span></code> HTTP
header will contain the value <code class="docutils literal notranslate"><span class="pre">abc</span></code>.</p>
</div>
</div>
<div class="section" id="hostlabel-trait">
<span id="id74"></span><h4><code class="docutils literal notranslate"><span class="pre">hostLabel</span></code> trait<a class="headerlink" href="#hostlabel-trait" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Summary</dt>
<dd>Binds a top-level operation input structure member to a label in the
hostPrefix of an endpoint trait.</dd>
<dt>Trait selector</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">:test(member:of(structure)[trait|required]</span> <span class="pre">&gt;</span> <span class="pre">string)</span></code></p>
<p class="last"><em>Any required member of a structure that targets a string</em></p>
</dd>
<dt>Value type</dt>
<dd>Annotation trait</dd>
</dl>
<p>Operations marked with the <a class="reference internal" href="#endpoint-trait"><span class="std std-ref">endpoint trait</span></a> MAY contain labels in the
<code class="docutils literal notranslate"><span class="pre">hostPrefix</span></code> property. These labels reference top-level operation input
structure members that MUST be annotated with the <code class="docutils literal notranslate"><span class="pre">hostLabel</span></code> trait. Any
<code class="docutils literal notranslate"><span class="pre">hostLabel</span></code> trait applied to a member that is not a top-level input member
to an operation marked with the <a class="reference internal" href="#endpoint-trait"><span class="std std-ref">endpoint trait</span></a> will be ignored.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U21pdGh5 docutils container">
<div class="docutils container">
Smithy</div>
</div>
<div class="item sphinx-data-tab-SlNPTg== docutils container">
<div class="docutils container">
JSON</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-U21pdGh5 active docutils container">
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="nd">@readonly</span>
<span class="nd">@endpoint</span>(<span class="nl">hostPrefix:</span> <span class="s2">&quot;{foo}.data&quot;</span>)
<span class="kd">operation</span><span class="nc"> GetStatus</span> {
    <span class="nl">input:</span> <span class="vc">GetStatusInput</span>,
    <span class="nl">output:</span> <span class="vc">GetStatusOutput</span>
}

<span class="kd">structure</span><span class="nc"> GetStatusInput</span> {
    <span class="nd">@required</span>
    <span class="nd">@hostLabel</span>
    <span class="nl">foo:</span> <span class="vc">String</span>
}
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-SlNPTg== docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#GetStatus&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetStatusInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetStatusOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#readonly&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;smithy.api#endpoint&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;hostPrefix&quot;</span><span class="p">:</span> <span class="s2">&quot;{foo}.data.&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#GetStatusInput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;smithy.api#hostLabel&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="merging-models">
<span id="id75"></span><h2>Merging models<a class="headerlink" href="#merging-models" title="Permalink to this headline">¶</a></h2>
<p>Smithy models MAY be divided into multiple files so that they are easier to
maintain and evolve. Smithy tools MUST take the following steps to merge two
models together to form a composite model:</p>
<ol class="arabic simple">
<li>Assert that both models use a <a class="reference internal" href="#smithy-version"><span class="std std-ref">version</span></a> that is
compatible with the tool versions specified.</li>
<li>If both models define the same <a class="reference internal" href="#namespaces"><span class="std std-ref">namespace</span></a>, merge the
namespaces.<ul>
<li>Duplicate shape names, if found, MUST cause the model merge to fail.</li>
<li>Merge any conflicting <a class="reference internal" href="#traits"><span class="std std-ref">trait</span></a> definitions using
<a class="reference internal" href="#trait-conflict-resolution"><span class="std std-ref">trait conflict resolution</span></a>.</li>
</ul>
</li>
<li>Merge the <a class="reference internal" href="#metadata"><span class="std std-ref">metadata</span></a> properties of both models using the
<a class="reference internal" href="#merging-metadata"><span class="std std-ref">metadata merge rules</span></a>.</li>
</ol>
<div class="section" id="merging-metadata">
<span id="id76"></span><h3>Merging metadata<a class="headerlink" href="#merging-metadata" title="Permalink to this headline">¶</a></h3>
<p>Top-level metadata key-value pairs are merged using the following logic:</p>
<ol class="arabic simple">
<li>If a metadata key is only present in one model, then the entry is valid
and added to the merged model.</li>
<li>If both models contain the same key and both values are arrays, then
the entry is valid; the values of both arrays are concatenated into a
single array and added to the merged model.</li>
<li>If both models contain the same key and both values are exactly equal,
then the conflict is ignored and the value is added to the merged model.</li>
<li>If both models contain the same key and the values do not both map to
arrays, then the key is invalid and there is a metadata conflict error.</li>
</ol>
<p>Given the following two Smithy models:</p>
<div class="literal-block-wrapper docutils container" id="id77">
<div class="code-block-caption"><span class="caption-text">model-a.smithy</span><a class="headerlink" href="#id77" title="Permalink to this code">¶</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> &quot;foo&quot; </span><span class="nd">=</span> [<span class="s2">&quot;baz&quot;</span>, <span class="s2">&quot;bar&quot;</span>]
<span class="kd">metadata</span><span class="nc"> &quot;qux&quot; </span><span class="nd">=</span> <span class="s2">&quot;test&quot;</span>
<span class="kd">metadata</span><span class="nc"> &quot;validConflict&quot; </span><span class="nd">=</span> <span class="s2">&quot;hi!&quot;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id78">
<div class="code-block-caption"><span class="caption-text">model-b.smithy</span><a class="headerlink" href="#id78" title="Permalink to this code">¶</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> &quot;foo&quot; </span><span class="nd">=</span> [<span class="s2">&quot;lorem&quot;</span>, <span class="s2">&quot;ipsum&quot;</span>]
<span class="kd">metadata</span><span class="nc"> &quot;lorem&quot; </span><span class="nd">=</span> <span class="s2">&quot;ipsum&quot;</span>
<span class="kd">metadata</span><span class="nc"> &quot;validConflict&quot; </span><span class="nd">=</span> <span class="s2">&quot;hi!&quot;</span>
</pre></div>
</div>
</div>
<p>Merging <code class="docutils literal notranslate"><span class="pre">model-a.smithy</span></code> and <code class="docutils literal notranslate"><span class="pre">model-b.smithy</span></code> produces the following
model:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> &quot;foo&quot; </span><span class="nd">=</span> [<span class="s2">&quot;baz&quot;</span>, <span class="s2">&quot;bar&quot;</span>, <span class="s2">&quot;lorem&quot;</span>, <span class="s2">&quot;ipsum&quot;</span>]
<span class="kd">metadata</span><span class="nc"> &quot;qux&quot; </span><span class="nd">=</span> <span class="s2">&quot;test&quot;</span>
<span class="kd">metadata</span><span class="nc"> &quot;lorem&quot; </span><span class="nd">=</span> <span class="s2">&quot;ipsum&quot;</span>
<span class="kd">metadata</span><span class="nc"> &quot;validConflict&quot; </span><span class="nd">=</span> <span class="s2">&quot;hi!&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>




                    <section class="relations">

                        <a href="index.html" title="previous chapter" class="previous-page clearfix hidden-xs">← Specifications</a>

                        <a href="language-specification.html" title="next chapter" class="next-page clearfix">Smithy Language Specification →</a>
                    </section>

                </article><aside id="right-column" class="side-column hidden-sm">
                    <div class="column-body">
                        <section class="sidebar">
                            <ul>
<li><a class="reference internal" href="#">Smithy core specification</a><ul>
<li><a class="reference internal" href="#status-of-this-specification">Status of this specification</a></li>
<li><a class="reference internal" href="#requirements-notation">Requirements notation</a></li>
<li><a class="reference internal" href="#smithy-models">Smithy models</a><ul>
<li><a class="reference internal" href="#model-syntax">Model syntax</a></li>
<li><a class="reference internal" href="#model-version">Model version</a><ul>
<li><a class="reference internal" href="#version-compatibility">Version compatibility</a></li>
</ul>
</li>
<li><a class="reference internal" href="#model-metadata">Model metadata</a></li>
<li><a class="reference internal" href="#namespaces">Namespaces</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shapes">Shapes</a><ul>
<li><a class="reference internal" href="#simple-types">Simple types</a><ul>
<li><a class="reference internal" href="#timestamp-serialization-format">Timestamp serialization format</a></li>
<li><a class="reference internal" href="#document-types">Document types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#aggregate-types">Aggregate types</a><ul>
<li><a class="reference internal" href="#list">list</a></li>
<li><a class="reference internal" href="#set">set</a></li>
<li><a class="reference internal" href="#map">map</a></li>
<li><a class="reference internal" href="#structure">structure</a></li>
<li><a class="reference internal" href="#union">union</a></li>
<li><a class="reference internal" href="#member">member</a><ul>
<li><a class="reference internal" href="#default-values">Default values</a></li>
<li><a class="reference internal" href="#recursive-shape-definitions">Recursive shape definitions</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#service-types">Service types</a><ul>
<li><a class="reference internal" href="#service">Service</a><ul>
<li><a class="reference internal" href="#service-operations">Service operations</a></li>
<li><a class="reference internal" href="#service-resources">Service resources</a></li>
</ul>
</li>
<li><a class="reference internal" href="#operation">Operation</a><ul>
<li><a class="reference internal" href="#operation-input">Operation input</a></li>
<li><a class="reference internal" href="#operation-output">Operation output</a></li>
<li><a class="reference internal" href="#operation-errors">Operation errors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#resource">Resource</a><ul>
<li><a class="reference internal" href="#resource-identifiers">Identifiers</a></li>
<li><a class="reference internal" href="#binding-identifiers-to-operations">Binding identifiers to operations</a></li>
<li><a class="reference internal" href="#implicit-identifier-bindings">Implicit identifier bindings</a></li>
<li><a class="reference internal" href="#explicit-identifier-bindings">Explicit identifier bindings</a></li>
<li><a class="reference internal" href="#lifecycle-operations">Lifecycle operations</a></li>
<li><a class="reference internal" href="#put-lifecycle">Put lifecycle</a></li>
<li><a class="reference internal" href="#create-lifecycle">Create lifecycle</a></li>
<li><a class="reference internal" href="#read-lifecycle">Read lifecycle</a></li>
<li><a class="reference internal" href="#update-lifecycle">Update lifecycle</a></li>
<li><a class="reference internal" href="#delete-lifecycle">Delete lifecycle</a></li>
<li><a class="reference internal" href="#list-lifecycle">List lifecycle</a></li>
<li><a class="reference internal" href="#referencing-resources">Referencing resources</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#shape-id">Shape ID</a><ul>
<li><a class="reference internal" href="#relative-shape-id-resolution">Relative shape ID resolution</a></li>
<li><a class="reference internal" href="#shape-id-member-names">Shape ID member names</a></li>
<li><a class="reference internal" href="#shape-names">Shape names</a></li>
<li><a class="reference internal" href="#shape-id-conflicts">Shape ID conflicts</a></li>
<li><a class="reference internal" href="#syntactic-shape-ids-in-the-idl">Syntactic shape IDs in the IDL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#prelude-model">Prelude model</a></li>
<li><a class="reference internal" href="#traits">Traits</a><ul>
<li><a class="reference internal" href="#applying-traits-to-shapes">Applying traits to shapes</a></li>
<li><a class="reference internal" href="#trait-values">Trait values</a><ul>
<li><a class="reference internal" href="#structure-map-and-union-trait-values">Structure, map, and union trait values</a></li>
<li><a class="reference internal" href="#annotation-traits">Annotation traits</a></li>
<li><a class="reference internal" href="#other-trait-values">Other trait values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#trait-conflict-resolution">Trait conflict resolution</a></li>
<li><a class="reference internal" href="#trait-definitions">Trait definitions</a><ul>
<li><a class="reference internal" href="#trait-definition-properties">Trait definition properties</a></li>
<li><a class="reference internal" href="#trait-json-values">Trait JSON values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scope-of-member-traits">Scope of member traits</a></li>
<li><a class="reference internal" href="#type-refinement-traits">Type refinement traits</a><ul>
<li><a class="reference internal" href="#box-trait"><code class="docutils literal notranslate"><span class="pre">box</span></code> trait</a></li>
<li><a class="reference internal" href="#deprecated-trait"><code class="docutils literal notranslate"><span class="pre">deprecated</span></code> trait</a></li>
<li><a class="reference internal" href="#error-trait"><code class="docutils literal notranslate"><span class="pre">error</span></code> trait</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constraint-traits">Constraint traits</a><ul>
<li><a class="reference internal" href="#enum-trait"><code class="docutils literal notranslate"><span class="pre">enum</span></code> trait</a></li>
<li><a class="reference internal" href="#idref-trait"><code class="docutils literal notranslate"><span class="pre">idRef</span></code> trait</a></li>
<li><a class="reference internal" href="#length-trait"><code class="docutils literal notranslate"><span class="pre">length</span></code> trait</a></li>
<li><a class="reference internal" href="#pattern-trait"><code class="docutils literal notranslate"><span class="pre">pattern</span></code> trait</a></li>
<li><a class="reference internal" href="#private-trait"><code class="docutils literal notranslate"><span class="pre">private</span></code> trait</a></li>
<li><a class="reference internal" href="#range-trait"><code class="docutils literal notranslate"><span class="pre">range</span></code> trait</a></li>
<li><a class="reference internal" href="#required-trait"><code class="docutils literal notranslate"><span class="pre">required</span></code> trait</a></li>
<li><a class="reference internal" href="#uniqueitems-trait"><code class="docutils literal notranslate"><span class="pre">uniqueItems</span></code> trait</a></li>
</ul>
</li>
<li><a class="reference internal" href="#behavior-traits">Behavior traits</a><ul>
<li><a class="reference internal" href="#idempotencytoken-trait"><code class="docutils literal notranslate"><span class="pre">idempotencyToken</span></code> trait</a></li>
<li><a class="reference internal" href="#idempotent-trait"><code class="docutils literal notranslate"><span class="pre">idempotent</span></code> trait</a></li>
<li><a class="reference internal" href="#readonly-trait"><code class="docutils literal notranslate"><span class="pre">readonly</span></code> trait</a></li>
<li><a class="reference internal" href="#retryable-trait"><code class="docutils literal notranslate"><span class="pre">retryable</span></code> trait</a></li>
<li><a class="reference internal" href="#paginated-trait"><code class="docutils literal notranslate"><span class="pre">paginated</span></code> trait</a><ul>
<li><a class="reference internal" href="#pagination-behavior">Pagination Behavior</a></li>
<li><a class="reference internal" href="#client-behavior">Client behavior</a></li>
<li><a class="reference internal" href="#continuation-tokens">Continuation tokens</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#resource-traits">Resource traits</a><ul>
<li><a class="reference internal" href="#references-trait"><code class="docutils literal notranslate"><span class="pre">references</span></code> trait</a><ul>
<li><a class="reference internal" href="#implicit-ids">Implicit ids</a></li>
</ul>
</li>
<li><a class="reference internal" href="#resourceidentifier-trait"><code class="docutils literal notranslate"><span class="pre">resourceIdentifier</span></code> trait</a></li>
</ul>
</li>
<li><a class="reference internal" href="#protocol-traits">Protocol traits</a><ul>
<li><a class="reference internal" href="#protocols-trait"><code class="docutils literal notranslate"><span class="pre">protocols</span></code> trait</a><ul>
<li><a class="reference internal" href="#built-in-auth-schemes">Built-in auth schemes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#auth-trait"><code class="docutils literal notranslate"><span class="pre">auth</span></code> trait</a></li>
<li><a class="reference internal" href="#jsonname-trait"><code class="docutils literal notranslate"><span class="pre">jsonName</span></code> trait</a></li>
<li><a class="reference internal" href="#mediatype-trait"><code class="docutils literal notranslate"><span class="pre">mediaType</span></code> trait</a></li>
<li><a class="reference internal" href="#timestampformat-trait"><code class="docutils literal notranslate"><span class="pre">timestampFormat</span></code> trait</a></li>
</ul>
</li>
<li><a class="reference internal" href="#documentation-traits">Documentation traits</a><ul>
<li><a class="reference internal" href="#documentation-trait"><code class="docutils literal notranslate"><span class="pre">documentation</span></code> trait</a><ul>
<li><a class="reference internal" href="#effective-documentation">Effective documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples-trait"><code class="docutils literal notranslate"><span class="pre">examples</span></code> trait</a><ul>
<li><a class="reference internal" href="#example-structure">Example structure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#externaldocumentation-trait"><code class="docutils literal notranslate"><span class="pre">externalDocumentation</span></code> trait</a></li>
<li><a class="reference internal" href="#sensitive-trait"><code class="docutils literal notranslate"><span class="pre">sensitive</span></code> trait</a></li>
<li><a class="reference internal" href="#since-trait"><code class="docutils literal notranslate"><span class="pre">since</span></code> trait</a></li>
<li><a class="reference internal" href="#tags-trait"><code class="docutils literal notranslate"><span class="pre">tags</span></code> trait</a></li>
<li><a class="reference internal" href="#title-trait"><code class="docutils literal notranslate"><span class="pre">title</span></code> trait</a></li>
</ul>
</li>
<li><a class="reference internal" href="#endpoint-traits">Endpoint Traits</a><ul>
<li><a class="reference internal" href="#endpoint-trait"><code class="docutils literal notranslate"><span class="pre">endpoint</span></code> trait</a><ul>
<li><a class="reference internal" href="#labels">Labels</a></li>
<li><a class="reference internal" href="#endpoint-clientbehavior">Client Behavior</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hostlabel-trait"><code class="docutils literal notranslate"><span class="pre">hostLabel</span></code> trait</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#merging-models">Merging models</a><ul>
<li><a class="reference internal" href="#merging-metadata">Merging metadata</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </section>
                    </div>
                </aside></div>
        </section>


<footer id="footer">
    <div class="width-wrapper">
        <div class="copyright">
            <p>©2019, Amazon Web Services, Inc or its affiliates. All rights reserved.</p>
        </div>
    </div>
</footer>
  </body>
</html>
