
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="noindex">
    <title>Smithy Language Specification &#8212; Smithy 0.5.0 documentation</title><link rel="stylesheet" href="../_static/bootstrap-reboot.css" type="text/css" />

    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom-tabs.css" type="text/css" />


    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript">
        function _scroll(subjectId) {
            var subjectElement = $(subjectId);
            var actualSubjectHeight = subjectElement.height();
            var startingPosition = subjectElement[0].getBoundingClientRect().top;
            return function() {
                var availableHeight = $(window).height() - startingPosition;
                // Subtract the scroll position to account for sticky movement.
                availableHeight += Math.min($(window).scrollTop(), 40);
                var cappedHeight = Math.min(actualSubjectHeight, availableHeight);
                if (subjectElement.css("height") !== cappedHeight) {
                    subjectElement.css("height", cappedHeight);
                }
            };
        }

        // Scroll and resize the the columns when scrolled.
        $(function() {
            var rightScroll = _scroll("#right-column > .column-body");
            var scrollFn = function() {
                rightScroll.call(this, arguments);
            };
            scrollFn();
            $(window).scroll(scrollFn);
            $(window).resize(scrollFn);
        });

        // Scroll spy to change highlighted navigation element.
        $(function() {
            var section = document.querySelectorAll(".section");
            var sections = {};
            var i = 0;
            Array.prototype.forEach.call(section, function(e) {
                sections[e.id] = e.offsetTop;
            });
            var scrollSpy = function() {
                var scrollPosition = document.documentElement.scrollTop || document.body.scrollTop;
                for (i in sections) {
                    if (sections[i] <= scrollPosition) {
                        $('#right-column .current').removeClass('current');
                        $("#right-column a[href='#" + i + "']").addClass('current');
                    }
                }
            };
            $(window).scroll(scrollSpy);
            scrollSpy();
        });
    </script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Selectors" href="selectors.html" />
    <link rel="prev" title="Smithy core specification" href="core.html" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  </head><body>
    <header>
        <div class="header-flex width-wrapper">
            <div class="site-logo">
                <a href="../index.html">
                    <span class="logo-icon">⚒️</span><span class="logo-text">Smithy</span><span class="beta-text">beta</span>
                </a>
            </div>
            <ul id="page-navigation">
                <li class="site-page first"><a href="../quickstart.html">Quick Start</a></li>
                <li class="site-page"><a href="index.html">Specifications</a></li>
                <li class="site-page"><a href="../guides/index.html">Guides</a></li>
                <li class="site-page"><a href="https://github.com/awslabs/smithy">Code</a></li>
                <li class="site-search hidden-sm">
                    <form action="../search.html" method="get">
                        <input type="hidden" name="check_keywords" value="yes" />
                        <input type="hidden" name="area" value="default" />
                        <input class="search-input" autocomplete="off" type="search" name="q" placeholder="Search" />
                    </form>
                </li>
            </ul>
        </div>
    </header>

    <div style="margin: 1em; padding: 1em; background: #f8d7da; text-align: center;">
        You are viewing an old version of the documentation.
    </div>



        <section id="page-container">
            <div class="width-wrapper flex">
                <article id="document-body">

  <div class="section" id="smithy-language-specification">
<span id="id1"></span><h1>Smithy Language Specification<a class="headerlink" href="#smithy-language-specification" title="Permalink to this headline">¶</a></h1>
<p>This document defines the <a class="reference external" href="https://tools.ietf.org/html/rfc5234">ABNF</a> grammar and syntax for defining models using
the <em>Smithy interface definition language</em> (IDL) and the JSON abstract syntax
tree (AST) that can be used to represent a model.</p>
<p>Smithy models MUST be encoded using UTF-8 and SHOULD use Unix style
line endings.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#smithy-idl-abnf" id="id19">Smithy IDL ABNF</a><ul>
<li><a class="reference internal" href="#lexical-notes" id="id20">Lexical notes</a></li>
<li><a class="reference internal" href="#control-statement" id="id21">Control statement</a></li>
<li><a class="reference internal" href="#metadata-statement" id="id22">Metadata statement</a></li>
<li><a class="reference internal" href="#namespace-statement" id="id23">Namespace statement</a></li>
<li><a class="reference internal" href="#use-statement" id="id24">Use statement</a></li>
<li><a class="reference internal" href="#shape-statements" id="id25">Shape statements</a></li>
<li><a class="reference internal" href="#apply-statement" id="id26">Apply statement</a></li>
<li><a class="reference internal" href="#documentation-comment" id="id27">Documentation comment</a></li>
<li><a class="reference internal" href="#trait-values" id="id28">Trait values</a></li>
<li><a class="reference internal" href="#string-values" id="id29">String values</a></li>
<li><a class="reference internal" href="#node-values" id="id30">Node values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shape-id-abnf" id="id31">Shape ID ABNF</a></li>
<li><a class="reference internal" href="#json-ast" id="id32">JSON AST</a><ul>
<li><a class="reference internal" href="#top-level-properties" id="id33">Top level properties</a></li>
<li><a class="reference internal" href="#ast-shapes" id="id34">AST shapes</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="smithy-idl-abnf">
<span id="id2"></span><h2>Smithy IDL ABNF<a class="headerlink" href="#smithy-idl-abnf" title="Permalink to this headline">¶</a></h2>
<p>The Smithy IDL is a series of statements separated by newlines.</p>
<pre>
<strong id="grammar-token-idl">idl</strong> =
    [<a class="reference internal" href="#grammar-token-statement"><code class="xref docutils literal notranslate"><span class="pre">statement</span></code></a> *(1*<a class="reference internal" href="#grammar-token-br"><code class="xref docutils literal notranslate"><span class="pre">br</span></code></a> <a class="reference internal" href="#grammar-token-statement"><code class="xref docutils literal notranslate"><span class="pre">statement</span></code></a>)]

<strong id="grammar-token-statement">statement</strong> =
    <a class="reference internal" href="#grammar-token-control_statement"><code class="xref docutils literal notranslate"><span class="pre">control_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-metadata_statement"><code class="xref docutils literal notranslate"><span class="pre">metadata_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-use_statement"><code class="xref docutils literal notranslate"><span class="pre">use_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-namespace_statement"><code class="xref docutils literal notranslate"><span class="pre">namespace_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-apply_statement"><code class="xref docutils literal notranslate"><span class="pre">apply_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-documentation_comment"><code class="xref docutils literal notranslate"><span class="pre">documentation_comment</span></code></a>
  / <a class="reference internal" href="#grammar-token-shape_statement"><code class="xref docutils literal notranslate"><span class="pre">shape_statement</span></code></a>
</pre>
<div class="section" id="lexical-notes">
<h3>Lexical notes<a class="headerlink" href="#lexical-notes" title="Permalink to this headline">¶</a></h3>
<p>Whitespace is insignificant except for the following cases:</p>
<ul class="simple">
<li><a class="reference internal" href="#grammar-token-br"><code class="xref std std-token docutils literal notranslate"><span class="pre">br</span></code></a> production which indicates that a new line MUST occur</li>
<li><a class="reference internal" href="#shape-id-abnf"><span class="std std-ref">shape ID ABNF productions</span></a></li>
</ul>
<pre>
<strong id="grammar-token-br">br</strong> =
    %x0A / %x0D.0A
</pre>
<div class="section" id="comments">
<span id="id3"></span><h4>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h4>
<p>Comments can occur at any place in the IDL between tokens where whitespace
is insignificant. Comments in Smithy are defined using two forward slashes
followed by any character. A newline terminates a comment.</p>
<pre>
<strong id="grammar-token-line_comment">line_comment</strong> =
    &quot;//&quot; *(start_comment *<a class="reference internal" href="#grammar-token-not_newline"><code class="xref docutils literal notranslate"><span class="pre">not_newline</span></code></a>)

<strong id="grammar-token-start_comment">start_comment</strong> =
    %x09 / %x20-%x46 / %x48-10FFFF ; Any character other than &quot;/&quot; or newline

<strong id="grammar-token-not_newline">not_newline</strong> =
    %x09 / %x20-10FFFF             ; Any character but new line
</pre>
<p>Example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="c">// This is a comment</span>
<span class="kd">namespace</span><span class="nc"> com.foo</span> <span class="c">// This is also a comment</span>

<span class="c">// Another comment</span>
<span class="kd">string</span><span class="nc"> MyString</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="control-statement">
<span id="id4"></span><h3>Control statement<a class="headerlink" href="#control-statement" title="Permalink to this headline">¶</a></h3>
<p>Control statements apply metadata to a file. Control statements MUST be
defined at the beginning of a Smithy file before any other statements.</p>
<pre>
<strong id="grammar-token-control_statement">control_statement</strong> =
    &quot;$&quot; <a class="reference internal" href="#grammar-token-text"><code class="xref docutils literal notranslate"><span class="pre">text</span></code></a> &quot;:&quot; <a class="reference internal" href="#grammar-token-node_value"><code class="xref docutils literal notranslate"><span class="pre">node_value</span></code></a>
</pre>
<p>Implementations SHOULD ignore unknown control statements.</p>
<div class="section" id="version-statement">
<span id="id5"></span><h4>Version statement<a class="headerlink" href="#version-statement" title="Permalink to this headline">¶</a></h4>
<p>The version control statement is used to set the <a class="reference internal" href="core.html#smithy-version"><span class="std std-ref">version</span></a>
of a Smithy model file. The value of a version statement MUST be a string.
Only a single version statement can appear in a model file.</p>
<p>Example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">$version</span><span class="nd">:</span><span class="nc"> &quot;0.5.0&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Smithy specification is currently at version 0.5.0.</p>
</div>
</div>
</div>
<div class="section" id="metadata-statement">
<span id="id6"></span><h3>Metadata statement<a class="headerlink" href="#metadata-statement" title="Permalink to this headline">¶</a></h3>
<p>The metadata statement is used to attach arbitrary <a class="reference internal" href="core.html#metadata"><span class="std std-ref">metadata</span></a>
to a model.</p>
<pre>
<strong id="grammar-token-metadata_statement">metadata_statement</strong> =
    &quot;metadata&quot; <a class="reference internal" href="#grammar-token-metadata_key"><code class="xref docutils literal notranslate"><span class="pre">metadata_key</span></code></a> &quot;=&quot; <a class="reference internal" href="#grammar-token-metadata_value"><code class="xref docutils literal notranslate"><span class="pre">metadata_value</span></code></a>

<strong id="grammar-token-metadata_key">metadata_key</strong> =
    <a class="reference internal" href="#grammar-token-text"><code class="xref docutils literal notranslate"><span class="pre">text</span></code></a>

<strong id="grammar-token-metadata_value">metadata_value</strong> =
    <a class="reference internal" href="#grammar-token-node_value"><code class="xref docutils literal notranslate"><span class="pre">node_value</span></code></a>
</pre>
<p>Example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> example.string1 </span><span class="nd">=</span> <span class="s2">&quot;hello there&quot;</span>
<span class="kd">metadata</span><span class="nc"> example.string2 </span><span class="nd">=</span> <span class="s1">&#39;hello there&#39;</span>
<span class="kd">metadata</span><span class="nc"> example.bool1 </span><span class="nd">=</span> <span class="kc">true</span>
<span class="kd">metadata</span><span class="nc"> example.bool2 </span><span class="nd">=</span> <span class="kc">false</span>
<span class="kd">metadata</span><span class="nc"> example.number </span><span class="nd">=</span> <span class="m">10</span>
<span class="kd">metadata</span><span class="nc"> example.array </span><span class="nd">=</span> [<span class="m">10</span>, <span class="kc">true</span>, <span class="s2">&quot;hello&quot;</span>]
<span class="kd">metadata</span><span class="nc"> example.object </span><span class="nd">=</span> {<span class="nl">foo:</span> <span class="s2">&quot;baz&quot;</span>}
<span class="kd">metadata</span><span class="nc"> example.null </span><span class="nd">=</span> <span class="kc">null</span>
</pre></div>
</div>
<p>Top-level metadata key-value pair conflicts are resolved by
<a class="reference internal" href="core.html#merging-metadata"><span class="std std-ref">merging metadata</span></a>. Metadata statements MUST appear
before any namespace statements or shapes are defined.</p>
</div>
<div class="section" id="namespace-statement">
<span id="id7"></span><h3>Namespace statement<a class="headerlink" href="#namespace-statement" title="Permalink to this headline">¶</a></h3>
<p>The namespace statement is used to set the <em>current namespace</em>. Shapes
can only be defined if a current namespace is defined. Only a single
namespace can appear in an IDL model file.</p>
<pre>
<strong id="grammar-token-namespace_statement">namespace_statement</strong> =
    &quot;namespace&quot; <a class="reference internal" href="#grammar-token-namespace"><code class="xref docutils literal notranslate"><span class="pre">namespace</span></code></a>
</pre>
<p>Example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> com.foo.baz</span>
</pre></div>
</div>
</div>
<div class="section" id="use-statement">
<span id="id8"></span><h3>Use statement<a class="headerlink" href="#use-statement" title="Permalink to this headline">¶</a></h3>
<p>A use statement is used to import shapes and traits into the current namespace
so that they can be referred to using relative shape. A use statement MUST
come after a <a class="reference internal" href="#namespace-statement"><span class="std std-ref">namespace statement</span></a> and before any
shapes are defined in an IDL model file.</p>
<pre>
<strong id="grammar-token-use_statement">use_statement</strong> =
    &quot;use&quot; <a class="reference internal" href="#grammar-token-absolute_shape_id"><code class="xref docutils literal notranslate"><span class="pre">absolute_shape_id</span></code></a>
</pre>
<p>The following example imports <code class="docutils literal notranslate"><span class="pre">smithy.example#Foo</span></code> and
<code class="docutils literal notranslate"><span class="pre">smithy.example#Baz</span></code> so that they can be referred to by relative shape IDs:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.hello</span>

<span class="kd">use</span><span class="nc"> smithy.example#Foo</span>
<span class="kd">use</span><span class="nc"> smithy.example#Baz</span>

<span class="kd">map</span><span class="nc"> MyMap</span> {
    <span class="c">// Resolves to smithy.example#Foo</span>
    <span class="nl">key:</span> <span class="vc">Foo</span>,
    <span class="c">// Resolves to smithy.example#Baz</span>
    <span class="nl">value:</span> <span class="vc">Baz</span>,
}
</pre></div>
</div>
<p>A use statement can import traits too. The following example imports the
<code class="docutils literal notranslate"><span class="pre">smithy.example#test</span></code> and <code class="docutils literal notranslate"><span class="pre">smithy.example#anotherTrait</span></code> traits so that
they can be applied using relative shape IDs:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.hello</span>

<span class="kd">use</span><span class="nc"> smithy.example#test</span>
<span class="kd">use</span><span class="nc"> smithy.example#anotherTrait</span>

<span class="nd">@test</span> <span class="c">// &lt;-- Resolves to smithy.example#test</span>
<span class="kd">string</span><span class="nc"> MyString</span>
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<ol class="last arabic simple">
<li>A shape cannot be defined in a file with the same name as one of the
shapes imported with a <code class="docutils literal notranslate"><span class="pre">use</span></code> statement.</li>
<li>Shapes IDs with members names cannot be imported with a use statement.</li>
</ol>
</div>
<p>See <a class="reference internal" href="core.html#relative-shape-id"><span class="std std-ref">Relative shape ID resolution</span></a> for an in-depth description of how relative
shape IDs are resolved in the IDL.</p>
</div>
<div class="section" id="shape-statements">
<h3>Shape statements<a class="headerlink" href="#shape-statements" title="Permalink to this headline">¶</a></h3>
<p>Shape statements are used to define <a class="reference internal" href="core.html#shapes"><span class="std std-ref">shapes</span></a>. Shapes can only
be defined after a <em>current namespace</em> has been defined using a
<a class="reference internal" href="#namespace-statement"><span class="std std-ref">namespace statement</span></a>.</p>
<pre>
<strong id="grammar-token-shape_statement">shape_statement</strong> =
    [<a class="reference internal" href="#grammar-token-inline_traits"><code class="xref docutils literal notranslate"><span class="pre">inline_traits</span></code></a> <a class="reference internal" href="#grammar-token-br"><code class="xref docutils literal notranslate"><span class="pre">br</span></code></a>] <a class="reference internal" href="#grammar-token-shape_body"><code class="xref docutils literal notranslate"><span class="pre">shape_body</span></code></a>

<strong id="grammar-token-shape_body">shape_body</strong> =
    <a class="reference internal" href="#grammar-token-service_statement"><code class="xref docutils literal notranslate"><span class="pre">service_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-resource_statement"><code class="xref docutils literal notranslate"><span class="pre">resource_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-operation_statement"><code class="xref docutils literal notranslate"><span class="pre">operation_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-structure_statement"><code class="xref docutils literal notranslate"><span class="pre">structure_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-union_statement"><code class="xref docutils literal notranslate"><span class="pre">union_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-list_statement"><code class="xref docutils literal notranslate"><span class="pre">list_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-set_statement"><code class="xref docutils literal notranslate"><span class="pre">set_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-map_statement"><code class="xref docutils literal notranslate"><span class="pre">map_statement</span></code></a>
  / <a class="reference internal" href="#grammar-token-simple_shape"><code class="xref docutils literal notranslate"><span class="pre">simple_shape</span></code></a>

<strong id="grammar-token-service_statement">service_statement</strong> =
    &quot;service&quot; <a class="reference internal" href="#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> <a class="reference internal" href="#grammar-token-node_object"><code class="xref docutils literal notranslate"><span class="pre">node_object</span></code></a>

<strong id="grammar-token-resource_statement">resource_statement</strong> =
    &quot;resource&quot; <a class="reference internal" href="#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> <a class="reference internal" href="#grammar-token-node_object"><code class="xref docutils literal notranslate"><span class="pre">node_object</span></code></a>

<strong id="grammar-token-operation_statement">operation_statement</strong> =
    &quot;operation&quot; <a class="reference internal" href="#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> <a class="reference internal" href="#grammar-token-node_object"><code class="xref docutils literal notranslate"><span class="pre">node_object</span></code></a>

<strong id="grammar-token-structure_statement">structure_statement</strong> =
    &quot;structure&quot; <a class="reference internal" href="#grammar-token-structured_body"><code class="xref docutils literal notranslate"><span class="pre">structured_body</span></code></a>

<strong id="grammar-token-union_statement">union_statement</strong> =
    &quot;union&quot; <a class="reference internal" href="#grammar-token-structured_body"><code class="xref docutils literal notranslate"><span class="pre">structured_body</span></code></a>

<strong id="grammar-token-structured_body">structured_body</strong> =
    <a class="reference internal" href="#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> &quot;{&quot; [<a class="reference internal" href="#grammar-token-structured_member"><code class="xref docutils literal notranslate"><span class="pre">structured_member</span></code></a> *(&quot;,&quot; <a class="reference internal" href="#grammar-token-structured_member"><code class="xref docutils literal notranslate"><span class="pre">structured_member</span></code></a>)] &quot;}&quot;

<strong id="grammar-token-structured_member">structured_member</strong> =
    <a class="reference internal" href="#grammar-token-member_traits"><code class="xref docutils literal notranslate"><span class="pre">member_traits</span></code></a> <a class="reference internal" href="#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> &quot;:&quot; <a class="reference internal" href="#grammar-token-shape_id"><code class="xref docutils literal notranslate"><span class="pre">shape_id</span></code></a>

<strong id="grammar-token-list_statement">list_statement</strong> =
    &quot;list&quot; <a class="reference internal" href="#grammar-token-list_and_set_body"><code class="xref docutils literal notranslate"><span class="pre">list_and_set_body</span></code></a>

<strong id="grammar-token-set_statement">set_statement</strong> =
    &quot;set&quot; <a class="reference internal" href="#grammar-token-list_and_set_body"><code class="xref docutils literal notranslate"><span class="pre">list_and_set_body</span></code></a>

<strong id="grammar-token-list_and_set_body">list_and_set_body</strong> =
    <a class="reference internal" href="#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> &quot;{&quot; <a class="reference internal" href="#grammar-token-member_traits"><code class="xref docutils literal notranslate"><span class="pre">member_traits</span></code></a> &quot;member&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-shape_id"><code class="xref docutils literal notranslate"><span class="pre">shape_id</span></code></a> [&quot;,&quot;] &quot;}&quot;

<strong id="grammar-token-map_statement">map_statement</strong> =
    &quot;map&quot; <a class="reference internal" href="#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> &quot;{&quot; <a class="reference internal" href="#grammar-token-map_body"><code class="xref docutils literal notranslate"><span class="pre">map_body</span></code></a> &quot;}&quot;

<strong id="grammar-token-map_body">map_body</strong> =
    <a class="reference internal" href="#grammar-token-map_member"><code class="xref docutils literal notranslate"><span class="pre">map_member</span></code></a> &quot;,&quot; <a class="reference internal" href="#grammar-token-map_member"><code class="xref docutils literal notranslate"><span class="pre">map_member</span></code></a> [&quot;,&quot;]

<strong id="grammar-token-map_member">map_member</strong> =
    <a class="reference internal" href="#grammar-token-member_traits"><code class="xref docutils literal notranslate"><span class="pre">member_traits</span></code></a> (&quot;key&quot; / &quot;value&quot;) &quot;:&quot; <a class="reference internal" href="#grammar-token-shape_id"><code class="xref docutils literal notranslate"><span class="pre">shape_id</span></code></a>

<strong id="grammar-token-simple_shape">simple_shape</strong> =
    <a class="reference internal" href="#grammar-token-simple_shape_name"><code class="xref docutils literal notranslate"><span class="pre">simple_shape_name</span></code></a> <a class="reference internal" href="#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a>

<strong id="grammar-token-simple_shape_name">simple_shape_name</strong> =
    &quot;blob&quot; / &quot;boolean&quot; / &quot;document&quot; / &quot;string&quot; / &quot;byte&quot; / &quot;short&quot;
  / &quot;integer&quot; / &quot;long&quot; / &quot;float&quot; / &quot;double&quot; / &quot;bigInteger&quot;
  / &quot;bigDecimal&quot; / &quot;timestamp&quot;
</pre>
</div>
<div class="section" id="apply-statement">
<h3>Apply statement<a class="headerlink" href="#apply-statement" title="Permalink to this headline">¶</a></h3>
<p>The apply statement is used to attach a trait to a shape outside of a shape's
definition.</p>
<pre>
<strong id="grammar-token-apply_statement">apply_statement</strong> =
    &quot;apply&quot; <a class="reference internal" href="#grammar-token-shape_id"><code class="xref docutils literal notranslate"><span class="pre">shape_id</span></code></a> <a class="reference internal" href="#grammar-token-trait"><code class="xref docutils literal notranslate"><span class="pre">trait</span></code></a>
</pre>
<p>The following example applies the <a class="reference internal" href="core.html#deprecated-trait"><span class="std std-ref">deprecated trait</span></a> trait to a shape
named <code class="docutils literal notranslate"><span class="pre">MyShape</span></code> using a <a class="reference internal" href="core.html#relative-shape-id"><span class="std std-ref">relative shape id</span></a>.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">apply</span><span class="nc"> MyShape</span> <span class="nd">@deprecated</span>
</pre></div>
</div>
</div>
<div class="section" id="documentation-comment">
<span id="id9"></span><h3>Documentation comment<a class="headerlink" href="#documentation-comment" title="Permalink to this headline">¶</a></h3>
<p>Documentation comments are a special kind of comment that provide
documentation for shapes. A documentation comment is formed when three
forward slashes (&quot;///&quot;) appear as the first non-whitespace characters
on a line.</p>
<pre>
<strong id="grammar-token-documentation_comment">documentation_comment</strong> =
    &quot;///&quot; *(<a class="reference internal" href="#grammar-token-not_newline"><code class="xref docutils literal notranslate"><span class="pre">not_newline</span></code></a>)
</pre>
<p>Documentation comments are defined using <a class="reference external" href="https://spec.commonmark.org/">CommonMark</a>. The text after the
forward slashes is considered the contents of the line. If the text starts
with a space (&quot; &quot;), the leading space is removed from the content.
Successive documentation comments are combined together using a newline
(&quot;\n&quot;) to form the documentation of a shape or trait definition.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Documentation comments on shapes are just syntax sugar for applying the
<a class="reference internal" href="core.html#documentation-trait"><span class="std std-ref">documentation trait</span></a>.</p>
</div>
<p>The following Smithy IDL example,</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="cm">/// This is documentation about a shape.</span>
<span class="cm">///</span>
<span class="cm">/// - This is a list</span>
<span class="cm">/// - More of the list.</span>
<span class="kd">string</span><span class="nc"> MyString</span>

<span class="cm">/// This is documentation about a trait definition.</span>
<span class="cm">///   More docs here.</span>
<span class="nd">@trait</span>
<span class="kd">structure</span><span class="nc"> myTrait</span> {}
</pre></div>
</div>
<p>is equivalent to the following JSON model:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;This is documentation about a shape.\n\n- This is a list\n- More of the list.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#myTrait&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#trait&quot;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;This is documentation about a trait definition.\n  More docs here.&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Documentation comments MUST appear immediately before a shape, and they MUST
appear <strong>before</strong> any traits applied to the shape.</p>
<p>The following example is valid because the documentation comment comes
before the traits applied to a shape:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="cm">/// A deprecated string.</span>
<span class="nd">@deprecated</span>
<span class="kd">string</span><span class="nc"> MyString</span>
</pre></div>
</div>
<p>Documentation comments can be applied to members of a shape.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="c">// Documentation about the structure.</span>
<span class="kd">structure</span><span class="nc"> Example</span> {
    <span class="cm">/// Documentation about the member.</span>
    <span class="nd">@sensitive</span>
    <span class="nl">foo:</span> <span class="vc">String</span>,
}
</pre></div>
</div>
<p>Documentation comments MUST NOT be applied to anything other than shapes.
The following documentation comments are all invalid.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="cm">/// Invalid (cannot apply to control statements)</span>
<span class="kd">$version</span><span class="nd">:</span><span class="nc"> &quot;0.5.0&quot;</span>

<span class="cm">/// Invalid (cannot apply to namespaces)</span>
<span class="kd">namespace</span><span class="nc"> smithy.example</span>

<span class="cm">/// Invalid (cannot apply to metadata)</span>
<span class="kd">metadata</span><span class="nc"> foo </span><span class="nd">=</span> <span class="s2">&quot;baz&quot;</span>

<span class="nd">@deprecated</span>
<span class="cm">/// Invalid (comes after the @deprecated trait)</span>
<span class="kd">structure</span><span class="nc"> Example</span> {
    <span class="cm">/// Invalid (cannot apply docs to &#39;}&#39;)</span>
}

<span class="cm">/// Invalid (nothing comes after the comment)</span>
</pre></div>
</div>
</div>
<div class="section" id="trait-values">
<h3>Trait values<a class="headerlink" href="#trait-values" title="Permalink to this headline">¶</a></h3>
<p>Trait values are <a class="reference internal" href="core.html#traits"><span class="std std-ref">traits</span></a> attached to <a class="reference internal" href="core.html#shapes"><span class="std std-ref">shapes</span></a>.
Trait values can only appear immediately before a shape or
<a class="reference internal" href="core.html#member"><span class="std std-ref">member</span></a> definition.</p>
<pre>
<strong id="grammar-token-inline_traits">inline_traits</strong> =
    [<a class="reference internal" href="#grammar-token-trait"><code class="xref docutils literal notranslate"><span class="pre">trait</span></code></a> *<a class="reference internal" href="#grammar-token-trait"><code class="xref docutils literal notranslate"><span class="pre">trait</span></code></a>]

<strong id="grammar-token-trait">trait</strong> =
    &quot;&#64;&quot; <a class="reference internal" href="#grammar-token-shape_id"><code class="xref docutils literal notranslate"><span class="pre">shape_id</span></code></a> [&quot;(&quot; <a class="reference internal" href="#grammar-token-trait_body_value"><code class="xref docutils literal notranslate"><span class="pre">trait_body_value</span></code></a> &quot;)&quot;]

<strong id="grammar-token-trait_body_value">trait_body_value</strong> =
    <a class="reference internal" href="#grammar-token-trait_structure"><code class="xref docutils literal notranslate"><span class="pre">trait_structure</span></code></a> / <a class="reference internal" href="#grammar-token-node_value"><code class="xref docutils literal notranslate"><span class="pre">node_value</span></code></a>

<strong id="grammar-token-trait_structure">trait_structure</strong> =
    <a class="reference internal" href="#grammar-token-trait_structure_kvp"><code class="xref docutils literal notranslate"><span class="pre">trait_structure_kvp</span></code></a> *(&quot;,&quot; <a class="reference internal" href="#grammar-token-trait_structure_kvp"><code class="xref docutils literal notranslate"><span class="pre">trait_structure_kvp</span></code></a>)

<strong id="grammar-token-trait_structure_kvp">trait_structure_kvp</strong> =
    <a class="reference internal" href="#grammar-token-text"><code class="xref docutils literal notranslate"><span class="pre">text</span></code></a> &quot;:&quot; <a class="reference internal" href="#grammar-token-node_value"><code class="xref docutils literal notranslate"><span class="pre">node_value</span></code></a>

<strong id="grammar-token-member_traits">member_traits</strong> =
    [<a class="reference internal" href="#grammar-token-inline_traits"><code class="xref docutils literal notranslate"><span class="pre">inline_traits</span></code></a>]
</pre>
<p>The following example applies various traits to a structure shape and its
members.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@documentation</span>(<span class="s2">&quot;An animal in the animal kingdom&quot;</span>)
<span class="kd">structure</span><span class="nc"> Animal</span> {
    <span class="nd">@required</span>
    <span class="nl">name:</span> <span class="vc">smithy.api#String</span>,

    <span class="nd">@deprecated</span>
    <span class="nd">@deprecationReason</span>(<span class="s2">&quot;Use name instead&quot;</span>)
    <span class="nl">subject:</span> <span class="vc">smithy.api#String</span>,

    <span class="nd">@length</span>(<span class="nl">min:</span> <span class="m">0</span>)
    <span class="nl">age:</span> <span class="vc">smithy.api#Integer</span>,
}
</pre></div>
</div>
</div>
<div class="section" id="string-values">
<h3>String values<a class="headerlink" href="#string-values" title="Permalink to this headline">¶</a></h3>
<p>String values are utilized in various contexts. String values can be unquoted
if they adhere to the <a class="reference internal" href="#grammar-token-unquoted_text"><code class="xref std std-token docutils literal notranslate"><span class="pre">unquoted_text</span></code></a> production.</p>
<p>Smithy strings are considered <em>raw strings</em>, meaning they do not support any
form of escapes other than to escape a closing quote (using <code class="docutils literal notranslate"><span class="pre">\&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">\'</span></code>)
or to escape an escape (using <code class="docutils literal notranslate"><span class="pre">\\</span></code>).</p>
<pre>
<strong id="grammar-token-text">text</strong> =
    <a class="reference internal" href="#grammar-token-unquoted_text"><code class="xref docutils literal notranslate"><span class="pre">unquoted_text</span></code></a> / <a class="reference internal" href="#grammar-token-quoted_text"><code class="xref docutils literal notranslate"><span class="pre">quoted_text</span></code></a> / <a class="reference internal" href="#grammar-token-text_block"><code class="xref docutils literal notranslate"><span class="pre">text_block</span></code></a>

<strong id="grammar-token-unquoted_text">unquoted_text</strong> =
    (ALPHA / &quot;_&quot;) *(ALPHA / DIGIT / &quot;_&quot; / &quot;$&quot; / &quot;.&quot; / &quot;#&quot;)

<strong id="grammar-token-escaped_char">escaped_char</strong> =
    <a class="reference internal" href="#grammar-token-escape"><code class="xref docutils literal notranslate"><span class="pre">escape</span></code></a> (<a class="reference internal" href="#grammar-token-escape"><code class="xref docutils literal notranslate"><span class="pre">escape</span></code></a> / &quot;'&quot; / DQUOTE / &quot;b&quot; / &quot;f&quot; / &quot;n&quot; / &quot;r&quot; / &quot;t&quot; / &quot;/&quot; / <a class="reference internal" href="#grammar-token-unicode_escape"><code class="xref docutils literal notranslate"><span class="pre">unicode_escape</span></code></a>)

<strong id="grammar-token-unicode_escape">unicode_escape</strong> =
    &quot;u&quot; <a class="reference internal" href="#grammar-token-hex"><code class="xref docutils literal notranslate"><span class="pre">hex</span></code></a> <a class="reference internal" href="#grammar-token-hex"><code class="xref docutils literal notranslate"><span class="pre">hex</span></code></a> <a class="reference internal" href="#grammar-token-hex"><code class="xref docutils literal notranslate"><span class="pre">hex</span></code></a> <a class="reference internal" href="#grammar-token-hex"><code class="xref docutils literal notranslate"><span class="pre">hex</span></code></a>

<strong id="grammar-token-hex">hex</strong> =
     DIGIT / %x41-46 / %x61-66

<strong id="grammar-token-quoted_text">quoted_text</strong> =
    DQUOTE *<a class="reference internal" href="#grammar-token-quoted_char"><code class="xref docutils literal notranslate"><span class="pre">quoted_char</span></code></a> DQUOTE

<strong id="grammar-token-quoted_char">quoted_char</strong> =
    %x20-21
  / %x23-5B
  / %x5D-10FFFF
  / <a class="reference internal" href="#grammar-token-escaped_char"><code class="xref docutils literal notranslate"><span class="pre">escaped_char</span></code></a>
  / <a class="reference internal" href="#grammar-token-preserved_double"><code class="xref docutils literal notranslate"><span class="pre">preserved_double</span></code></a>

<strong id="grammar-token-preserved_double">preserved_double</strong> =
    <a class="reference internal" href="#grammar-token-escape"><code class="xref docutils literal notranslate"><span class="pre">escape</span></code></a> (%x20-21 / %x23-5B / %x5D-10FFFF)

<strong id="grammar-token-escape">escape</strong> =
    %x5C ; backslash

<strong id="grammar-token-text_block">text_block</strong> =
    DQUOTE DQUOTE DQUOTE <a class="reference internal" href="#grammar-token-br"><code class="xref docutils literal notranslate"><span class="pre">br</span></code></a> <a class="reference internal" href="#grammar-token-quoted_char"><code class="xref docutils literal notranslate"><span class="pre">quoted_char</span></code></a> DQUOTE DQUOTE DQUOTE
</pre>
<p>New lines in strings are normalized from CR (u000D) and CRLF (u000Du000A)
to LF (u000A). This ensures that strings defined in a Smithy model are
equivalent across platforms. If a literal <code class="docutils literal notranslate"><span class="pre">\r</span></code> is desired, it can be added
a string value using the Unicode escape <code class="docutils literal notranslate"><span class="pre">\u000d</span></code>.</p>
<div class="section" id="unquoted-strings">
<span id="id10"></span><h4>Unquoted strings<a class="headerlink" href="#unquoted-strings" title="Permalink to this headline">¶</a></h4>
<p>Unquoted strings that appear in the IDL as part of a trait value or metadata
value are treated as shape IDs. Strings MUST be quoted if a value is not
intended to be converted into a resolved shape ID.</p>
<p>See <a class="reference internal" href="core.html#syntactic-shape-ids"><span class="std std-ref">Syntactic shape IDs in the IDL</span></a> for more information.</p>
</div>
<div class="section" id="text-blocks">
<span id="id11"></span><h4>Text blocks<a class="headerlink" href="#text-blocks" title="Permalink to this headline">¶</a></h4>
<p>A text block is a string literal that can span multiple lines and
automatically removes any incidental whitespace. A text block is opened with
three double quotes (&quot;&quot;&quot;), followed by a newline, zero or more content
characters, and closed with three double quotes.</p>
<p><em>Smithy text blocks are heavily based on text blocks defined in</em> <a class="reference external" href="https://openjdk.java.net/jeps/355">JEP 355</a></p>
<p>Text blocks differentiate <em>incidental whitespace</em> from
<em>significant whitespace</em>. Smithy will re-indent the content of a text block by
removing all incidental whitespace.</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@documentation</span>(<span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    &lt;div&gt;</span>
<span class="s2">        &lt;p&gt;Hello!&lt;/p&gt;</span>
<span class="s2">    &lt;/div&gt;</span>
<span class="s2">    &quot;&quot;&quot;</span>)
</pre></div>
</div>
<p>The four leading spaces in the above text block are considered insignificant
because they are common across all lines. Because the closing delimiter
appears on its own line, a trailing new line is added to the result. The
content of the text block is re-indented to remove the insignificant
whitespace, making it equivalent to the following:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@documentation</span>(<span class="s2">&quot;&lt;div&gt;\n    &lt;p&gt;Hello!&lt;/p&gt;\n&lt;/div&gt;\n&quot;</span>)
</pre></div>
</div>
<p>The closing delimiter can be placed on the same line as content if no new line
is desired at the end of the result. The above example could be rewritten to
not including a trailing new line:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@documentation</span>(<span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    &lt;div&gt;</span>
<span class="s2">        &lt;p&gt;Hello!&lt;/p&gt;</span>
<span class="s2">    &lt;/div&gt;&quot;&quot;&quot;</span>)
</pre></div>
</div>
<p>This example is equivalent to the following:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@documentation</span>(<span class="s2">&quot;&lt;div&gt;\n    &lt;p&gt;Hello!&lt;/p&gt;\n&lt;/div&gt;&quot;</span>)
</pre></div>
</div>
<p>The following text blocks are ill-formed:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;&quot;&quot;foo&quot;&quot;&quot;</span>  <span class="c">// missing new line following open delimiter</span>
<span class="s2">&quot;&quot;&quot; &quot;&quot;&quot;</span>    <span class="c">// missing new line following open delimiter</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&quot;</span>          <span class="c">// missing closing delimiter</span>
</pre></div>
</div>
<div class="section" id="incidental-white-space-removal">
<span id="incidental-whitespace"></span><h5>Incidental white space removal<a class="headerlink" href="#incidental-white-space-removal" title="Permalink to this headline">¶</a></h5>
<p>Smithy will re-indent the content of a text block by removing all
incidental whitespace using the following algorithm:</p>
<ol class="arabic">
<li><p class="first">Split the content of the text block at every LF, producing a list of lines.
The opening LF of the text block is not considered.</p>
<p>Given the following example (&quot;.&quot; is used to represent spaces),</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@documentation</span>(<span class="s2">&quot;&quot;&quot;</span>
<span class="s2">....Foo</span>
<span class="s2">........Baz</span>

<span class="s2">..</span>
<span class="s2">....Bar</span>
<span class="s2">....&quot;&quot;&quot;</span>)
</pre></div>
</div>
<p>the following lines are produced:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;    Foo&quot;</span><span class="p">,</span> <span class="s2">&quot;        Baz&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;    Bar&quot;</span><span class="p">,</span> <span class="s2">&quot;    &quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">Compute the <em>common whitespace prefix</em> by iterating over each line,
counting the number of leading spaces (&quot; &quot;) and taking the minimum count.
Except for the last line of content, lines that are empty or consist wholly
of whitespace are not considered. If the last line of content (that is, the
line that contains the closing delimiter) appears on its own line, then
that line's leading whitespace <strong>is</strong> considered when determining the
common whitespace prefix, allowing the closing delimiter to determine the
amount of indentation to remove.</p>
<p>Using the previous example, the common whitespace prefix is four spaces.
The empty third line and the blank fourth lines are not considered when
computing the common whitespace. The following uses &quot;.&quot; to represent the
common whitespace prefix:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@documentation</span>(<span class="s2">&quot;&quot;&quot;</span>
<span class="s2">....Foo</span>
<span class="s2">....    Baz</span>

<span class="s2">....</span>
<span class="s2">....Bar</span>
<span class="s2">....&quot;&quot;&quot;</span>)
</pre></div>
</div>
</li>
<li><p class="first">Remove the common white space prefix from each line.</p>
<p>This step produces the following values from the previous example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;Foo&quot;</span><span class="p">,</span> <span class="s2">&quot;    Baz&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Bar&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">Remove any trailing spaces from each line.</p>
</li>
<li><p class="first">Concatenate each line together, separated by LF.</p>
<p>This step produces the following result (&quot;|&quot; is used to represent the
left margin):</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="err">|</span><span class="vc">Foo</span>
<span class="err">|</span>    <span class="vc">Baz</span>
<span class="err">|</span>
<span class="err">|</span>
<span class="err">|</span><span class="vc">Bar</span>
<span class="err">|</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="significant-trailing-line">
<h5>Significant trailing line<a class="headerlink" href="#significant-trailing-line" title="Permalink to this headline">¶</a></h5>
<p>The last line of text block content is used when determining the common
whitespace prefix.</p>
<p>Consider the following example:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@documentation</span>(<span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Foo</span>
<span class="s2">        Baz</span>
<span class="s2">    Bar</span>
<span class="s2">&quot;&quot;&quot;</span>)
</pre></div>
</div>
<p>Because the closing delimiter is at the margin and left of the rest of the
content, the common whitespace prefix is 0 characters, resulting in the
following equivalent string:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@documentation</span>(<span class="s2">&quot;    Foo\n        Baz\n    Bar\n&quot;</span>)
</pre></div>
</div>
<p>If the closing delimiter is moved to the right of the content, then it has
no bearing on the common whitespace prefix. The common whitespace prefix in
the following example is visualized using &quot;.&quot; to represent spaces:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@documentation</span>(<span class="s2">&quot;&quot;&quot;</span>
<span class="s2">....Foo</span>
<span class="s2">....    Baz</span>
<span class="s2">....Bar</span>
<span class="s2">        &quot;&quot;&quot;</span>)
</pre></div>
</div>
<p>Because lines are trimmed when they are added to the result, the above example
is equivalent to the following:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="nd">@documentation</span>(<span class="s2">&quot;Foo\n    Baz\nBar\n&quot;</span>)
</pre></div>
</div>
</div>
<div class="section" id="escapes-in-text-blocks">
<h5>Escapes in text blocks<a class="headerlink" href="#escapes-in-text-blocks" title="Permalink to this headline">¶</a></h5>
<p>Text blocks support all of the <a class="reference internal" href="#string-escape-characters"><span class="std std-ref">string escape characters</span></a>
of other strings. The use of three double quotes allows unescaped double quotes
(&quot;) to appear in text blocks. The following text block is interpreted as
<code class="docutils literal notranslate"><span class="pre">&quot;hello!&quot;</span></code>:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&quot;</span><span class="vc">hello</span><span class="err">!</span><span class="s2">&quot;</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Three quotes can appear in a text block without being treated as the closing
delimiter as long as one of the quotes are escaped. The following text block
is interpreted as <code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">&quot;&quot;&quot;\nbaz</span></code>:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">foo \&quot;&quot;&quot;</span>
<span class="s2">baz&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>String escapes are interpreted <strong>after</strong> <a class="reference internal" href="#incidental-whitespace"><span class="std std-ref">incidental whitespace</span></a>
is removed from a text block. The following example uses &quot;.&quot; to denote spaces:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">..&lt;div&gt;</span>
<span class="s2">....&lt;p&gt;Hi\\n....bar&lt;/p&gt;</span>
<span class="s2">..&lt;/div&gt;</span>
<span class="s2">..&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Because string escapes are expanded after incidental whitespace is removed, it
is interpreted as:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="err">&lt;</span><span class="vc">div</span><span class="err">&gt;</span>
<span class="vc">..</span><span class="err">&lt;</span><span class="vc">p</span><span class="err">&gt;</span><span class="vc">Hi</span>
<span class="vc">....bar</span><span class="err">&lt;/</span><span class="vc">p</span><span class="err">&gt;</span>
<span class="err">&lt;/</span><span class="vc">div</span><span class="err">&gt;</span>
</pre></div>
</div>
<p>New lines in the text block can be escaped. This allows for long, single-line
strings to be broken into multiple lines in the IDL. The following example
is interpreted as <code class="docutils literal notranslate"><span class="pre">Foo</span> <span class="pre">Baz</span> <span class="pre">Bam</span></code>:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Foo \</span>
<span class="s2">Baz \</span>
<span class="s2">Bam&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Escaped new lines can be intermixed with unescaped newlines. The following
example is interpreted as <code class="docutils literal notranslate"><span class="pre">Foo\nBaz</span> <span class="pre">Bam</span></code>:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Foo</span>
<span class="s2">Baz \</span>
<span class="s2">Bam&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="string-escape-characters">
<span id="id12"></span><h4>String escape characters<a class="headerlink" href="#string-escape-characters" title="Permalink to this headline">¶</a></h4>
<p>The Smithy IDL supports escape sequences only within quoted strings. Smithy
supports all of the same escape sequences as JSON plus escaping of single
quotes.</p>
<p>The following sequences are allowed:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="35%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Unicode code point</th>
<th class="head">Smithy escape</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>U+0022</td>
<td><code class="docutils literal notranslate"><span class="pre">\&quot;</span></code></td>
<td>double quote</td>
</tr>
<tr class="row-odd"><td>U+0027</td>
<td><code class="docutils literal notranslate"><span class="pre">\'</span></code></td>
<td>single quote</td>
</tr>
<tr class="row-even"><td>U+005C</td>
<td><code class="docutils literal notranslate"><span class="pre">\\</span></code></td>
<td>backslash</td>
</tr>
<tr class="row-odd"><td>U+002F</td>
<td><code class="docutils literal notranslate"><span class="pre">\/</span></code></td>
<td>forward slash</td>
</tr>
<tr class="row-even"><td>U+0008</td>
<td><code class="docutils literal notranslate"><span class="pre">\b</span></code></td>
<td>backspace BS</td>
</tr>
<tr class="row-odd"><td>U+000C</td>
<td><code class="docutils literal notranslate"><span class="pre">\f</span></code></td>
<td>form feed FF</td>
</tr>
<tr class="row-even"><td>U+000A</td>
<td><code class="docutils literal notranslate"><span class="pre">\n</span></code></td>
<td>line feed LF</td>
</tr>
<tr class="row-odd"><td>U+000D</td>
<td><code class="docutils literal notranslate"><span class="pre">\r</span></code></td>
<td>carriage return CR</td>
</tr>
<tr class="row-even"><td>U+0009</td>
<td><code class="docutils literal notranslate"><span class="pre">\t</span></code></td>
<td>horizontal tab HT</td>
</tr>
<tr class="row-odd"><td>U+HHHH</td>
<td><code class="docutils literal notranslate"><span class="pre">\uHHHH</span></code></td>
<td>4-digit hexadecimal Unicode code point</td>
</tr>
<tr class="row-even"><td><em>nothing</em></td>
<td><code class="docutils literal notranslate"><span class="pre">\\r\n</span></code>, <code class="docutils literal notranslate"><span class="pre">\\r</span></code>, <code class="docutils literal notranslate"><span class="pre">\\n</span></code></td>
<td>escaped new line expands to nothing</td>
</tr>
</tbody>
</table>
<p>Any other sequence following a backslash is an error.</p>
</div>
</div>
<div class="section" id="node-values">
<span id="id13"></span><h3>Node values<a class="headerlink" href="#node-values" title="Permalink to this headline">¶</a></h3>
<p><em>Node values</em> are analogous to JSON values. Node values are used to define
<a class="reference internal" href="core.html#metadata"><span class="std std-ref">metadata</span></a> and <a class="reference internal" href="core.html#trait-values"><span class="std std-ref">trait values</span></a>.</p>
<p>Smithy's node values have many advantages over JSON: comments,
unquoted keys, unquoted strings, single quoted strings, long strings,
and trailing commas.</p>
<pre>
<strong id="grammar-token-node_value">node_value</strong> =
    <a class="reference internal" href="#grammar-token-text"><code class="xref docutils literal notranslate"><span class="pre">text</span></code></a> / <a class="reference internal" href="#grammar-token-number"><code class="xref docutils literal notranslate"><span class="pre">number</span></code></a> / <a class="reference internal" href="#grammar-token-node_array"><code class="xref docutils literal notranslate"><span class="pre">node_array</span></code></a> / <a class="reference internal" href="#grammar-token-node_object"><code class="xref docutils literal notranslate"><span class="pre">node_object</span></code></a>

<strong id="grammar-token-node_array">node_array</strong> =
    &quot;[&quot; [<a class="reference internal" href="#grammar-token-node_value"><code class="xref docutils literal notranslate"><span class="pre">node_value</span></code></a> *(&quot;,&quot; <a class="reference internal" href="#grammar-token-node_value"><code class="xref docutils literal notranslate"><span class="pre">node_value</span></code></a>)] (( &quot;,&quot; &quot;]&quot; ) / &quot;]&quot; )

<strong id="grammar-token-node_object">node_object</strong> =
    &quot;{&quot; [<a class="reference internal" href="#grammar-token-node_object_kvp"><code class="xref docutils literal notranslate"><span class="pre">node_object_kvp</span></code></a> *(&quot;,&quot; <a class="reference internal" href="#grammar-token-node_object_kvp"><code class="xref docutils literal notranslate"><span class="pre">node_object_kvp</span></code></a>)] (( &quot;,&quot; &quot;}&quot; ) / &quot;}&quot; )

<strong id="grammar-token-node_object_kvp">node_object_kvp</strong> =
    <a class="reference internal" href="#grammar-token-text"><code class="xref docutils literal notranslate"><span class="pre">text</span></code></a> &quot;:&quot; <a class="reference internal" href="#grammar-token-node_value"><code class="xref docutils literal notranslate"><span class="pre">node_value</span></code></a>

<strong id="grammar-token-number">number</strong> =
    [<a class="reference internal" href="#grammar-token-minus"><code class="xref docutils literal notranslate"><span class="pre">minus</span></code></a>] <a class="reference internal" href="#grammar-token-int"><code class="xref docutils literal notranslate"><span class="pre">int</span></code></a> [<a class="reference internal" href="#grammar-token-frac"><code class="xref docutils literal notranslate"><span class="pre">frac</span></code></a>] [<a class="reference internal" href="#grammar-token-exp"><code class="xref docutils literal notranslate"><span class="pre">exp</span></code></a>]

<strong id="grammar-token-decimal_point">decimal_point</strong> =
    %x2E ; .

<strong id="grammar-token-digit1_9">digit1_9</strong> =
    %x31-39 ; 1-9

<strong id="grammar-token-e">e</strong> =
    %x65 / %x45 ; e E

<strong id="grammar-token-exp">exp</strong> =
    <a class="reference internal" href="#grammar-token-e"><code class="xref docutils literal notranslate"><span class="pre">e</span></code></a> [<a class="reference internal" href="#grammar-token-minus"><code class="xref docutils literal notranslate"><span class="pre">minus</span></code></a> / <a class="reference internal" href="#grammar-token-plus"><code class="xref docutils literal notranslate"><span class="pre">plus</span></code></a>] 1*DIGIT

<strong id="grammar-token-frac">frac</strong> =
    <a class="reference internal" href="#grammar-token-decimal_point"><code class="xref docutils literal notranslate"><span class="pre">decimal_point</span></code></a> 1*DIGIT

<strong id="grammar-token-int">int</strong> =
    <a class="reference internal" href="#grammar-token-zero"><code class="xref docutils literal notranslate"><span class="pre">zero</span></code></a> / (<a class="reference internal" href="#grammar-token-digit1_9"><code class="xref docutils literal notranslate"><span class="pre">digit1_9</span></code></a> *DIGIT)

<strong id="grammar-token-minus">minus</strong> =
    %x2D ; -

<strong id="grammar-token-plus">plus</strong> =
    %x2B ; +

<strong id="grammar-token-zero">zero</strong> =
    %x30 ; 0
</pre>
<p>The following example defines a string metadata key:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> foo </span><span class="nd">=</span> <span class="s2">&quot;baz&quot;</span>
</pre></div>
</div>
<p>The following example defines an integer metadata key:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> foo </span><span class="nd">=</span> <span class="m">100</span>
</pre></div>
</div>
<p>The following example defines an array metadata key:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> foo </span><span class="nd">=</span> [<span class="s2">&quot;hello&quot;</span>, <span class="m">123</span>, <span class="kc">true</span>, [<span class="kc">false</span>]]
</pre></div>
</div>
<p>The following example defines a complex object metadata key:</p>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">metadata</span><span class="nc"> foo </span><span class="nd">=</span> {
    <span class="nl">hello:</span> <span class="m">123</span>,
    <span class="s1">&#39;foo&#39;</span>: <span class="s2">&quot;456&quot;</span>,
    <span class="nl">testing:</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        Hello!</span>
<span class="s2">        &quot;&quot;&quot;</span>,
    <span class="nl">an_array:</span> [<span class="m">10.5</span>],
    <span class="nl">nested-object:</span> {
        <span class="nl">hello-there$:</span> <span class="kc">true</span>
    }, <span class="c">// &lt;-- Trailing comma</span>
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="shape-id-abnf">
<span id="id14"></span><h2>Shape ID ABNF<a class="headerlink" href="#shape-id-abnf" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="core.html#shape-id"><span class="std std-ref">Shape IDs</span></a> adhere to the following ABNF.</p>
<div class="important admonition">
<p class="first admonition-title">Lexical note</p>
<p class="last">Whitespace is <strong>significant</strong> in shape IDs.</p>
</div>
<pre>
<strong id="grammar-token-identifier">identifier</strong> =
    (ALPHA / &quot;_&quot;) *(ALPHA / DIGIT / &quot;_&quot;)

<strong id="grammar-token-namespace">namespace</strong> =
    <a class="reference internal" href="#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> *(&quot;.&quot; <a class="reference internal" href="#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a>)

<strong id="grammar-token-shape_id">shape_id</strong> =
    <a class="reference internal" href="#grammar-token-absolute_shape_id"><code class="xref docutils literal notranslate"><span class="pre">absolute_shape_id</span></code></a> / <a class="reference internal" href="#grammar-token-relative_shape_id"><code class="xref docutils literal notranslate"><span class="pre">relative_shape_id</span></code></a>

<strong id="grammar-token-absolute_shape_id">absolute_shape_id</strong> =
    <a class="reference internal" href="#grammar-token-namespace"><code class="xref docutils literal notranslate"><span class="pre">namespace</span></code></a> &quot;#&quot; <a class="reference internal" href="#grammar-token-relative_shape_id"><code class="xref docutils literal notranslate"><span class="pre">relative_shape_id</span></code></a>

<strong id="grammar-token-relative_shape_id">relative_shape_id</strong> =
    <a class="reference internal" href="#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> [&quot;$&quot; <a class="reference internal" href="#grammar-token-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a>]

<strong id="grammar-token-LOALPHA">LOALPHA</strong> =
    %x61-7A ; a-z
</pre>
</div>
<div class="section" id="json-ast">
<span id="id15"></span><h2>JSON AST<a class="headerlink" href="#json-ast" title="Permalink to this headline">¶</a></h2>
<p>Smithy models written using the Smithy IDL have an isomorphic JSON
abstract syntax tree (AST) representation that can be used to more easily
integrate Smithy into languages and tools that do not have a Smithy IDL
parser.</p>
<ul class="simple">
<li>Smithy JSON models can be merged together with other JSON models or other
Smithy IDL models using the rules defined in <a class="reference internal" href="core.html#merging-models"><span class="std std-ref">Merging models</span></a>.</li>
<li>Unless specified otherwise, the same constraints and logic is used to load
JSON models that is used to load Smithy IDL models.</li>
<li>All shape IDs in the JSON AST MUST be absolute shape IDs that contain a
namespace. One of the main drivers of the simplicity of the the JSON AST
over the Smithy IDL is that relative and forward references never need to
be resolved.</li>
</ul>
<div class="section" id="top-level-properties">
<h3>Top level properties<a class="headerlink" href="#top-level-properties" title="Permalink to this headline">¶</a></h3>
<p>Smithy JSON models are objects that can contain the following top-level
properties:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="30%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>smithy</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><strong>Required</strong>. Defines the <a class="reference internal" href="core.html#smithy-version"><span class="std std-ref">version</span></a> of the
Smithy specification (e.g., &quot;0.5.0&quot;).</td>
</tr>
<tr class="row-odd"><td>metadata</td>
<td>object</td>
<td>Defines all of the <a class="reference internal" href="core.html#metadata"><span class="std std-ref">metadata</span></a> about the model
using a JSON object. Each key is the metadata key to set, and each
value is the metadata value to assign to the key.</td>
</tr>
<tr class="row-even"><td>shapes</td>
<td>Map&lt;<a class="reference internal" href="core.html#shape-id"><span class="std std-ref">shape ID</span></a>, <a class="reference internal" href="#ast-shapes"><span class="std std-ref">AST shape</span></a>&gt;</td>
<td>A map of absolute shape IDs to shape definitions.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="ast-shapes">
<span id="id16"></span><h3>AST shapes<a class="headerlink" href="#ast-shapes" title="Permalink to this headline">¶</a></h3>
<p>AST <a class="reference internal" href="core.html#shapes"><span class="std std-ref">shapes</span></a> are defined using objects that always contain
a <code class="docutils literal notranslate"><span class="pre">type</span></code> property to define the shape type or <code class="docutils literal notranslate"><span class="pre">apply</span></code>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>All entries in the <code class="docutils literal notranslate"><span class="pre">shapes</span></code> map can contain a <code class="docutils literal notranslate"><span class="pre">traits</span></code> property that
defines the traits attached to the shape. <code class="docutils literal notranslate"><span class="pre">traits</span></code> is a map of where
each key is the absolute shape IDs of a trait definition and each value is
the value to assign to the trait.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Hi!&quot;</span><span class="p">,</span>
        <span class="nt">&quot;smithy.example#tags&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;a&quot;</span><span class="p">,</span>
            <span class="s2">&quot;b&quot;</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following example defines a string shape with a documentation trait.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyString&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;My documentation string&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="simple-shapes">
<h4>Simple shapes<a class="headerlink" href="#simple-shapes" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="core.html#simple-types"><span class="std std-ref">Simple shapes</span></a> are defined as an object. The following
example defines a shape for each simple type:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Blob&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;blob&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Boolean&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Document&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#String&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Byte&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;byte&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Short&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Integer&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Long&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Float&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;float&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Double&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#BigInteger&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bigInteger&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#BigDecimal&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bigDecimal&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Timestamp&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;timestamp&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="list-and-set-shapes">
<h4>List and set shapes<a class="headerlink" href="#list-and-set-shapes" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="core.html#list"><span class="std std-ref">list</span></a> and <a class="reference internal" href="core.html#set"><span class="std std-ref">set</span></a> shapes have a required <code class="docutils literal notranslate"><span class="pre">member</span></code> property
that is an <a class="reference internal" href="#ast-member"><span class="std std-ref">AST member</span></a>.</p>
<p>The following example defines a list with a string member:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following example defines a set with a string member:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MySet&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;set&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="ast-member">
<span id="id17"></span><h4>AST member<a class="headerlink" href="#ast-member" title="Permalink to this headline">¶</a></h4>
<p>An <em>AST member definition</em> defines a member of a shape. It is a special
kind of <a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a> that also
contains an optional <code class="docutils literal notranslate"><span class="pre">traits</span></code> property that defines traits attached to
the member. Each key in the <code class="docutils literal notranslate"><span class="pre">traits</span></code> property is the absolute shape ID
of the trait to apply, and each value is the value to assign to the
trait.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#MyShape&quot;</span><span class="p">,</span>
    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Hi!&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following example defines a list shape and its member.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyList&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="nt">&quot;member&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;Member documentation&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="ast-shape-reference">
<span id="id18"></span><h4>AST shape reference<a class="headerlink" href="#ast-shape-reference" title="Permalink to this headline">¶</a></h4>
<p>An <em>AST shape reference</em> is an object with a single property, <code class="docutils literal notranslate"><span class="pre">target</span></code>
that maps to an absolute shape ID.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#MyShape&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following example defines a shape reference inside of the <code class="docutils literal notranslate"><span class="pre">operations</span></code>
list of a service shape.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Service&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Operation&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Operation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="map-shape">
<h4>Map shape<a class="headerlink" href="#map-shape" title="Permalink to this headline">¶</a></h4>
<p>A <a class="reference internal" href="core.html#map"><span class="std std-ref">map</span></a> shape has a required <code class="docutils literal notranslate"><span class="pre">key</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code>
<a class="reference internal" href="#ast-member"><span class="std std-ref">AST member</span></a>. The shape referenced by the <code class="docutils literal notranslate"><span class="pre">key</span></code> member
MUST target a string shape.</p>
<p>The following example defines a map of strings to numbers:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#IntegerMap&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;map&quot;</span><span class="p">,</span>
            <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Integer&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="structure-and-union-shapes">
<h4>Structure and union shapes<a class="headerlink" href="#structure-and-union-shapes" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="core.html#structure"><span class="std std-ref">Structure</span></a> and <a class="reference internal" href="core.html#union"><span class="std std-ref">union</span></a> shapes are defined
with a <code class="docutils literal notranslate"><span class="pre">members</span></code> property that contains a map of member names to
<a class="reference internal" href="#ast-member"><span class="std std-ref">AST member</span></a> definitions. A union shape requires at least
one member, and a structure shape MAY omit the <code class="docutils literal notranslate"><span class="pre">members</span></code> property
entirely if the structure contains no members.</p>
<p>Structure and union member names MUST be case-insensitively unique across the
entire set of members. Each member name MUST adhere to the <a class="reference internal" href="#grammar-token-identifier"><code class="xref std std-token docutils literal notranslate"><span class="pre">identifier</span></code></a>
ABNF grammar.</p>
<p>The following example defines a structure with one required and one optional
member:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyStructure&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;stringMember&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;smithy.api#required&quot;</span><span class="p">:</span> <span class="kc">true</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="nt">&quot;numberMember&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Integer&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following example defines a union:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyUnion&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;union&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#Integer&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="service-shape">
<span id="service-ast-shape"></span><h4>Service shape<a class="headerlink" href="#service-shape" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="core.html#service"><span class="std std-ref">Service</span></a> shapes are defined using an object. Service
shapes defined in JSON support the same properties as the Smithy IDL.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="28%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>type</td>
<td>string</td>
<td><code class="docutils literal notranslate"><span class="pre">service</span></code></td>
</tr>
<tr class="row-odd"><td>version</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td><strong>Required</strong>. Defines the version of the service. The version can be
provided in any format (e.g., <code class="docutils literal notranslate"><span class="pre">2017-02-11</span></code>, <code class="docutils literal notranslate"><span class="pre">2.0</span></code>, etc).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="core.html#service-operations"><span class="std std-ref">operations</span></a></td>
<td>[<a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a>]</td>
<td>Binds a list of operations to the service. Each reference MUST target
an operation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="core.html#service-resources"><span class="std std-ref">resources</span></a></td>
<td>[<a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a>]</td>
<td>Binds a list of resources to the service. Each reference MUST target
a resource.</td>
</tr>
<tr class="row-even"><td>traits</td>
<td>Map&lt;<a class="reference internal" href="core.html#shape-id"><span class="std std-ref">shape ID</span></a>, trait value&gt;</td>
<td>Traits to apply to the service</td>
</tr>
</tbody>
</table>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyService&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-11&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetServerTime&quot;</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#SomeResource&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="resource-shape">
<span id="resource-ast-shape"></span><h4>Resource shape<a class="headerlink" href="#resource-shape" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="core.html#resource"><span class="std std-ref">Resource</span></a> shapes are defined using an object. Resource
shapes defined in JSON support the same properties as the Smithy IDL.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="28%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>type</td>
<td>string</td>
<td><code class="docutils literal notranslate"><span class="pre">service</span></code></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="core.html#resource-identifiers"><span class="std std-ref">identifiers</span></a></td>
<td>Map&lt;String, <a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a>&gt;</td>
<td>Defines identifier names and shape IDs used to identify the resource.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="core.html#create-lifecycle"><span class="std std-ref">create</span></a></td>
<td><a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a></td>
<td>Defines the lifecycle operation used to create a resource using one
or more identifiers created by the service.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="core.html#put-lifecycle"><span class="std std-ref">put</span></a></td>
<td><a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a></td>
<td>Defines an idempotent lifecycle operation used to create a resource
using identifiers provided by the client.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="core.html#read-lifecycle"><span class="std std-ref">read</span></a></td>
<td><a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a></td>
<td>Defines the lifecycle operation used to retrieve the resource.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="core.html#update-lifecycle"><span class="std std-ref">update</span></a></td>
<td><a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a></td>
<td>Defines the lifecycle operation used to update the resource.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="core.html#delete-lifecycle"><span class="std std-ref">delete</span></a></td>
<td><a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a></td>
<td>Defines the lifecycle operation used to delete the resource.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="core.html#list-lifecycle"><span class="std std-ref">list</span></a></td>
<td><a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a></td>
<td>Defines the lifecycle operation used to list resources of this type.</td>
</tr>
<tr class="row-even"><td>operations</td>
<td>[<a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a>]</td>
<td>Binds a list of non-lifecycle instance operations to the resource.
Each reference MUST target an operation.</td>
</tr>
<tr class="row-odd"><td>collectionOperations</td>
<td>[<a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a>]</td>
<td>Binds a list of non-lifecycle collection operations to the resource.
Each reference MUST target an operation.</td>
</tr>
<tr class="row-even"><td>resources</td>
<td>[<a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a>]</td>
<td>Binds a list of resources to this resource as a child resource,
forming a containment relationship. The resources MUST NOT have a
cyclical containment hierarchy, and a resource can not be bound more
than once in the entire closure of a resource or service.
Each reference MUST target a resource.</td>
</tr>
<tr class="row-odd"><td>traits</td>
<td>Map&lt;<a class="reference internal" href="core.html#shape-id"><span class="std std-ref">shape ID</span></a>, trait value&gt;</td>
<td>Traits to apply to the resource.</td>
</tr>
</tbody>
</table>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Thing&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
            <span class="nt">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;forecastId&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">},</span>
            <span class="p">},</span>
            <span class="nt">&quot;create&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#CreateThing&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;read&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#GetThing&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;update&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Updatething&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;delete&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#DeleteThing&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;list&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#ListThings&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#SomeInstanceOperation&quot;</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">&quot;collectionOperations&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#SomeCollectionOperation&quot;</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#SomeResource&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="operation-shape">
<span id="operation-ast-shape"></span><h4>Operation shape<a class="headerlink" href="#operation-shape" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="core.html#operation"><span class="std std-ref">Operation</span></a> shapes are defined using an object with the
following properties:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="28%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>type</td>
<td>string</td>
<td><code class="docutils literal notranslate"><span class="pre">operation</span></code></td>
</tr>
<tr class="row-odd"><td>input</td>
<td><a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a></td>
<td>Defines the optional input structure of the operation. The <code class="docutils literal notranslate"><span class="pre">input</span></code>
of an operation MUST resolve to a <a class="reference internal" href="core.html#structure"><span class="std std-ref">structure</span></a>.</td>
</tr>
<tr class="row-even"><td>output</td>
<td><a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a></td>
<td>Defines the optional output structure of the operation. The <code class="docutils literal notranslate"><span class="pre">output</span></code>
of an operation MUST resolve to a <a class="reference internal" href="core.html#structure"><span class="std std-ref">structure</span></a>.</td>
</tr>
<tr class="row-odd"><td>errors</td>
<td>[<a class="reference internal" href="#ast-shape-reference"><span class="std std-ref">AST shape reference</span></a>]</td>
<td>Defines the list of errors that MAY be encountered when invoking
the operation. Each reference MUST resolve to a <a class="reference internal" href="core.html#structure"><span class="std std-ref">structure</span></a>
shape that is marked with the <a class="reference internal" href="core.html#error-trait"><span class="std std-ref">error trait</span></a> trait.</td>
</tr>
<tr class="row-even"><td>traits</td>
<td>Map&lt;<a class="reference internal" href="core.html#shape-id"><span class="std std-ref">shape ID</span></a>, trait value&gt;</td>
<td>Traits to apply to the operation.</td>
</tr>
</tbody>
</table>
<p>The following example defines an operation, its input, output, and errors:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#MyOperation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#MyOperationInput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#MyOperationOutput&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;errors&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#BadRequestError&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#NotFoundError&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyOperationInput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#MyOperationOutput&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#BadRequestError&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#error&quot;</span><span class="p">:</span> <span class="s2">&quot;client&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#NotFoundError&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#error&quot;</span><span class="p">:</span> <span class="s2">&quot;client&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="ast-apply-type">
<h4>AST apply type<a class="headerlink" href="#ast-apply-type" title="Permalink to this headline">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">type</span></code> of <code class="docutils literal notranslate"><span class="pre">apply</span></code> can be used to apply traits to shapes outside of a
shape's definition. The <code class="docutils literal notranslate"><span class="pre">apply</span></code> type does not actually define a shape for
the shape ID; the shape ID MUST reference a shape or member of a shape.
The <code class="docutils literal notranslate"><span class="pre">apply</span></code> type allows only the <code class="docutils literal notranslate"><span class="pre">traits</span></code> property.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;smithy&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;shapes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;smithy.example#Struct&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.api#String&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;smithy.example#Struct$foo&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traits&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.api#documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;My documentation string&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>




                    <section class="relations">

                        <a href="core.html" title="previous chapter" class="previous-page clearfix hidden-xs">← Smithy core specification</a>

                        <a href="selectors.html" title="next chapter" class="next-page clearfix">Selectors →</a>
                    </section>

                </article><aside id="right-column" class="side-column hidden-sm">
                    <div class="column-body">
                        <section class="sidebar">
                            <ul>
<li><a class="reference internal" href="#">Smithy Language Specification</a><ul>
<li><a class="reference internal" href="#smithy-idl-abnf">Smithy IDL ABNF</a><ul>
<li><a class="reference internal" href="#lexical-notes">Lexical notes</a><ul>
<li><a class="reference internal" href="#comments">Comments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#control-statement">Control statement</a><ul>
<li><a class="reference internal" href="#version-statement">Version statement</a></li>
</ul>
</li>
<li><a class="reference internal" href="#metadata-statement">Metadata statement</a></li>
<li><a class="reference internal" href="#namespace-statement">Namespace statement</a></li>
<li><a class="reference internal" href="#use-statement">Use statement</a></li>
<li><a class="reference internal" href="#shape-statements">Shape statements</a></li>
<li><a class="reference internal" href="#apply-statement">Apply statement</a></li>
<li><a class="reference internal" href="#documentation-comment">Documentation comment</a></li>
<li><a class="reference internal" href="#trait-values">Trait values</a></li>
<li><a class="reference internal" href="#string-values">String values</a><ul>
<li><a class="reference internal" href="#unquoted-strings">Unquoted strings</a></li>
<li><a class="reference internal" href="#text-blocks">Text blocks</a><ul>
<li><a class="reference internal" href="#incidental-white-space-removal">Incidental white space removal</a></li>
<li><a class="reference internal" href="#significant-trailing-line">Significant trailing line</a></li>
<li><a class="reference internal" href="#escapes-in-text-blocks">Escapes in text blocks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#string-escape-characters">String escape characters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#node-values">Node values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shape-id-abnf">Shape ID ABNF</a></li>
<li><a class="reference internal" href="#json-ast">JSON AST</a><ul>
<li><a class="reference internal" href="#top-level-properties">Top level properties</a></li>
<li><a class="reference internal" href="#ast-shapes">AST shapes</a><ul>
<li><a class="reference internal" href="#simple-shapes">Simple shapes</a></li>
<li><a class="reference internal" href="#list-and-set-shapes">List and set shapes</a></li>
<li><a class="reference internal" href="#ast-member">AST member</a></li>
<li><a class="reference internal" href="#ast-shape-reference">AST shape reference</a></li>
<li><a class="reference internal" href="#map-shape">Map shape</a></li>
<li><a class="reference internal" href="#structure-and-union-shapes">Structure and union shapes</a></li>
<li><a class="reference internal" href="#service-shape">Service shape</a></li>
<li><a class="reference internal" href="#resource-shape">Resource shape</a></li>
<li><a class="reference internal" href="#operation-shape">Operation shape</a></li>
<li><a class="reference internal" href="#ast-apply-type">AST apply type</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

                        </section>
                    </div>
                </aside></div>
        </section>


<footer id="footer">
    <div class="width-wrapper">
        <div class="copyright">
            <p>©2019, Amazon Web Services, Inc or its affiliates. All rights reserved.</p>
        </div>
    </div>
</footer>
  </body>
</html>
